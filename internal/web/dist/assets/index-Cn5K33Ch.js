(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var Ue,Y,Hn,Ce,jt,Un,Gn,qn,It,$t,zt,jn,rt={},ot=[],Dr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ge=Array.isArray;function xe(e,n){for(var r in n)e[r]=n[r];return e}function Pt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Vn(e,n,r){var o,i,l,s={};for(l in n)l=="key"?o=n[l]:l=="ref"?i=n[l]:s[l]=n[l];if(arguments.length>2&&(s.children=arguments.length>3?Ue.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)s[l]===void 0&&(s[l]=e.defaultProps[l]);return Ae(e,s,o,i,null)}function Ae(e,n,r,o,i){var l={type:e,props:n,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Hn,__i:-1,__u:0};return i==null&&Y.vnode!=null&&Y.vnode(l),l}function ye(e){return e.children}function Ne(e,n){this.props=e,this.context=n}function Ie(e,n){if(n==null)return e.__?Ie(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Ie(e):null}function Lr(e){if(e.__P&&e.__d){var n=e.__v,r=n.__e,o=[],i=[],l=xe({},n);l.__v=n.__v+1,Y.vnode&&Y.vnode(l),Wt(e.__P,l,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,o,r??Ie(n),!!(32&n.__u),i),l.__v=n.__v,l.__.__k[l.__i]=l,Jn(o,l,i),n.__e=n.__=null,l.__e!=r&&Kn(l)}}function Kn(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(n){if(n!=null&&n.__e!=null)return e.__e=e.__c.base=n.__e}),Kn(e)}function Rt(e){(!e.__d&&(e.__d=!0)&&Ce.push(e)&&!it.__r++||jt!=Y.debounceRendering)&&((jt=Y.debounceRendering)||Un)(it)}function it(){for(var e,n=1;Ce.length;)Ce.length>n&&Ce.sort(Gn),e=Ce.shift(),n=Ce.length,Lr(e);it.__r=0}function Yn(e,n,r,o,i,l,s,d,p,a,u){var f,x,h,S,v,_,y,g=o&&o.__k||ot,b=n.length;for(p=Ir(r,n,g,p,b),f=0;f<b;f++)(h=r.__k[f])!=null&&(x=h.__i!=-1&&g[h.__i]||rt,h.__i=f,_=Wt(e,h,x,i,l,s,d,p,a,u),S=h.__e,h.ref&&x.ref!=h.ref&&(x.ref&&At(x.ref,null,h),u.push(h.ref,h.__c||S,h)),v==null&&S!=null&&(v=S),(y=!!(4&h.__u))||x.__k===h.__k?p=Xn(h,p,e,y):typeof h.type=="function"&&_!==void 0?p=_:S&&(p=S.nextSibling),h.__u&=-7);return r.__e=v,p}function Ir(e,n,r,o,i){var l,s,d,p,a,u=r.length,f=u,x=0;for(e.__k=new Array(i),l=0;l<i;l++)(s=n[l])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[l]=Ae(null,s,null,null,null):Ge(s)?s=e.__k[l]=Ae(ye,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[l]=Ae(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[l]=s,p=l+x,s.__=e,s.__b=e.__b+1,d=null,(a=s.__i=Pr(s,r,p,f))!=-1&&(f--,(d=r[a])&&(d.__u|=2)),d==null||d.__v==null?(a==-1&&(i>u?x--:i<u&&x++),typeof s.type!="function"&&(s.__u|=4)):a!=p&&(a==p-1?x--:a==p+1?x++:(a>p?x--:x++,s.__u|=4))):e.__k[l]=null;if(f)for(l=0;l<u;l++)(d=r[l])!=null&&(2&d.__u)==0&&(d.__e==o&&(o=Ie(d)),Qn(d,d));return o}function Xn(e,n,r,o){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,n=Xn(i[l],n,r,o));return n}e.__e!=n&&(o&&(n&&e.type&&!n.parentNode&&(n=Ie(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function Ct(e,n){return n=n||[],e==null||typeof e=="boolean"||(Ge(e)?e.some(function(r){Ct(r,n)}):n.push(e)),n}function Pr(e,n,r,o){var i,l,s,d=e.key,p=e.type,a=n[r],u=a!=null&&(2&a.__u)==0;if(a===null&&d==null||u&&d==a.key&&p==a.type)return r;if(o>(u?1:0)){for(i=r-1,l=r+1;i>=0||l<n.length;)if((a=n[s=i>=0?i--:l++])!=null&&(2&a.__u)==0&&d==a.key&&p==a.type)return s}return-1}function Vt(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||Dr.test(n)?r:r+"px"}function Ve(e,n,r,o,i){var l,s;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(n in o)r&&n in r||Vt(e.style,n,"");if(r)for(n in r)o&&r[n]==o[n]||Vt(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(qn,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+l]=r,r?o?r.u=o.u:(r.u=It,e.addEventListener(n,l?zt:$t,l)):e.removeEventListener(n,l?zt:$t,l);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Kt(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=It++;else if(n.t<r.u)return;return r(Y.event?Y.event(n):n)}}}function Wt(e,n,r,o,i,l,s,d,p,a){var u,f,x,h,S,v,_,y,g,b,m,$,I,P,D,w=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(p=!!(32&r.__u),l=[d=n.__e=r.__e]),(u=Y.__b)&&u(n);e:if(typeof w=="function")try{if(y=n.props,g="prototype"in w&&w.prototype.render,b=(u=w.contextType)&&o[u.__c],m=u?b?b.props.value:u.__:o,r.__c?_=(f=n.__c=r.__c).__=f.__E:(g?n.__c=f=new w(y,m):(n.__c=f=new Ne(y,m),f.constructor=w,f.render=Ar),b&&b.sub(f),f.state||(f.state={}),f.__n=o,x=f.__d=!0,f.__h=[],f._sb=[]),g&&f.__s==null&&(f.__s=f.state),g&&w.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=xe({},f.__s)),xe(f.__s,w.getDerivedStateFromProps(y,f.__s))),h=f.props,S=f.state,f.__v=n,x)g&&w.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),g&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(g&&w.getDerivedStateFromProps==null&&y!==h&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,m),n.__v==r.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,m)===!1){n.__v!=r.__v&&(f.props=y,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(L){L&&(L.__=n)}),ot.push.apply(f.__h,f._sb),f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,m),g&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(h,S,v)})}if(f.context=m,f.props=y,f.__P=e,f.__e=!1,$=Y.__r,I=0,g)f.state=f.__s,f.__d=!1,$&&$(n),u=f.render(f.props,f.state,f.context),ot.push.apply(f.__h,f._sb),f._sb=[];else do f.__d=!1,$&&$(n),u=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++I<25);f.state=f.__s,f.getChildContext!=null&&(o=xe(xe({},o),f.getChildContext())),g&&!x&&f.getSnapshotBeforeUpdate!=null&&(v=f.getSnapshotBeforeUpdate(h,S)),P=u!=null&&u.type===ye&&u.key==null?Zn(u.props.children):u,d=Yn(e,Ge(P)?P:[P],n,r,o,i,l,s,d,p,a),f.base=n.__e,n.__u&=-161,f.__h.length&&s.push(f),_&&(f.__E=f.__=null)}catch(L){if(n.__v=null,p||l!=null)if(L.then){for(n.__u|=p?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;l[l.indexOf(d)]=null,n.__e=d}else{for(D=l.length;D--;)Pt(l[D]);Tt(n)}else n.__e=r.__e,n.__k=r.__k,L.then||Tt(n);Y.__e(L,n,r)}else l==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):d=n.__e=Wr(r.__e,n,r,o,i,l,s,p,a);return(u=Y.diffed)&&u(n),128&n.__u?void 0:d}function Tt(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Tt))}function Jn(e,n,r){for(var o=0;o<r.length;o++)At(r[o],r[++o],r[++o]);Y.__c&&Y.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(l){l.call(i)})}catch(l){Y.__e(l,i.__v)}})}function Zn(e){return typeof e!="object"||e==null||e.__b>0?e:Ge(e)?e.map(Zn):xe({},e)}function Wr(e,n,r,o,i,l,s,d,p){var a,u,f,x,h,S,v,_=r.props||rt,y=n.props,g=n.type;if(g=="svg"?i="http://www.w3.org/2000/svg":g=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(a=0;a<l.length;a++)if((h=l[a])&&"setAttribute"in h==!!g&&(g?h.localName==g:h.nodeType==3)){e=h,l[a]=null;break}}if(e==null){if(g==null)return document.createTextNode(y);e=document.createElementNS(i,g,y.is&&y),d&&(Y.__m&&Y.__m(n,l),d=!1),l=null}if(g==null)_===y||d&&e.data==y||(e.data=y);else{if(l=l&&Ue.call(e.childNodes),!d&&l!=null)for(_={},a=0;a<e.attributes.length;a++)_[(h=e.attributes[a]).name]=h.value;for(a in _)h=_[a],a=="dangerouslySetInnerHTML"?f=h:a=="children"||a in y||a=="value"&&"defaultValue"in y||a=="checked"&&"defaultChecked"in y||Ve(e,a,null,h,i);for(a in y)h=y[a],a=="children"?x=h:a=="dangerouslySetInnerHTML"?u=h:a=="value"?S=h:a=="checked"?v=h:d&&typeof h!="function"||_[a]===h||Ve(e,a,h,_[a],i);if(u)d||f&&(u.__html==f.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),n.__k=[];else if(f&&(e.innerHTML=""),Yn(n.type=="template"?e.content:e,Ge(x)?x:[x],n,r,o,g=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,s,l?l[0]:r.__k&&Ie(r,0),d,p),l!=null)for(a=l.length;a--;)Pt(l[a]);d||(a="value",g=="progress"&&S==null?e.removeAttribute("value"):S!=null&&(S!==e[a]||g=="progress"&&!S||g=="option"&&S!=_[a])&&Ve(e,a,S,_[a],i),a="checked",v!=null&&v!=e[a]&&Ve(e,a,v,_[a],i))}return e}function At(e,n,r){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&n==null||(e.__u=e(n))}else e.current=n}catch(i){Y.__e(i,r)}}function Qn(e,n,r){var o,i;if(Y.unmount&&Y.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||At(o,null,n)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(l){Y.__e(l,n)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Qn(o[i],n,r||typeof e.type!="function");r||Pt(e.__e),e.__c=e.__=e.__e=void 0}function Ar(e,n,r){return this.constructor(e,r)}function Nr(e,n,r){var o,i,l,s;n==document&&(n=document.documentElement),Y.__&&Y.__(e,n),i=(o=!1)?null:n.__k,l=[],s=[],Wt(n,e=n.__k=Vn(ye,null,[e]),i||rt,rt,n.namespaceURI,i?null:n.firstChild?Ue.call(n.childNodes):null,l,i?i.__e:n.firstChild,o,s),Jn(l,e,s)}function Mr(e,n,r){var o,i,l,s,d=xe({},e.props);for(l in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)l=="key"?o=n[l]:l=="ref"?i=n[l]:d[l]=n[l]===void 0&&s!=null?s[l]:n[l];return arguments.length>2&&(d.children=arguments.length>3?Ue.call(arguments,2):r),Ae(e.type,d,o||e.key,i||e.ref,null)}function Or(e){function n(r){var o,i;return this.getChildContext||(o=new Set,(i={})[n.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(l){this.props.value!=l.value&&o.forEach(function(s){s.__e=!0,Rt(s)})},this.sub=function(l){o.add(l);var s=l.componentWillUnmount;l.componentWillUnmount=function(){o&&o.delete(l),s&&s.call(l)}}),r.children}return n.__c="__cC"+jn++,n.__=e,n.Provider=n.__l=(n.Consumer=function(r,o){return r.children(o)}).contextType=n,n}Ue=ot.slice,Y={__e:function(e,n,r,o){for(var i,l,s;n=n.__;)if((i=n.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),s=i.__d),s)return i.__E=i}catch(d){e=d}throw e}},Hn=0,Ne.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=xe({},this.state),typeof e=="function"&&(e=e(xe({},r),this.props)),e&&xe(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Rt(this))},Ne.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Rt(this))},Ne.prototype.render=ye,Ce=[],Un=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Gn=function(e,n){return e.__v.__b-n.__v.__b},it.__r=0,qn=/(PointerCapture)$|Capture$/i,It=0,$t=Kt(!1),zt=Kt(!0),jn=0;var Fr=0;function t(e,n,r,o,i,l){n||(n={});var s,d,p=n;if("ref"in p)for(d in p={},n)d=="ref"?s=n[d]:p[d]=n[d];var a={type:e,props:p,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Fr,__i:-1,__u:0,__source:i,__self:l};if(typeof e=="function"&&(s=e.defaultProps))for(d in s)p[d]===void 0&&(p[d]=s[d]);return Y.vnode&&Y.vnode(a),a}var Fe,te,pt,Yt,lt=0,er=[],oe=Y,Xt=oe.__b,Jt=oe.__r,Zt=oe.diffed,Qt=oe.__c,en=oe.unmount,tn=oe.__;function Nt(e,n){oe.__h&&oe.__h(te,e,lt||n),lt=0;var r=te.__H||(te.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function c(e){return lt=1,Hr(nr,e)}function Hr(e,n,r){var o=Nt(Fe++,2);if(o.t=e,!o.__c&&(o.__=[nr(void 0,n),function(d){var p=o.__N?o.__N[0]:o.__[0],a=o.t(p,d);p!==a&&(o.__N=[a,o.__[1]],o.__c.setState({}))}],o.__c=te,!te.__f)){var i=function(d,p,a){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(x){return x.__c});if(u.every(function(x){return!x.__N}))return!l||l.call(this,d,p,a);var f=o.__c.props!==d;return u.some(function(x){if(x.__N){var h=x.__[0];x.__=x.__N,x.__N=void 0,h!==x.__[0]&&(f=!0)}}),l&&l.call(this,d,p,a)||f};te.__f=!0;var l=te.shouldComponentUpdate,s=te.componentWillUpdate;te.componentWillUpdate=function(d,p,a){if(this.__e){var u=l;l=void 0,i(d,p,a),l=u}s&&s.call(this,d,p,a)},te.shouldComponentUpdate=i}return o.__N||o.__}function U(e,n){var r=Nt(Fe++,3);!oe.__s&&tr(r.__H,n)&&(r.__=e,r.u=n,te.__H.__h.push(r))}function Me(e){return lt=5,ue(function(){return{current:e}},[])}function ue(e,n){var r=Nt(Fe++,7);return tr(r.__H,n)&&(r.__=e(),r.__H=n,r.__h=e),r.__}function Ur(){for(var e;e=er.shift();){var n=e.__H;if(e.__P&&n)try{n.__h.some(et),n.__h.some(Bt),n.__h=[]}catch(r){n.__h=[],oe.__e(r,e.__v)}}}oe.__b=function(e){te=null,Xt&&Xt(e)},oe.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),tn&&tn(e,n)},oe.__r=function(e){Jt&&Jt(e),Fe=0;var n=(te=e.__c).__H;n&&(pt===te?(n.__h=[],te.__h=[],n.__.some(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.some(et),n.__h.some(Bt),n.__h=[],Fe=0)),pt=te},oe.diffed=function(e){Zt&&Zt(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(er.push(n)!==1&&Yt===oe.requestAnimationFrame||((Yt=oe.requestAnimationFrame)||Gr)(Ur)),n.__H.__.some(function(r){r.u&&(r.__H=r.u),r.u=void 0})),pt=te=null},oe.__c=function(e,n){n.some(function(r){try{r.__h.some(et),r.__h=r.__h.filter(function(o){return!o.__||Bt(o)})}catch(o){n.some(function(i){i.__h&&(i.__h=[])}),n=[],oe.__e(o,r.__v)}}),Qt&&Qt(e,n)},oe.unmount=function(e){en&&en(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.some(function(o){try{et(o)}catch(i){n=i}}),r.__H=void 0,n&&oe.__e(n,r.__v))};var nn=typeof requestAnimationFrame=="function";function Gr(e){var n,r=function(){clearTimeout(o),nn&&cancelAnimationFrame(n),setTimeout(e)},o=setTimeout(r,35);nn&&(n=requestAnimationFrame(r))}function et(e){var n=te,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),te=n}function Bt(e){var n=te;e.__c=e.__(),te=n}function tr(e,n){return!e||e.length!==n.length||n.some(function(r,o){return r!==e[o]})}function nr(e,n){return typeof n=="function"?n(e):n}var qr={};function Ke(e,n){for(var r in n)e[r]=n[r];return e}function jr(e,n,r){var o,i=/(?:\?([^#]*))?(#.*)?$/,l=e.match(i),s={};if(l&&l[1])for(var d=l[1].split("&"),p=0;p<d.length;p++){var a=d[p].split("=");s[decodeURIComponent(a[0])]=decodeURIComponent(a.slice(1).join("="))}e=Et(e.replace(i,"")),n=Et(n||"");for(var u=Math.max(e.length,n.length),f=0;f<u;f++)if(n[f]&&n[f].charAt(0)===":"){var x=n[f].replace(/(^:|[+*?]+$)/g,""),h=(n[f].match(/[+*?]+$/)||qr)[0]||"",S=~h.indexOf("+"),v=~h.indexOf("*"),_=e[f]||"";if(!_&&!v&&(h.indexOf("?")<0||S)){o=!1;break}if(s[x]=decodeURIComponent(_),S||v){s[x]=e.slice(f).map(decodeURIComponent).join("/");break}}else if(n[f]!==e[f]){o=!1;break}return(r.default===!0||o!==!1)&&s}function Vr(e,n){return e.rank<n.rank?1:e.rank>n.rank?-1:e.index-n.index}function Kr(e,n){return e.index=n,e.rank=(function(r){return r.props.default?0:Et(r.props.path).map(Yr).join("")})(e),e.props}function Et(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Yr(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Xr={},Ee=[],rn=[],fe=null,rr={url:Mt()},Jr=Or(rr);function Mt(){var e;return""+((e=fe&&fe.location?fe.location:fe&&fe.getCurrentLocation?fe.getCurrentLocation():typeof location<"u"?location:Xr).pathname||"")+(e.search||"")}function Zr(e,n){return n===void 0&&(n=!1),typeof e!="string"&&e.url&&(n=e.replace,e=e.url),(function(r){for(var o=Ee.length;o--;)if(Ee[o].canRoute(r))return!0;return!1})(e)&&(function(r,o){o===void 0&&(o="push"),fe&&fe[o]?fe[o](r):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,r)})(e,n?"replace":"push"),or(e)}function or(e){for(var n=!1,r=0;r<Ee.length;r++)Ee[r].routeTo(e)&&(n=!0);return n}function Qr(e){if(e&&e.getAttribute){var n=e.getAttribute("href"),r=e.getAttribute("target");if(n&&n.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return Zr(n)}}function eo(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function to(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var n=e.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(Qr(n))return eo(e)}while(n=n.parentNode)}}var on=!1;function ir(e){e.history&&(fe=e.history),this.state={url:e.url||Mt()}}Ke(ir.prototype=new Ne,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var n=Ct(this.props.children);return this.g(n,e)!==void 0},routeTo:function(e){this.setState({url:e});var n=this.canRoute(e);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;on||(on=!0,fe||addEventListener("popstate",function(){or(Mt())}),addEventListener("click",to)),Ee.push(this),fe&&(this.u=fe.listen(function(n){var r=n.location||n;e.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),Ee.splice(Ee.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,n){e=e.filter(Kr).sort(Vr);for(var r=0;r<e.length;r++){var o=e[r],i=jr(n,o.props.path,o.props);if(i)return[o,i]}},render:function(e,n){var r,o,i=e.onChange,l=n.url,s=this.c,d=this.g(Ct(e.children),l);if(d&&(o=Mr(d[0],Ke(Ke({url:l,matches:r=d[1]},r),{key:void 0,ref:void 0}))),l!==(s&&s.url)){Ke(rr,s=this.c={url:l,previous:s&&s.url,current:o,path:o?o.props.path:null,matches:r}),s.router=this,s.active=o?[o]:[];for(var p=rn.length;p--;)rn[p]({});typeof i=="function"&&i(s)}return Vn(Jr.Provider,{value:s},o)}});const lr="/api/v1";let Pe=localStorage.getItem("gothub_token"),st=!1;function De(e){Pe=e,e?localStorage.setItem("gothub_token",e):localStorage.removeItem("gothub_token")}function ge(){return Pe}function no(e){return e.startsWith("/auth/")}function sr(){if(typeof window>"u")return"/login";const e=`${window.location.pathname}${window.location.search}${window.location.hash}`,n=window.location.pathname.startsWith("/login")?"/":e||"/",r=new URLSearchParams({session:"expired"});return n!=="/login"&&r.set("returnTo",n),`/login?${r.toString()}`}async function T(e,n,r){const o={"Content-Type":"application/json"};Pe&&(o.Authorization=`Bearer ${Pe}`);const i=await fetch(`${lr}${n}`,{method:e,headers:o,body:r?JSON.stringify(r):void 0});if(i.status===401&&!no(n))throw De(null),typeof window<"u"&&!st&&!window.location.pathname.startsWith("/login")&&(st=!0,window.location.assign(sr())),new Error("authentication required");if(!i.ok){const l=await i.json().catch(()=>({error:i.statusText}));throw new Error(l.error||i.statusText)}if(i.status!==204)return i.json()}const dr=(e,n)=>T("POST","/auth/register",{username:e,email:n}),ro=e=>T("POST","/auth/magic/request",{email:e}),oo=e=>T("POST","/auth/magic/verify",{token:e}),io=()=>T("POST","/auth/webauthn/register/begin"),lo=(e,n)=>T("POST","/auth/webauthn/register/finish",{session_id:e,credential:n}),ar=e=>T("POST","/auth/webauthn/login/begin",{username:e}),cr=(e,n)=>T("POST","/auth/webauthn/login/finish",{session_id:e,credential:n}),pr=()=>T("GET","/auth/capabilities"),so=e=>T("POST","/interest-signups",e),ao=()=>T("GET","/user"),co=(e,n,r)=>{const o=new URLSearchParams;e&&o.set("unread","true");const i=o.toString();return T("GET",`/notifications${i?"?"+i:""}`)},po=()=>T("GET","/notifications/unread-count"),fo=e=>T("POST",`/notifications/${e}/read`),uo=()=>T("POST","/notifications/read-all"),ho=(e=1,n=10,r="updated")=>T("GET",`/explore/repos?page=${e}&per_page=${n}&sort=${r}`),go=(e,n,r)=>T("POST","/repos",{name:e,description:n,private:r}),mo=(e,n,r)=>T("POST",`/repos/${e}/${n}/forks`,r?{name:r}:void 0),xo=(e,n,r,o)=>{const l=new URLSearchParams().toString();return T("GET",`/repos/${e}/${n}/forks${l?"?"+l:""}`)},bo=(e,n)=>T("GET",`/repos/${e}/${n}/runners/tokens`),yo=(e,n,r)=>T("POST",`/repos/${e}/${n}/runners/tokens`,r),_o=(e,n,r)=>T("DELETE",`/repos/${e}/${n}/runners/tokens/${r}`),He=(e,n)=>T("GET",`/repos/${e}/${n}`),ln=()=>T("GET","/user/repos"),sn=()=>T("GET","/user/repo-policy"),vo=(e,n)=>T("GET",`/repos/${e}/${n}/stars`),So=(e,n)=>T("PUT",`/repos/${e}/${n}/star`),ko=(e,n)=>T("DELETE",`/repos/${e}/${n}/star`),Ot=(e,n,r,o)=>T("GET",`/repos/${e}/${n}/tree/${r}${o?"/"+o:""}`),fr=(e,n)=>T("GET",`/repos/${e}/${n}/branches`),wo=(e,n,r,o)=>T("GET",`/repos/${e}/${n}/blob/${r}/${o}`),$o=(e,n,r)=>T("GET",`/repos/${e}/${n}/commits/${r}`),ur=(e,n,r)=>T("GET",`/repos/${e}/${n}/index/status?ref=${encodeURIComponent(r)}`),zo=(e,n,r,o)=>T("GET",`/repos/${e}/${n}/entities/${r}/${o}`),Ro=(e,n,r,o,i,l)=>{const s=new URLSearchParams({key:o});return i&&s.set("path",i),s.set("limit",String(l)),T("GET",`/repos/${e}/${n}/entity-blame/${r}?${s.toString()}`)},Co=(e,n,r)=>T("GET",`/repos/${e}/${n}/diff/${r}`),To=(e,n,r)=>T("POST",`/repos/${e}/${n}/pulls`,r),Dt=(e,n,r,o,i)=>{const l=new URLSearchParams;r&&l.set("state",r),o&&o>0&&l.set("page",String(o)),i&&i>0&&l.set("per_page",String(i));const s=l.toString();return T("GET",`/repos/${e}/${n}/pulls${s?"?"+s:""}`)},ft=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}`),Bo=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/diff`),Eo=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/merge-preview`),ut=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/merge-gate`),Do=(e,n,r)=>T("POST",`/repos/${e}/${n}/pulls/${r}/merge`),Lo=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/comments`),Io=(e,n,r,o)=>T("POST",`/repos/${e}/${n}/pulls/${r}/comments`,o),Po=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/reviews`),Wo=(e,n,r,o)=>T("POST",`/repos/${e}/${n}/pulls/${r}/reviews`,o),dn=(e,n,r)=>T("GET",`/repos/${e}/${n}/pulls/${r}/checks`),Ao=(e,n,r)=>T("GET",`/repos/${e}/${n}/branch-protection/${r}`),No=(e,n,r,o)=>T("PUT",`/repos/${e}/${n}/branch-protection/${r}`,o),Mo=(e,n,r)=>T("DELETE",`/repos/${e}/${n}/branch-protection/${r}`),Oo=(e,n,r)=>T("POST",`/repos/${e}/${n}/webhooks`,r),Fo=(e,n)=>T("GET",`/repos/${e}/${n}/webhooks`),Ho=(e,n,r)=>T("DELETE",`/repos/${e}/${n}/webhooks/${r}`),an=(e,n,r)=>T("GET",`/repos/${e}/${n}/webhooks/${r}/deliveries`),Uo=(e,n,r)=>T("POST",`/repos/${e}/${n}/webhooks/${r}/ping`),Go=(e,n,r,o)=>T("POST",`/repos/${e}/${n}/webhooks/${r}/deliveries/${o}/redeliver`),qo=()=>T("GET","/user/ssh-keys"),jo=(e,n)=>T("POST","/user/ssh-keys",{name:e,public_key:n}),Vo=e=>T("DELETE",`/user/ssh-keys/${e}`),Ko=(e,n)=>T("GET",`/repos/${e}/${n}/collaborators`),Yo=(e,n,r,o)=>T("POST",`/repos/${e}/${n}/collaborators`,{username:r,role:o}),Xo=(e,n,r)=>T("DELETE",`/repos/${e}/${n}/collaborators/${r}`),Jo=(e,n)=>T("DELETE",`/repos/${e}/${n}`),Zo=(e,n)=>T("POST","/orgs",{name:e,display_name:n}),Qo=e=>T("GET",`/orgs/${e}`),ei=e=>T("DELETE",`/orgs/${e}`),cn=e=>T("GET",`/orgs/${e}/members`),ti=(e,n,r)=>T("POST",`/orgs/${e}/members`,{username:n,role:r}),ni=(e,n)=>T("DELETE",`/orgs/${e}/members/${n}`),ri=e=>T("GET",`/orgs/${e}/repos`),oi=()=>T("GET","/user/orgs"),Ft=(e,n,r,o)=>{const i=new URLSearchParams;o&&i.set("q",o);const l=i.toString();return T("GET",`/repos/${e}/${n}/symbols/${r}${l?"?"+l:""}`)},hr=(e,n,r,o)=>T("GET",`/repos/${e}/${n}/references/${r}?name=${encodeURIComponent(o)}`),ii=(e,n,r,o,i,l)=>{const s=new URLSearchParams({symbol:o});return i&&s.set("depth",String(i)),l&&s.set("reverse","true"),T("GET",`/repos/${e}/${n}/callgraph/${r}?${s.toString()}`)},gr=(e,n,r,o)=>{const i=new URLSearchParams;return o.stableId&&i.set("stable_id",o.stableId),o.name&&i.set("name",o.name),o.bodyHash&&i.set("body_hash",o.bodyHash),o.limit&&o.limit>0&&i.set("limit",String(o.limit)),T("GET",`/repos/${e}/${n}/entity-history/${r}?${i.toString()}`)},li=(e,n,r)=>T("GET",`/repos/${e}/${n}/semver/${r}`),si=(e,n,r)=>T("POST",`/repos/${e}/${n}/issues`,r),di=(e,n,r,o,i)=>{const l=new URLSearchParams;r&&l.set("state",r),o&&o>0&&l.set("page",String(o)),l.set("per_page",String(i));const s=l.toString();return T("GET",`/repos/${e}/${n}/issues${s?"?"+s:""}`)},ai=(e,n,r)=>T("GET",`/repos/${e}/${n}/issues/${r}`),ci=(e,n,r,o)=>T("PATCH",`/repos/${e}/${n}/issues/${r}`,o),pi=(e,n,r,o)=>T("POST",`/repos/${e}/${n}/issues/${r}/comments`,o),fi=(e,n,r)=>T("GET",`/repos/${e}/${n}/issues/${r}/comments`);function ui(e,n,r){const o=new AbortController,i=`/repos/${e}/${n}/events`,l={Accept:"text/event-stream"};Pe&&(l.Authorization=`Bearer ${Pe}`);const s=p=>{var a;o.signal.aborted||(a=r.onError)==null||a.call(r,p)},d=(p,a)=>{if(a.length===0)return;const u=a.join(`
`);try{const f=JSON.parse(u),x=p||f.type||"message";r.onEvent({...f,type:x})}catch{s(new Error("failed to parse repository event stream payload"))}};return(async()=>{var p;try{const a=await fetch(`${lr}${i}`,{method:"GET",headers:l,signal:o.signal});if(a.status===401)throw De(null),typeof window<"u"&&!st&&!window.location.pathname.startsWith("/login")&&(st=!0,window.location.assign(sr())),new Error("authentication required");if(!a.ok){let v=a.statusText;try{const _=await a.json();_!=null&&_.error&&(v=_.error)}catch{}throw new Error(v||"failed to open event stream")}if(!a.body)throw new Error("event stream body missing");(p=r.onOpen)==null||p.call(r);const u=new TextDecoder,f=a.body.getReader();let x="",h="",S=[];for(;!o.signal.aborted;){const{value:v,done:_}=await f.read();if(_)break;for(x+=u.decode(v,{stream:!0});;){const y=x.indexOf(`
`);if(y<0)break;let g=x.slice(0,y);if(x=x.slice(y+1),g.endsWith("\r")&&(g=g.slice(0,-1)),g===""){d(h,S),h="",S=[];continue}if(!g.startsWith(":")){if(g.startsWith("event:")){h=g.slice(6).trim();continue}g.startsWith("data:")&&S.push(g.slice(5).trimStart())}}}}catch(a){if(o.signal.aborted)return;s(a instanceof Error?a:new Error((a==null?void 0:a.message)||"event stream failed"))}})(),{close:()=>o.abort()}}const pn={color:"#c9d1d9",fontSize:"14px",textDecoration:"none"};function hi(){const e=!!ge(),[n,r]=c(0),[o,i]=c("");return U(()=>{if(!e){r(0),i("");return}po().then(l=>{r(l.count),i("")}).catch(l=>{r(0),i((l==null?void 0:l.message)||"Unable to load unread notification count")})},[e]),t("header",{style:{background:"#161b22",borderBottom:"1px solid #30363d",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("a",{href:"/",style:{fontSize:"20px",fontWeight:"bold",color:"#f0f6fc"},children:"gothub"}),t("nav",{style:{display:"flex",gap:"16px",alignItems:"center"},children:e?t(ye,{children:[t("a",{href:"/notifications",style:pn,children:["Notifications",n>0&&t("span",{style:{background:"#1f6feb",color:"#fff",borderRadius:"10px",padding:"1px 6px",fontSize:"11px",marginLeft:"4px"},children:n})]}),o&&t("span",{title:o,style:{color:"#d29922",fontSize:"12px"},children:"Notification count unavailable"}),t("a",{href:"/settings",style:pn,children:"Settings"}),t("button",{onClick:()=>{De(null),location.reload()},style:{background:"none",border:"1px solid #30363d",color:"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:"pointer"},children:"Sign out"})]}):t("a",{href:"/login",style:{color:"#c9d1d9"},children:"Sign in"})})]})}function gi(e){const n=e.replace(/-/g,"+").replace(/_/g,"/"),r=n.length%4,o=r===0?n:n+"=".repeat(4-r),i=atob(o),l=new Uint8Array(i.length);for(let s=0;s<i.length;s++)l[s]=i.charCodeAt(s);return l}function we(e){const n=new Uint8Array(e);let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function Oe(e){if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(typeof e=="string")return gi(e);throw new Error("invalid binary value in WebAuthn options")}function Ht(){return typeof window<"u"&&typeof window.PublicKeyCredential<"u"}function mi(e){var r;const n={...(e==null?void 0:e.publicKey)??e};return n.challenge=Oe(n.challenge),((r=n.user)==null?void 0:r.id)!==void 0&&(n.user={...n.user,id:Oe(n.user.id)}),Array.isArray(n.excludeCredentials)&&(n.excludeCredentials=n.excludeCredentials.map(o=>({...o,id:Oe(o.id)}))),n}function xi(e){const n={...(e==null?void 0:e.publicKey)??e};return n.challenge=Oe(n.challenge),Array.isArray(n.allowCredentials)&&(n.allowCredentials=n.allowCredentials.map(r=>({...r,id:Oe(r.id)}))),n}async function bi(e){var o;const n=await navigator.credentials.create({publicKey:mi(e)});if(!n)throw new Error("passkey creation was cancelled");const r=n.response;return{id:n.id,rawId:we(n.rawId),type:n.type,authenticatorAttachment:n.authenticatorAttachment,response:{clientDataJSON:we(r.clientDataJSON),attestationObject:we(r.attestationObject)},clientExtensionResults:((o=n.getClientExtensionResults)==null?void 0:o.call(n))||{}}}async function mr(e){var o;const n=await navigator.credentials.get({publicKey:xi(e)});if(!n)throw new Error("passkey sign-in was cancelled");const r=n.response;return{id:n.id,rawId:we(n.rawId),type:n.type,authenticatorAttachment:n.authenticatorAttachment,response:{clientDataJSON:we(r.clientDataJSON),authenticatorData:we(r.authenticatorData),signature:we(r.signature),userHandle:r.userHandle?we(r.userHandle):null},clientExtensionResults:((o=n.getClientExtensionResults)==null?void 0:o.call(n))||{}}}function yi(){return t("div",{children:[t(_i,{}),t(ki,{}),t(wi,{}),t($i,{})]})}function _i(){return t("section",{style:{display:"flex",gap:"48px",alignItems:"flex-start",flexWrap:"wrap",padding:"48px 0 32px"},children:[t("div",{style:{flex:"1 1 400px",minWidth:"300px"},children:[t("h1",{style:{fontSize:"64px",fontWeight:900,color:"#f0f6fc",lineHeight:1.05,margin:"0 0 28px"},children:"GOT HUB?"}),t("div",{style:{color:"#8b949e",fontSize:"18px",lineHeight:1.7,marginBottom:"24px"},children:[t("p",{style:{margin:"0 0 4px"},children:"Your code's conflicted."}),t("p",{style:{margin:"0 0 4px"},children:"Your merges are lying."}),t("p",{style:{margin:"0 0 16px"},children:"Your diffs are screaming."})]}),t("div",{style:{marginBottom:"24px"},children:[t("span",{style:{fontSize:"22px",fontWeight:700,color:"#58a6ff"},children:"GotHub.dev"}),t("div",{style:{width:"48px",height:"3px",background:"#1f6feb",borderRadius:"2px",margin:"6px 0 16px"}})]}),t("ul",{style:{listStyle:"none",padding:0,margin:"0 0 20px",color:"#c9d1d9",fontSize:"15px",lineHeight:1.8},children:[t("li",{children:"Merges functions, not lines."}),t("li",{children:`Imports don't "conflict." They combine.`}),t("li",{children:"Refactors don't look like chaos."}),t("li",{children:"Your repo, but with a spine."})]}),t("p",{style:{color:"#8b949e",fontSize:"14px",margin:"0 0 20px",maxWidth:"480px"},children:"A GotHub repo parses code as real structures — functions, types, imports — so changes actually make sense."}),t("p",{style:{fontSize:"18px",fontWeight:700,color:"#f0f6fc",margin:0},children:"GotHub. Got VCS?"})]}),t("div",{style:{flex:"0 0 340px",minWidth:"300px"},children:t(vi,{})})]})}function vi(){const[e,n]=c(""),[r,o]=c(""),[i,l]=c(""),[s,d]=c(!1),[p,a]=c(!0),[u,f]=c(""),x=Ht()&&p;U(()=>{pr().then(v=>a(!!v.passkey_enabled)).catch(()=>{})},[]);const h=async v=>{v.preventDefault(),l(""),d(!0);try{const _=await dr(e,r);De(_.token),window.location.assign("/")}catch(_){l(_.message)}finally{d(!1)}},S=async v=>{v.preventDefault(),l(""),d(!0);try{const _=await ar(u),y=await mr(_.options),g=await cr(_.session_id,y);De(g.token),window.location.assign("/")}catch(_){l(_.message||"Passkey sign-in failed")}finally{d(!1)}};return t("div",{style:{background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"24px"},children:[t("h2",{style:{fontSize:"18px",color:"#f0f6fc",margin:"0 0 16px"},children:"Create your account"}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px",padding:"10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:i}),t("form",{onSubmit:h,style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"14px"},children:[t("input",{value:e,onInput:v=>n(v.target.value),placeholder:"Username",style:tt}),t("input",{value:r,onInput:v=>o(v.target.value),placeholder:"Email",type:"email",style:tt}),t("button",{type:"submit",disabled:s||!e||!r,style:{...zi,opacity:s||!e||!r?.6:1},children:"Create account"})]}),t("div",{style:{borderTop:"1px solid #30363d",paddingTop:"12px"},children:t("form",{onSubmit:S,style:{display:"flex",gap:"8px"},children:[t("input",{value:u,onInput:v=>f(v.target.value),placeholder:"Username",style:{...tt,flex:1}}),t("button",{type:"submit",disabled:s||!u||!x,style:{...xr,opacity:s||!u||!x?.6:1,whiteSpace:"nowrap",width:"auto",padding:"10px 14px"},children:"Passkey sign-in"})]})}),t("p",{style:{color:"#8b949e",fontSize:"12px",margin:"12px 0 0",textAlign:"center"},children:["Already have an account? ",t("a",{href:"/login",style:{color:"#58a6ff"},children:"Sign in"})]})]})}const Si=[{title:"Structural Blame",desc:"Attribution at the function level, not line-by-line. See who wrote each entity and when it last changed."},{title:"Call Graphs",desc:"Explore caller/callee relationships across your codebase. Understand impact before you merge."},{title:"Entity-Aware PRs",desc:"PR diffs that show which functions were added, modified, or removed — not just which lines changed."},{title:"SemVer Impact",desc:"Automatic semantic versioning recommendations based on structural changes to your public API."}];function ki(){return t("section",{style:{padding:"32px 0"},children:[t("h2",{style:{fontSize:"28px",fontWeight:700,color:"#f0f6fc",marginBottom:"20px"},children:"What makes GotHub different"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"16px"},children:Si.map(e=>t("div",{style:{background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"20px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:700,color:"#f0f6fc",margin:"0 0 8px"},children:e.title}),t("p",{style:{fontSize:"14px",color:"#8b949e",margin:0,lineHeight:1.5},children:e.desc})]},e.title))})]})}function wi(){const[e,n]=c([]),[r,o]=c(!0);return U(()=>{ho(1,6,"created").then(n).catch(()=>{}).finally(()=>o(!1))},[]),r?t("section",{style:{padding:"32px 0",color:"#8b949e"},children:"Loading repositories..."}):e.length===0?null:t("section",{style:{padding:"32px 0"},children:[t("h2",{style:{fontSize:"28px",fontWeight:700,color:"#f0f6fc",marginBottom:"20px"},children:"Explore public repos"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"12px"},children:e.map(i=>t("a",{href:`/${i.owner_name}/${i.name}`,style:{display:"block",background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"16px",textDecoration:"none",color:"inherit"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[t("span",{style:{fontSize:"15px",fontWeight:600,color:"#58a6ff"},children:[i.owner_name,"/",i.name]}),i.star_count>0&&t("span",{style:{fontSize:"12px",color:"#8b949e"},children:[i.star_count," stars"]})]}),i.description&&t("p",{style:{fontSize:"13px",color:"#8b949e",margin:0,lineHeight:1.4},children:i.description})]},i.id))})]})}function $i(){const[e,n]=c(""),[r,o]=c(!1),[i,l]=c("");return t("section",{style:{padding:"48px 0",textAlign:"center",borderTop:"1px solid #21262d"},children:[t("h2",{style:{fontSize:"24px",fontWeight:700,color:"#f0f6fc",marginBottom:"12px"},children:"Ready to try entity-aware version control?"}),t("a",{href:"/signup",style:{display:"inline-block",background:"#238636",color:"#fff",padding:"12px 32px",borderRadius:"6px",fontWeight:"bold",fontSize:"16px",textDecoration:"none",marginBottom:"32px"},children:"Get started"}),t("div",{style:{maxWidth:"400px",margin:"0 auto"},children:[r?t("p",{style:{color:"#3fb950",fontSize:"14px"},children:"Thanks! We'll keep you posted."}):t("form",{onSubmit:async d=>{d.preventDefault(),l("");try{await so({email:e,source:"landing_footer"}),o(!0)}catch(p){l(p.message)}},style:{display:"flex",gap:"8px"},children:[t("input",{value:e,onInput:d=>n(d.target.value),placeholder:"Email for updates",type:"email",style:{...tt,flex:1}}),t("button",{type:"submit",disabled:!e,style:{...xr,opacity:e?1:.6,whiteSpace:"nowrap",width:"auto",padding:"10px 16px"},children:"Join mailing list"})]}),i&&t("p",{style:{color:"#f85149",fontSize:"13px",marginTop:"8px"},children:i})]})]})}const tt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},zi={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"},xr={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"};function br(){return ge()?t(Ri,{}):t(yi,{})}function Ri(){const[e,n]=c([]),[r,o]=c(null),[i,l]=c(!1),[s,d]=c(""),[p,a]=c(""),[u,f]=c(!1),[x,h]=c(""),[S,v]=c(()=>!Ci()),[_,y]=c(null),[g,b]=c([]),[m,$]=c(0),[I,P]=c(!1),[D,w]=c(""),[L,E]=c(""),z=C=>{const M=C.trim();M&&E(Z=>Z?Z.includes(M)?Z:`${Z} • ${M}`:M)};U(()=>{(async()=>{try{const[M,Z]=await Promise.all([ln(),sn()]);n(M),o(Z),h("")}catch(M){h(M.message||"failed to load dashboard")}})()},[]);const N=async()=>{if(!I){v(!0),w(""),E(""),P(!0);try{const C=await Ti(e,z);if(!C){y(null),b([]),w("Create or fork a repository first, then run Try Demo again.");return}y(C),b(Bi(C)),$(0),fn()}catch(C){w(C.message||"failed to prepare onboarding demo")}finally{P(!1)}}},F=()=>{v(!1),fn()},X=async C=>{if(C.preventDefault(),h(""),u&&r&&!r.can_create_private){h(r.private_reason||"private repositories are not available for this account");return}if(!u&&r&&!r.can_create_public){h(r.public_reason||"public repositories are not available for this account");return}try{await go(s,p,u),l(!1),d(""),a("");const[M,Z]=await Promise.all([ln(),sn()]);n(M),o(Z),h("")}catch(M){h(M.message)}},G=i&&!!r&&(u?!r.can_create_private:!r.can_create_public);return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc"},children:"Your repositories"}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("button",{onClick:N,disabled:I,style:{background:"#1f6feb",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:I?"not-allowed":"pointer",fontWeight:"bold",opacity:I?.7:1},children:I?"Preparing demo...":"Try Demo"}),t("button",{onClick:()=>l(!i),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"New"})]})]}),x&&t("div",{style:{color:"#f85149",marginBottom:"12px",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:x}),S&&t("div",{style:{border:"1px solid #1f6feb",borderRadius:"8px",padding:"16px",marginBottom:"20px",background:"#111b2e"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px",flexWrap:"wrap"},children:[t("div",{children:[t("div",{style:{color:"#58a6ff",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"4px",fontWeight:"bold"},children:"First-run guide"}),t("h3",{style:{color:"#f0f6fc",margin:0,fontSize:"18px"},children:"Walk structural review in 4 steps"}),t("p",{style:{color:"#8b949e",margin:"8px 0 0",fontSize:"13px"},children:"Jump to PR impact, semver recommendations, call graph navigation, and structural blame with one curated flow."}),_&&t("p",{style:{color:"#8b949e",margin:"8px 0 0",fontSize:"12px"},children:["Using ",t("a",{href:`/${_.owner}/${_.repo}`,style:{color:"#58a6ff"},children:[_.owner,"/",_.repo]})," on ",t("code",{style:{background:"#0d1117",borderRadius:"4px",padding:"2px 4px"},children:_.ref})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("button",{onClick:N,disabled:I,style:{background:"#1f6feb",color:"#fff",border:"none",padding:"7px 14px",borderRadius:"6px",cursor:I?"not-allowed":"pointer",fontWeight:"bold",opacity:I?.7:1},children:I?"Loading...":g.length>0?"Refresh path":"Try Demo"}),t("button",{onClick:F,style:{background:"transparent",color:"#8b949e",border:"1px solid #30363d",padding:"7px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Close"})]})]}),D&&t("div",{style:{marginTop:"12px",color:"#f85149",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:D}),L&&t("div",{style:{marginTop:"12px",color:"#d29922",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:L}),g.length>0&&!I&&t("div",{style:{marginTop:"14px",display:"grid",gap:"10px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px"},children:["Step ",m+1," of ",g.length]}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",background:"#0d1117",padding:"12px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold",marginBottom:"6px"},children:g[m].title}),t("div",{style:{color:"#8b949e",fontSize:"13px",marginBottom:"10px"},children:g[m].description}),g[m].hint&&t("div",{style:{color:"#d29922",fontSize:"12px",marginBottom:"10px"},children:g[m].hint}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("a",{href:g[m].href,style:Ii,children:g[m].cta}),t("button",{onClick:()=>$(C=>Math.max(0,C-1)),disabled:m===0,style:{...un,opacity:m===0?.6:1},children:"Previous"}),t("button",{onClick:()=>$(C=>Math.min(g.length-1,C+1)),disabled:m>=g.length-1,style:{...un,opacity:m>=g.length-1?.6:1},children:"Next"})]})]}),t("div",{style:{display:"grid",gap:"6px"},children:g.map((C,M)=>t("button",{onClick:()=>$(M),style:{...Pi,borderColor:M===m?"#1f6feb":"#30363d",color:M===m?"#f0f6fc":"#8b949e",background:M===m?"#161b22":"#0d1117"},children:[M+1,". ",C.title]},C.title))})]})]}),i&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"20px"},children:t("form",{onSubmit:X,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:s,onInput:C=>d(C.target.value),placeholder:"Repository name",style:hn}),t("input",{value:p,onInput:C=>a(C.target.value),placeholder:"Description (optional)",style:hn}),r&&t("div",{style:{color:"#8b949e",fontSize:"12px",lineHeight:1.5},children:[r.max_public_repos>0&&t("div",{children:["Public repos: ",r.public_repo_count,"/",r.max_public_repos]}),r.max_private_repos>0&&t("div",{children:["Private repos: ",r.private_repo_count,"/",r.max_private_repos]}),!r.can_create_private&&r.private_reason&&t("div",{style:{color:"#d29922"},children:["Private: ",r.private_reason]}),!r.can_create_public&&r.public_reason&&t("div",{style:{color:"#d29922"},children:["Public: ",r.public_reason]})]}),t("label",{style:{color:"#c9d1d9",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[t("input",{type:"checkbox",checked:u,onChange:C=>f(C.target.checked),disabled:!!r&&!r.can_create_private}),"Private"]}),t("button",{type:"submit",disabled:G,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:G?"not-allowed":"pointer",fontWeight:"bold",alignSelf:"flex-start",opacity:G?.6:1},children:"Create repository"})]})}),e.length===0?t("div",{style:{color:"#8b949e",padding:"40px 0",textAlign:"center"},children:"No repositories yet"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:e.map((C,M)=>{const Z=_r(C),de=Z?`/${Z}/${C.name}`:`/${C.name}`;return t("div",{style:{display:"block",padding:"12px 16px",borderBottom:M===e.length-1?"none":"1px solid #21262d"},children:[t("div",{style:{marginBottom:"6px"},children:[t("a",{href:de,style:{color:"#58a6ff",fontWeight:"bold",textDecoration:"none"},children:[Z&&t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:[Z,"/"]}),C.name]}),C.is_private&&t("span",{style:{color:"#8b949e",fontWeight:"normal",marginLeft:"8px",fontSize:"11px",border:"1px solid #30363d",padding:"1px 6px",borderRadius:"12px"},children:"Private"})]}),C.description&&t("div",{style:{color:"#8b949e",fontWeight:"normal",fontSize:"13px"},children:C.description}),C.parent_owner&&C.parent_name&&t("div",{style:{color:"#8b949e",fontWeight:"normal",marginTop:"4px",fontSize:"13px"},children:["forked from"," ",t("a",{href:`/${C.parent_owner}/${C.parent_name}`,style:{color:"#58a6ff",textDecoration:"none"},children:[C.parent_owner,"/",C.parent_name]})]})]},C.id)})})]})}const yr="gothub_onboarding_demo_seen_v1";function Ci(){return typeof window>"u"?!1:window.localStorage.getItem(yr)==="1"}function fn(){typeof window>"u"||window.localStorage.setItem(yr,"1")}async function Ti(e,n){const r=e.map(a=>{const u=_r(a);return!u||!a.name?null:{owner:u,repo:a.name,defaultBranch:a.default_branch||""}}).filter(a=>a!==null);if(r.length===0)return null;const o=r.slice(0,6);let i=o[0],l=null;for(const a of o){const u=await Ei(a.owner,a.repo,n);if(u){i=a,l=u;break}}let s=i.defaultBranch||"main";if(!i.defaultBranch)try{const a=await He(i.owner,i.repo);a.default_branch&&(s=a.default_branch)}catch(a){n==null||n((a==null?void 0:a.message)||`Failed to resolve default branch for ${i.owner}/${i.repo}; using main.`),s="main"}const[d,p]=await Promise.all([Di(i.owner,i.repo,s,n),Li(i.owner,i.repo,s,n)]);return{owner:i.owner,repo:i.repo,ref:s,prNumber:l==null?void 0:l.number,filePath:d||void 0,symbol:p||void 0}}function Bi(e){const n=e.prNumber?`/${e.owner}/${e.repo}/pulls/${e.prNumber}`:`/${e.owner}/${e.repo}/pulls`,r=e.symbol?`Use symbol "${e.symbol}" for a quick graph.`:"Pick a function name from Symbols, then run it in Call Graph.",o=e.filePath?`/${e.owner}/${e.repo}/blob/${e.ref}/${e.filePath}`:`/${e.owner}/${e.repo}/tree/${e.ref}`,i=e.filePath?`Open ${e.filePath}. The Structural Blame panel auto-selects the first entity and shows attribution.`:"Open any source file and use the Structural Blame panel to inspect entity-level attribution.";return[{title:"PR Impact",description:e.prNumber?`Open PR #${e.prNumber}, switch to "Files changed", and inspect the PR Impact summary.`:'Open pull requests, pick one PR, and inspect the PR Impact summary in "Files changed".',href:n,cta:e.prNumber?`Open PR #${e.prNumber}`:"Open pull requests"},{title:"SemVer Recommendation",description:e.prNumber?'From that PR, switch to "Merge preview" to view structural SemVer recommendations.':'After opening a PR, switch to "Merge preview" to view structural SemVer recommendations.',href:n,cta:e.prNumber?"Open merge preview":"Open pull requests"},{title:"Call Graph",description:"Explore caller/callee relationships to quickly understand behavioral impact.",href:`/${e.owner}/${e.repo}/callgraph/${e.ref}`,cta:"Open call graph",hint:r},{title:"Structural Blame",description:i,href:o,cta:e.filePath?"Open blame-ready file":"Open repository files"}]}async function Ei(e,n,r){try{const o=await Dt(e,n,"open",1,10);return o.length>0?o[0]:(await Dt(e,n,void 0,1,10))[0]||null}catch(o){return r==null||r((o==null?void 0:o.message)||`Failed to inspect pull requests for ${e}/${n}.`),null}}async function Di(e,n,r,o){const i=[""];let l=0,s=!1;for(;i.length>0&&l<12;){const d=i.shift()||"";let p;try{p=await Ot(e,n,r,d||void 0)}catch(u){s||(s=!0,o==null||o((u==null?void 0:u.message)||`Failed to inspect files for ${e}/${n}; demo hints may be limited.`));continue}l++;const a=p.find(u=>!u.is_dir);if(a)return d?`${d}/${a.name}`:a.name;for(const u of p){if(!u.is_dir)continue;const f=d?`${d}/${u.name}`:u.name;if(i.push(f),i.length>=20)break}}return null}async function Li(e,n,r,o){try{const i=await Ft(e,n,r);if(!i||i.length===0)return null;const l=i.find(d=>{const p=typeof d.kind=="string"?d.kind.toLowerCase():"";return(p==="function"||p==="method")&&typeof d.name=="string"&&d.name.trim().length>0});if(l!=null&&l.name)return l.name;const s=i.find(d=>typeof d.name=="string"&&d.name.trim().length>0);return(s==null?void 0:s.name)||null}catch(i){return o==null||o((i==null?void 0:i.message)||`Failed to inspect symbols for ${e}/${n}; call-graph hint may be limited.`),null}}function _r(e){return typeof e.owner_name=="string"&&e.owner_name.trim()?e.owner_name:null}const Ii={display:"inline-block",textDecoration:"none",background:"#1f6feb",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",fontWeight:"bold",fontSize:"13px"},un={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},Pi={textAlign:"left",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",cursor:"pointer",fontSize:"13px"},hn={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"};function vr({entries:e,owner:n,repo:r,ref:o,currentPath:i}){const l=i?`/${n}/${r}/tree/${o}/${i}`:`/${n}/${r}/tree/${o}`;return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[i&&t("a",{href:Wi(l),style:{display:"block",padding:"8px 16px",borderBottom:"1px solid #30363d",background:"#161b22"},children:".."}),e.sort((s,d)=>s.is_dir&&!d.is_dir?-1:!s.is_dir&&d.is_dir?1:s.name.localeCompare(d.name)).map(s=>{const d=s.is_dir?`/${n}/${r}/tree/${o}/${i?i+"/":""}${s.name}`:`/${n}/${r}/blob/${o}/${i?i+"/":""}${s.name}`;return t("a",{href:d,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderBottom:"1px solid #21262d",color:"#c9d1d9"},children:[t("span",{style:{color:s.is_dir?"#58a6ff":"#8b949e",fontFamily:"monospace",fontSize:"14px"},children:s.is_dir?"📁":"📄"}),t("span",{children:s.name})]},s.name)})]})}function Wi(e){const n=e.split("/");return n.pop(),n.join("/")||"/"}function Ai({owner:e,repo:n}){const[r,o]=c(null),[i,l]=c(!1),[s,d]=c(""),[p,a]=c(null),[u,f]=c(!1),[x,h]=c(""),[S,v]=c(!1),[_,y]=c([]),[g,b]=c(!1),[m,$]=c(""),[I,P]=c(!1),[D,w]=c(""),[L,E]=c(!1),[z,N]=c(""),[F,X]=c(""),[G,C]=c([]),[M,Z]=c(!1),[de,ce]=c(""),[ne,pe]=c(null),[Q,q]=c(!1),ae=!!ge(),ee=ue(()=>!(r!=null&&r.parent_owner)||!(r!=null&&r.parent_name)?null:{owner:r.parent_owner,name:r.parent_name},[r==null?void 0:r.parent_owner,r==null?void 0:r.parent_name]),me=(r==null?void 0:r.default_branch)||"main",W=typeof window<"u"?window.location.origin:"",j=()=>{!e||!n||(b(!0),$(""),xo(e,n).then(H=>y(H||[])).catch(H=>$((H==null?void 0:H.message)||"failed to load forks")).finally(()=>b(!1)))},le=H=>{!e||!n||(Z(!0),ce(""),Ot(e,n,H).then(J=>C(J||[])).catch(J=>{C([]),ce((J==null?void 0:J.message)||"failed to load repository tree")}).finally(()=>Z(!1)))};if(U(()=>{if(!e||!n)return;let H=!1;return l(!0),d(""),o(null),He(e,n).then(J=>{if(!H){if(!J){d("Repository data unavailable");return}o(J)}}).catch(J=>{H||d((J==null?void 0:J.message)||"failed to load repository")}).finally(()=>{H||l(!1)}),()=>{H=!0}},[e,n]),U(()=>{if(!e||!n)return;let H=!1;return f(!0),h(""),vo(e,n).then(J=>{H||a(J)}).catch(J=>{H||(a(null),h((J==null?void 0:J.message)||"failed to load stars"))}).finally(()=>{H||f(!1)}),()=>{H=!0}},[e,n]),U(()=>{!e||!n||j()},[e,n]),U(()=>{!e||!n||!r||le(r.default_branch||"main")},[e,n,r==null?void 0:r.id,r==null?void 0:r.default_branch]),U(()=>{if(!ee){pe(null),q(!1);return}let H=!1;return pe(ee),q(!0),(async()=>{let ie={...ee};for(let ve=0;ve<6;ve++){const Se=await He(ie.owner,ie.name);if(!Se.parent_owner||!Se.parent_name)break;ie={owner:Se.parent_owner,name:Se.parent_name}}H||pe(ie)})().catch(()=>{H||pe(ee)}).finally(()=>{H||q(!1)}),()=>{H=!0}},[ee==null?void 0:ee.owner,ee==null?void 0:ee.name]),!e||!n)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing repository context"});if(s)return t("div",{style:{color:"#f85149",padding:"20px"},children:s});if(i||!r)return t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."});const k=!!ee&&!!ne&&(ne.owner!==ee.owner||ne.name!==ee.name),A=p?`${p.starred?"Starred":"Star"} (${p.count})`:"Star",O=g?" (...)":_.length>0?` (${_.length})`:"",K=()=>{if(!e||!n||!ae||L)return;if(I){P(!1),N("");return}const H=r.parent_repo_id?`${n}-fork`:n;w(H),N(""),X(""),P(!0)},_e=async()=>{if(!(!e||!n||!ae||!p||S)){v(!0),h("");try{const H=p.starred?await ko(e,n):await So(e,n);a(H)}catch(H){h((H==null?void 0:H.message)||"failed to update star")}finally{v(!1)}}},je=async H=>{if(H.preventDefault(),!e||!n||!ae||L)return;const J=D.trim();E(!0),N(""),X("Creating fork...");try{const ie=await mo(e,n,J||void 0),ve=typeof ie.owner_name=="string"&&ie.owner_name.trim()?ie.owner_name:e,Se=typeof ie.name=="string"&&ie.name.trim()?ie.name:J||n;y(ct=>ct.some(qt=>qt.owner_name===ve&&qt.name===Se)?ct:[{...ie,owner_name:ve,name:Se},...ct]),P(!1),X(`Fork created: ${ve}/${Se}. Redirecting...`),window.setTimeout(()=>{window.location.assign(`/${ve}/${Se}`)},700)}catch(ie){X(""),N((ie==null?void 0:ie.message)||"failed to fork repository")}finally{E(!1)}};return t("div",{children:[t("div",{style:{marginBottom:"20px"},children:[F&&t("div",{style:{color:L?"#58a6ff":"#3fb950",marginBottom:"12px",padding:"10px 12px",background:L?"#111b2e":"#132a1d",border:`1px solid ${L?"#1f6feb":"#3fb950"}`,borderRadius:"6px",fontSize:"13px"},children:F}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:[t("a",{href:`/${e}`,style:{color:"#58a6ff"},children:e}),t("span",{style:{color:"#8b949e"},children:" / "}),t("a",{href:`/${e}/${n}`,style:{color:"#58a6ff",fontWeight:"bold"},children:n}),r.is_private&&t("span",{style:{color:"#8b949e",fontSize:"12px",fontWeight:"normal",marginLeft:"8px",border:"1px solid #30363d",padding:"2px 8px",borderRadius:"12px"},children:"Private"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{onClick:_e,disabled:!ae||!p||S||u,style:{border:"1px solid #30363d",background:p!=null&&p.starred?"#1f6feb":"#161b22",color:p!=null&&p.starred?"#fff":"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:!ae||S||u?"not-allowed":"pointer",fontSize:"13px"},title:ae?"":"Sign in to star this repository",children:u?"Loading stars...":A}),t("button",{onClick:K,disabled:!ae||L,style:{border:"1px solid #30363d",background:I?"#1f6feb":"#161b22",color:"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:!ae||L?"not-allowed":"pointer",fontSize:"13px"},title:ae?"":"Sign in to fork this repository",children:L?"Forking...":`Fork${O}`})]})]}),r.description&&t("p",{style:{color:"#8b949e",fontSize:"14px"},children:r.description}),t("div",{style:{marginTop:"10px",border:"1px solid #30363d",borderRadius:"6px",background:"#0d1117",padding:"10px 12px",display:"grid",gap:"6px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Clone"}),t("code",{style:{color:"#c9d1d9",fontSize:"12px",whiteSpace:"pre-wrap"},children:["git clone ",W,"/git/",e,"/",n,".git"]}),t("code",{style:{color:"#c9d1d9",fontSize:"12px",whiteSpace:"pre-wrap"},children:["got clone ",W,"/got/",e,"/",n]})]}),ee&&t("p",{style:{color:"#8b949e",fontSize:"13px",marginTop:"8px",marginBottom:"0"},children:["forked from"," ",t("a",{href:`/${ee.owner}/${ee.name}`,style:{color:"#58a6ff"},children:[ee.owner,"/",ee.name]}),k&&ne&&t(ye,{children:[t("span",{style:{color:"#8b949e"},children:" · upstream "}),t("a",{href:`/${ne.owner}/${ne.name}`,style:{color:"#58a6ff"},children:[ne.owner,"/",ne.name]})]}),Q&&t("span",{style:{color:"#8b949e"},children:" · resolving upstream..."})]}),x&&t("div",{style:{marginTop:"10px",color:"#f85149",fontSize:"13px",padding:"8px 10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:x}),I&&t("form",{onSubmit:je,style:{marginTop:"12px",border:"1px solid #30363d",borderRadius:"6px",padding:"12px",background:"#161b22",display:"grid",gap:"10px",maxWidth:"520px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold"},children:"Create fork"}),t("label",{style:{color:"#8b949e",fontSize:"13px"},children:["Fork name",t("input",{value:D,onInput:H=>w(H.target.value),placeholder:n||"",style:{marginTop:"6px",width:"100%",background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"9px 10px",color:"#c9d1d9",fontSize:"13px",boxSizing:"border-box"}})]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Leave blank to use the default fork name. Existing names are auto-suffixed."}),z&&t("div",{style:{color:"#f85149",fontSize:"13px",padding:"8px 10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:z}),t("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t("button",{type:"submit",disabled:L,style:{border:"none",background:"#238636",color:"#fff",padding:"8px 14px",borderRadius:"6px",cursor:L?"not-allowed":"pointer",fontSize:"13px",fontWeight:"bold",opacity:L?.7:1},children:L?"Creating fork...":"Create fork"}),t("button",{type:"button",onClick:()=>{L||(P(!1),N(""))},style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"8px 14px",borderRadius:"6px",cursor:L?"not-allowed":"pointer",fontSize:"13px"},children:"Cancel"})]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[t("a",{href:`/${e}/${n}/tree/${me}`,style:Re,children:"Code"}),t("a",{href:`/${e}/${n}/commits/${me}`,style:Re,children:"Commits"}),t("a",{href:`/${e}/${n}/pulls`,style:Re,children:"Pull requests"}),t("a",{href:`/${e}/${n}/issues`,style:Re,children:"Issues"}),t("a",{href:`/${e}/${n}/symbols/${me}`,style:Re,children:"Symbols"}),t("a",{href:`/${e}/${n}/entity-history/${me}`,style:Re,children:"Entity History"}),ae&&t("a",{href:`/${e}/${n}/settings`,style:Re,children:"Settings"})]}),M&&t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading repository tree..."}),!M&&de&&t("div",{style:{border:"1px solid #f85149",borderRadius:"6px",padding:"14px",background:"#1c1214",color:"#f85149",marginBottom:"20px"},children:[t("div",{style:{marginBottom:"10px",fontSize:"13px"},children:de}),t("button",{onClick:()=>le(me),style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Retry tree load"})]}),!M&&!de&&G.length>0&&e&&n&&t(vr,{entries:G,owner:e,repo:n,ref:me,currentPath:""}),!M&&!de&&G.length===0&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"40px",textAlign:"center"},children:[t("p",{style:{color:"#8b949e",marginBottom:"16px"},children:"This repository is empty"}),t("div",{style:{background:"#161b22",padding:"16px",borderRadius:"6px",fontFamily:"monospace",fontSize:"13px",color:"#c9d1d9",textAlign:"left",display:"inline-block"},children:[t("div",{children:"got init"}),t("div",{children:"got add ."}),t("div",{children:'got commit -m "initial commit"'}),t("div",{children:["got publish ",e,"/",n]}),t("div",{style:{color:"#8b949e"},children:"or"}),t("div",{children:"git init -b main"}),t("div",{children:"git add ."}),t("div",{children:'git commit -m "initial commit"'}),t("div",{children:["git remote add origin ",W,"/git/",e,"/",n,".git"]}),t("div",{children:"git push -u origin main"})]})]}),(g||m||_.length>0)&&t("div",{style:{marginTop:"20px",border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"8px"},children:"Forks"}),g&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Loading forks..."}),!g&&m&&t("div",{style:{color:"#f85149",fontSize:"13px"},children:[t("span",{style:{marginRight:"8px"},children:m}),t("button",{onClick:j,style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"5px 8px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Retry"})]}),!g&&!m&&_.length===0&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No forks yet."}),!g&&!m&&_.length>0&&t("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[_.slice(0,12).map(H=>t("a",{href:`/${H.owner_name}/${H.name}`,style:{color:"#58a6ff",fontSize:"13px"},children:[H.owner_name,"/",H.name]},H.id)),_.length>12&&t("span",{style:{color:"#8b949e",fontSize:"13px"},children:["+",_.length-12," more"]})]})]})]})}const Re={color:"#c9d1d9",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",border:"1px solid #30363d"};let gn=!1,Ye=null;async function Ni(){if(!gn)return Ye||(Ye=(async()=>{const e=document.createElement("script");e.src="/wasm_exec.js",await new Promise((o,i)=>{e.onload=()=>o(),e.onerror=i,document.head.appendChild(e)});const n=new window.Go,r=await WebAssembly.instantiateStreaming(fetch("/gothub.wasm"),n.importObject);n.run(r.instance),gn=!0})(),Ye)}async function Mi(e,n){await Ni();const r=window.gothubHighlight(e,n);return JSON.parse(r)}const Oi=new Set(["keyword","string","comment","number","operator","punctuation","tag","attribute"]),Fi=/^[A-Za-z_$][A-Za-z0-9_$]*$/,mn=18e4,xn=12e3,Hi=220,Le=2,ht=8,gt=16,mt=6;function Sr({filename:e,source:n,owner:r,repo:o,gitRef:i,path:l}){const[s,d]=c([]),[p,a]=c(""),[u,f]=c(null),[x,h]=c(!1),[S,v]=c({}),_=l||e,y=ue(()=>tl(n),[n]);U(()=>{let E=!1;return a(""),d([]),Mi(e,n).then(z=>{E||d(z)}).catch(z=>{E||a(z.message||"failed to highlight source")}),()=>{E=!0}},[e,n]),U(()=>{f(null),h(!1),v({})},[e,n,r,o,i,_]);const g=ue(()=>!r||!o||!i?"Repository context is missing for inline code intelligence.":_?n.length>mn?`Inline code intelligence is disabled for files larger than ${mn.toLocaleString()} characters.`:s.length>xn?`Inline code intelligence is disabled for files with more than ${xn.toLocaleString()} highlighted tokens.`:"":"File path is missing for inline code intelligence.",[r,o,i,_,n.length,s.length]),b=g==="",m=u?S[u.name]:void 0;U(()=>{if(!u||!r||!o||!i||!b||u.name.length<Le||m!=null&&m.loading||m!=null&&m.resolved)return;let E=!1;const z=u.name,N=window.setTimeout(async()=>{v(ne=>{var pe,Q,q;return{...ne,[z]:{loading:!0,resolved:!1,definitions:((pe=ne[z])==null?void 0:pe.definitions)||[],references:((Q=ne[z])==null?void 0:Q.references)||[],history:((q=ne[z])==null?void 0:q.history)||[]}}});const F=`*[name=/^${ji(z)}$/]`,[X,G,C]=await Promise.allSettled([Ft(r,o,i,F),hr(r,o,i,z),gr(r,o,i,{name:z,limit:40})]);if(E)return;const M=X.status==="fulfilled"?X.value||[]:[],Z=G.status==="fulfilled"?G.value||[]:[],de=C.status==="fulfilled"?C.value||[]:[],ce=[];X.status==="rejected"&&ce.push("definitions"),G.status==="rejected"&&ce.push("references"),C.status==="rejected"&&ce.push("entity history"),v(ne=>({...ne,[z]:{loading:!1,resolved:!0,definitions:M,references:Z,history:de,error:ce.length>0?`Unable to load ${ce.join(", ")}.`:void 0}}))},x?0:Hi);return()=>{E=!0,window.clearTimeout(N)}},[u==null?void 0:u.name,r,o,i,b,x,m==null?void 0:m.loading,m==null?void 0:m.resolved]);const $=ue(()=>{const E=(m==null?void 0:m.definitions)||[];return Ki(E,_,(u==null?void 0:u.line)||0)},[m==null?void 0:m.definitions,_,u==null?void 0:u.line]),I=ue(()=>{const E=(m==null?void 0:m.references)||[];return Xi(E,_)},[m==null?void 0:m.references,_]),P=(m==null?void 0:m.history)||[],D=E=>{if(x||!b)return;const z=bn(E.target);if(!z){f(F=>F&&null);return}const N=yn(z,y);N&&f(F=>Vi(F,N)?F:N)},w=E=>{if(!b)return;const z=bn(E.target);if(!z)return;E.preventDefault(),E.stopPropagation();const N=yn(z,y);N&&(f(N),h(!0))},L=()=>{h(!1),f(null)};return t("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[t("div",{style:{flex:1,overflow:"auto",minWidth:0},children:t("pre",{style:{background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"16px",fontSize:"13px",lineHeight:"1.5",overflowX:"auto"},children:t("code",{onMouseOver:D,onClick:w,onMouseLeave:()=>{x||f(null)},children:p?n:Gi(n,s,{activeToken:u,intelligenceEnabled:b})})})}),t("aside",{style:{width:"320px",maxWidth:"100%",flexShrink:0,border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Inline Intelligence"}),(u||x)&&t("button",{type:"button",onClick:L,style:{background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"4px",fontSize:"11px",padding:"2px 8px",cursor:"pointer"},children:"Clear"})]}),t("div",{style:{padding:"12px",display:"grid",gap:"10px"},children:[g&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:g}),!g&&!u&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Hover a symbol token to preview definitions and references, or click to pin."}),!g&&u&&t(ye,{children:[t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",background:"#0d1117"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"13px",wordBreak:"break-word"},children:u.name}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["L",u.line,":",u.column," ",x?"· pinned":"· hover"]})]}),u.name.length<Le&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Symbol is too short for repository-wide lookups."}),u.name.length>=Le&&(m==null?void 0:m.loading)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Loading definitions, references, and entity history..."}),u.name.length>=Le&&(m==null?void 0:m.error)&&t("div",{style:{color:"#d29922",fontSize:"12px"},children:m.error}),u.name.length>=Le&&t(ye,{children:[t(xt,{title:`Definitions (${$.length})`,children:[$.slice(0,ht).map((E,z)=>t("a",{href:bt(r,o,i,E.file,E.start_line),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{fontSize:"12px",fontFamily:"monospace",color:"#c9d1d9"},children:E.file}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.kind||"symbol"," ",Ji(E.start_line,E.end_line)]})]},`${E.file}:${E.start_line||0}:${z}`)),$.length===0&&(m==null?void 0:m.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No matching definitions found."}),$.length>ht&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",$.length-ht," more definitions"]})]}),t(xt,{title:`References (${I.length})`,children:[I.slice(0,gt).map((E,z)=>t("a",{href:bt(r,o,i,E.file,E.start_line||E.line),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{fontSize:"12px",fontFamily:"monospace",color:"#c9d1d9"},children:E.file}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.kind||"reference"," ",Zi(E)]})]},`${E.file}:${E.start_line||E.line||0}:${E.start_column||0}:${z}`)),I.length===0&&(m==null?void 0:m.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No matching references found."}),I.length>gt&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",I.length-gt," more references"]})]}),t(xt,{title:`Entity History (${P.length})`,children:[P.slice(0,mt).map((E,z)=>t("a",{href:bt(r,o,i,E.path),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"11px"},children:Qi(E.commit_hash)}),t("div",{style:{fontSize:"12px",color:"#c9d1d9"},children:E.path}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.author||"unknown"," ",E.timestamp?`· ${el(E.timestamp)}`:""]})]},`${E.commit_hash}:${E.path}:${z}`)),P.length===0&&(m==null?void 0:m.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No related entity history found."}),P.length>mt&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",P.length-mt," more history hits"]})]})]})]})]})]})]})}function xt({title:e,children:n}){return t("section",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",background:"#0d1117"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"12px",marginBottom:"6px"},children:e}),t("div",{children:n})]})}const Ui={keyword:"#ff7b72",string:"#a5d6ff",comment:"#8b949e",function:"#d2a8ff","function.method":"#d2a8ff",type:"#79c0ff",number:"#79c0ff",operator:"#ff7b72",variable:"#ffa657","variable.parameter":"#ffa657","variable.builtin":"#ffa657",constant:"#79c0ff","constant.builtin":"#79c0ff",property:"#c9d1d9",punctuation:"#c9d1d9","punctuation.bracket":"#c9d1d9",tag:"#7ee787",attribute:"#79c0ff"};function Gi(e,n,r){if(n.length===0)return[e];const o=[];let i=0;for(const l of n){l.start_byte>i&&o.push(e.slice(i,l.start_byte));const s=e.slice(l.start_byte,l.end_byte),d=Ui[l.capture]||"#c9d1d9",p=r.intelligenceEnabled&&qi(l.capture,s),a=!!r.activeToken&&r.activeToken.start===l.start_byte&&r.activeToken.end===l.end_byte;o.push(t("span",{"data-symbol":p?s:void 0,"data-start":p?String(l.start_byte):void 0,"data-end":p?String(l.end_byte):void 0,style:{color:d,cursor:p?"pointer":"text",borderRadius:p?"3px":void 0,background:a?"rgba(31, 111, 235, 0.18)":void 0,outline:a?"1px solid rgba(31, 111, 235, 0.45)":void 0},children:s})),i=l.end_byte}return i<e.length&&o.push(e.slice(i)),o}function qi(e,n){const r=e.split(".")[0];return Oi.has(r)||!Fi.test(n)?!1:n.length>=Le}function ji(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function bn(e){if(!e)return null;let n=null;return e instanceof HTMLElement?n=e:e instanceof Text&&(n=e.parentElement),n?n.closest("[data-symbol]"):null}function yn(e,n){const r=e.dataset.symbol,o=e.dataset.start,i=e.dataset.end;if(!r||!o||!i)return null;const l=Number(o),s=Number(i);if(!Number.isFinite(l)||!Number.isFinite(s)||s<=l)return null;const d=nl(n,l);return{name:r,start:l,end:s,line:d.line,column:d.column}}function Vi(e,n){return!!e&&e.start===n.start&&e.end===n.end&&e.name===n.name}function Ki(e,n,r){const o=e.map((i,l)=>({definition:i,index:l,score:Yi(i,n,r)}));return o.sort((i,l)=>l.score-i.score||i.index-l.index),o.map(i=>i.definition)}function Yi(e,n,r){let o=0;return n&&e.file===n&&(o+=4),n&&e.file===n&&r>0&&typeof e.start_line=="number"&&typeof e.end_line=="number"&&r>=e.start_line&&r<=e.end_line&&(o+=6),o}function Xi(e,n){if(!n)return e;const r=[],o=[];for(const i of e)i.file===n?r.push(i):o.push(i);return[...r,...o]}function bt(e,n,r,o,i){if(!e||!n||!r||!o)return"#";const l=`/${e}/${n}/blob/${r}/${o}`;return i&&i>0?`${l}#L${i}`:l}function Ji(e,n){return!e||e<=0?"line ?":!n||n<=e?`L${e}`:`L${e}-${n}`}function Zi(e){const n=e.start_line||e.line,r=e.end_line,o=e.start_column,i=e.end_column;let l=n&&n>0?`L${n}`:"line ?";return n&&r&&r>n&&(l+=`-${r}`),o&&o>0&&(l+=`, col ${o}`,i&&i>o&&(l+=`-${i}`)),l}function Qi(e){return e?e.length>12?e.slice(0,12):e:""}function el(e){return e?new Date(e*1e3).toLocaleString():"unknown time"}function tl(e){const n=[0];for(let r=0;r<e.length;r++)e.charCodeAt(r)===10&&n.push(r+1);return n}function nl(e,n){if(e.length===0)return{line:1,column:n+1};const r=Math.max(0,n);let o=0,i=e.length-1;for(;o<=i;){const d=o+i>>1;e[d]<=r?o=d+1:i=d-1}const l=Math.max(0,i),s=e[l]||0;return{line:l+1,column:r-s+1}}const kr=/^ {0,3}(#{1,6})\s+(.+?)\s*#*\s*$/,Ut=/^ {0,3}(\d+)[.)]\s+(.+)$/,Gt=/^ {0,3}[-+*]\s+(.+)$/,Lt=/^ {0,3}>\s?(.*)$/,wr=/^ {0,3}((\*\s*){3,}|(-\s*){3,}|(_\s*){3,})$/,_n=/^( {2,}|\t+)\S/,rl=/^([A-Za-z][A-Za-z0-9+.-]*):/,ol={border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden",background:"#0d1117"},il={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},ll={padding:"16px",color:"#c9d1d9",fontSize:"14px",lineHeight:1.6,overflowWrap:"anywhere"},sl={margin:"0 0 14px"},dl={border:0,borderTop:"1px solid #30363d",margin:"16px 0"},al={margin:"0 0 14px",padding:"2px 0 2px 12px",borderLeft:"3px solid #30363d",color:"#adbac7"},vn={margin:"0 0 14px 22px",padding:0,display:"grid",gap:"6px"},cl={margin:0},Sn={1:{margin:"0 0 14px",fontSize:"1.85rem",lineHeight:1.2,color:"#f0f6fc",borderBottom:"1px solid #30363d",paddingBottom:"8px"},2:{margin:"0 0 12px",fontSize:"1.5rem",lineHeight:1.25,color:"#f0f6fc",borderBottom:"1px solid #30363d",paddingBottom:"6px"},3:{margin:"0 0 10px",fontSize:"1.25rem",lineHeight:1.3,color:"#f0f6fc"},4:{margin:"0 0 8px",fontSize:"1.1rem",lineHeight:1.35,color:"#f0f6fc"},5:{margin:"0 0 8px",fontSize:"1rem",lineHeight:1.4,color:"#f0f6fc"},6:{margin:"0 0 8px",fontSize:"0.95rem",lineHeight:1.4,color:"#8b949e",textTransform:"uppercase",letterSpacing:"0.04em"}},pl={fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',background:"rgba(110, 118, 129, 0.2)",border:"1px solid rgba(110, 118, 129, 0.4)",borderRadius:"4px",padding:"0 4px",fontSize:"0.92em"},fl={margin:"0 0 14px",border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden",background:"#0b1220"},ul={margin:0,padding:"5px 10px",borderBottom:"1px solid #30363d",color:"#8b949e",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.03em"},hl={margin:0,padding:"12px 14px",overflowX:"auto",fontSize:"13px",lineHeight:1.5,color:"#c9d1d9"},gl={color:"#58a6ff",textDecoration:"underline",textUnderlineOffset:"2px"};function ml({filename:e,source:n,owner:r,repo:o,gitRef:i,path:l}){const[s,d]=c("preview"),p=ue(()=>$r(n,"md"),[n]);return U(()=>{d("preview")},[e,l]),t("div",{style:{display:"grid",gap:"10px"},children:t("div",{style:ol,children:[t("div",{style:il,children:[t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Markdown"}),t("div",{style:{display:"flex",gap:"6px"},children:[t(kn,{label:"Preview",active:s==="preview",onClick:()=>d("preview")}),t(kn,{label:"Raw",active:s==="raw",onClick:()=>d("raw")})]})]}),s==="preview"?t("article",{style:ll,children:p.length>0?p:t("p",{style:{margin:0,color:"#8b949e"},children:"Empty markdown file."})}):t("div",{style:{padding:"12px"},children:t(Sr,{filename:e,source:n,owner:r,repo:o,gitRef:i,path:l})})]})})}function kn({label:e,active:n,onClick:r}){return t("button",{type:"button",onClick:r,"aria-pressed":n,style:{background:n?"#1f6feb":"#21262d",color:n?"#ffffff":"#c9d1d9",border:"1px solid #30363d",borderRadius:"4px",fontSize:"12px",padding:"4px 10px",cursor:"pointer"},children:e})}function $r(e,n){const o=e.replace(/\r\n?/g,`
`).split(`
`),i=[];let l=0,s=0;for(;l<o.length;){const d=o[l]||"";if(d.trim()===""){l+=1;continue}const p=zr(d);if(p){l+=1;const S=[];for(;l<o.length&&!vl(o[l]||"",p);)S.push(o[l]||""),l+=1;l<o.length&&(l+=1),i.push(t("figure",{style:fl,children:[p.language&&t("figcaption",{style:ul,children:p.language}),t("pre",{style:hl,children:t("code",{children:S.join(`
`)})})]},`${n}-code-${s}`)),s+=1;continue}const a=kr.exec(d);if(a){const S=Math.min(6,a[1].length),v=a[2]||"";i.push(bl(S,Te(v,`${n}-h-${s}`),`${n}-h-${s}`)),s+=1,l+=1;continue}if(wr.test(d)){i.push(t("hr",{style:dl},`${n}-hr-${s}`)),s+=1,l+=1;continue}if(Lt.test(d)){const S=[];for(;l<o.length;){const v=Lt.exec(o[l]||"");if(!v)break;S.push(v[1]||""),l+=1}i.push(t("blockquote",{style:al,children:$r(S.join(`
`),`${n}-quote-${s}`)},`${n}-quote-${s}`)),s+=1;continue}const u=Ut.exec(d),f=Gt.exec(d);if(u||f){const S=u?"ordered":"unordered",{node:v,nextIndex:_}=xl(o,l,S,`${n}-list-${s}`);i.push(v),s+=1,l=_;continue}const x=[];for(;l<o.length;){const S=o[l]||"";if(S.trim()===""||Rr(S))break;x.push(S.trim()),l+=1}const h=x.join(" ").replace(/\s+/g," ").trim();h?(i.push(t("p",{style:sl,children:Te(h,`${n}-p-${s}`)},`${n}-p-${s}`)),s+=1):l+=1}return i}function xl(e,n,r,o){const i=[],l=r==="ordered"?Ut:Gt;let s=n,d=0,p=1;for(;s<e.length;){const a=l.exec(e[s]||"");if(!a)break;const u=[];for(r==="ordered"?(d===0&&(p=Number(a[1])||1),u.push(a[2]||"")):u.push(a[1]||""),s+=1;s<e.length;){const x=e[s]||"";if(x.trim()===""||l.test(x)||Rr(x)&&!_n.test(x))break;if(_n.test(x)){u.push(x.trim()),s+=1;continue}break}const f=u.join(" ").replace(/\s+/g," ").trim();i.push(t("li",{style:cl,children:Te(f,`${o}-item-${d}`)},`${o}-item-${d}`)),d+=1}return r==="ordered"?{node:t("ol",{style:vn,start:p>1?p:void 0,children:i},o),nextIndex:s}:{node:t("ul",{style:vn,children:i},o),nextIndex:s}}function bl(e,n,r){const o=Math.min(6,Math.max(1,e)),i=Sn[o]||Sn[3];return o===1?t("h1",{style:i,children:n},r):o===2?t("h2",{style:i,children:n},r):o===3?t("h3",{style:i,children:n},r):o===4?t("h4",{style:i,children:n},r):o===5?t("h5",{style:i,children:n},r):t("h6",{style:i,children:n},r)}function Te(e,n,r=0){if(!e)return[];if(r>8)return[e];const o=[];let i=e,l=0;for(;i.length>0;){const s=yl(i);if(!s){o.push(i);break}s.index>0&&o.push(i.slice(0,s.index));const d=`${n}-inline-${l}`;if(s.type==="code")o.push(t("code",{style:pl,children:s.content},d));else if(s.type==="link"){const p=_l(s.href||""),a=Te(s.content,`${d}-link`,r+1);if(p){const u=/^https?:\/\//i.test(p);o.push(t("a",{href:p,style:gl,target:u?"_blank":void 0,rel:u?"noopener noreferrer":void 0,children:a},d))}else o.push(t("span",{style:{color:"#8b949e"},children:a},d))}else s.type==="strong"?o.push(t("strong",{children:Te(s.content,`${d}-strong`,r+1)},d)):s.type==="em"?o.push(t("em",{children:Te(s.content,`${d}-em`,r+1)},d)):s.type==="strike"&&o.push(t("del",{children:Te(s.content,`${d}-strike`,r+1)},d));if(s.raw.length===0){o.push(i);break}i=i.slice(s.index+s.raw.length),l+=1}return o}function yl(e){const n=[],r=/`([^`\n]+)`/.exec(e);r&&n.push({type:"code",index:r.index,raw:r[0],content:r[1]||""});const o=/\[([^\]]+)\]\(([^)]+)\)/.exec(e);o&&n.push({type:"link",index:o.index,raw:o[0],content:o[1]||"",href:o[2]||""});const i=/\*\*([^*]+)\*\*|__([^_]+)__/.exec(e);i&&n.push({type:"strong",index:i.index,raw:i[0],content:i[1]||i[2]||""});const l=/\*([^*\n]+)\*|_([^_\n]+)_/.exec(e);l&&n.push({type:"em",index:l.index,raw:l[0],content:l[1]||l[2]||""});const s=/~~([^~]+)~~/.exec(e);return s&&n.push({type:"strike",index:s.index,raw:s[0],content:s[1]||""}),n.length===0?null:(n.sort((d,p)=>d.index-p.index||wn(d.type)-wn(p.type)),n[0]||null)}function wn(e){return e==="code"?0:e==="link"?1:e==="strong"?2:e==="em"?3:4}function _l(e){const n=e.trim();if(!n)return null;const r=n.startsWith("<")&&n.endsWith(">")?n.slice(1,-1).trim():n;if(!r)return null;if(r.startsWith("#")||/^(\/|\.\/|\.\.\/)/.test(r))return r;const o=rl.exec(r);if(!o)return r;const i=`${(o[1]||"").toLowerCase()}:`;return i==="http:"||i==="https:"||i==="mailto:"?r:null}function zr(e){const n=/^ {0,3}(`{3,}|~{3,})(.*)$/.exec(e);if(!n)return null;const r=n[1]||"",o=r.startsWith("~")?"~":"`",i=r.length,l=((n[2]||"").trim().split(/\s+/)[0]||"").toLowerCase();return{markerChar:o,markerLength:i,language:l}}function vl(e,n){const r=e.trim();if(!r||r[0]!==n.markerChar)return!1;let o=0;for(;o<r.length&&r[o]===n.markerChar;)o+=1;if(o<n.markerLength)return!1;for(let i=o;i<r.length;i+=1)if(!/\s/.test(r[i]||""))return!1;return!0}function Rr(e){return!!(e.trim()===""||zr(e)||kr.test(e)||Ut.test(e)||Gt.test(e)||Lt.test(e)||wr.test(e))}function Cr({status:e,loading:n,error:r,refName:o}){const i=(e==null?void 0:e.ref)||o||"this ref";if(n)return t("div",{style:yt,children:t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Indexing status: loading..."})});if(r)return t("div",{style:yt,children:t("div",{style:{color:"#d29922",fontSize:"12px"},children:r})});if(!e)return null;const l=Sl(e.queue_status,i),s=wl(e.updated_at);return t("div",{style:yt,children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",flexWrap:"wrap"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"12px"},children:"Indexing"}),t("span",{style:{color:l.color,background:l.background,border:`1px solid ${l.color}`,borderRadius:"999px",padding:"2px 8px",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase"},children:l.label})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"6px"},children:l.message}),t("div",{style:{color:"#8b949e",fontSize:"11px",marginTop:"6px"},children:[t("span",{style:{fontFamily:"monospace"},children:["commit ",kl(e.commit_hash)]}),s&&t("span",{children:[" ","·"," updated ",s]})]}),e.queue_status==="failed"&&e.last_error&&t("div",{style:{color:"#f85149",fontSize:"11px",marginTop:"6px",whiteSpace:"pre-wrap"},children:e.last_error})]})}const yt={border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",background:"#0d1117"};function Sl(e,n){switch(e){case"queued":return{label:"queued",color:"#d29922",background:"#2b230f",message:`Queued for ${n}.`};case"in_progress":return{label:"in progress",color:"#58a6ff",background:"#0d2238",message:`Indexing in progress for ${n}.`};case"completed":return{label:"completed",color:"#3fb950",background:"#132a1a",message:`Index is ready for ${n}.`};case"failed":return{label:"failed",color:"#f85149",background:"#2d1216",message:`Indexing failed for ${n}.`};case"not_found":return{label:"not found",color:"#8b949e",background:"#161b22",message:`No indexing job found for ${n}.`};default:return{label:e||"unknown",color:"#8b949e",background:"#161b22",message:`Index status for ${n}: ${e||"unknown"}.`}}}function kl(e){return e?e.length>12?e.slice(0,12):e:""}function wl(e){if(!e)return"";const n=Date.parse(e);return Number.isFinite(n)?new Date(n).toLocaleString():""}function $n({owner:e,repo:n,ref:r,path:o}){const[i,l]=c(null),[s,d]=c(null),[p,a]=c(!0),[u,f]=c(null),[x,h]=c(null),[S,v]=c(null),[_,y]=c(!1),[g,b]=c(null),[m,$]=c(!1),[I,P]=c(""),[D,w]=c(""),[L,E]=c(""),z=G=>{const C=G.trim();C&&E(M=>M?M.includes(C)?M:`${M} • ${C}`:C)};if(U(()=>{if(!e||!n||!r)return;w(""),E(""),l(null),d(null),f(null),h(null),v(null),y(!1),zn()&&o?(a(!1),wo(e,n,r,o).then(C=>{const M=zl(C==null?void 0:C.data);d({content:M.content}),M.error&&z(M.error)}).catch(C=>w(C.message)),zo(e,n,r,o).then(C=>{const M=Array.isArray(C==null?void 0:C.entities)?C.entities:[];f(M),h(M.length>0?M[0]:null)}).catch(C=>{f([]),h(null),z((C==null?void 0:C.message)||"failed to load structural entities")})):(a(!0),Ot(e,n,r,o).then(C=>l(C||[])).catch(C=>w(C.message)))},[e,n,r,o]),U(()=>{!e||!n||!r||!o||!x||(y(!0),v(null),Ro(e,n,r,x.key,o,500).then(v).catch(G=>{v(null),z((G==null?void 0:G.message)||"failed to load structural blame")}).finally(()=>y(!1)))},[e,n,r,o,x==null?void 0:x.key]),U(()=>{if(!e||!n||!r)return;let G=!1;return b(null),P(""),$(!0),ur(e,n,r).then(C=>{G||b(C)}).catch(C=>{G||P((C==null?void 0:C.message)||"failed to load indexing status")}).finally(()=>{G||$(!1)}),()=>{G=!0}},[e,n,r]),!e||!n||!r)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing repository context"});if(zn()&&!o)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing file path for blob view"});if(D)return t("div",{style:{color:"#f85149",padding:"20px"},children:D});const N=$l(e,n,r,o),F=m||!!I||!!g,X=Rl(o||"");return t("div",{children:[L&&t("div",{style:{color:"#d29922",marginBottom:"16px",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:L}),t("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("a",{href:`/${e}/${n}`,style:{color:"#58a6ff",fontWeight:"bold"},children:n}),N.map((G,C)=>t("span",{children:[t("span",{style:{color:"#8b949e"},children:"/"}),G.href?t("a",{href:G.href,style:{color:"#58a6ff"},children:G.name}):t("span",{style:{color:"#f0f6fc"},children:G.name})]},C))]}),F&&t("div",{style:{marginBottom:"16px",maxWidth:"420px"},children:t(Cr,{status:g,loading:m,error:I,refName:r})}),p?i?t(vr,{entries:i,owner:e,repo:n,ref:r,currentPath:o||""}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."}):s?t("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"16px"},children:[t("div",{style:{flex:"1 1 640px",minWidth:0},children:X?t(ml,{filename:o||"",source:s.content||"",owner:e,repo:n,gitRef:r,path:o||""}):t(Sr,{filename:o||"",source:s.content||"",owner:e,repo:n,gitRef:r,path:o||""})}),t(Cl,{entities:u,selectedKey:(x==null?void 0:x.key)||"",blame:S,blameLoading:_,onSelect:G=>h(G)})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})]})}function $l(e,n,r,o){if(!o)return[];const i=o.split("/");return i.map((l,s)=>{if(s===i.length-1)return{name:l};const d=i.slice(0,s+1).join("/");return{name:l,href:`/${e}/${n}/tree/${r}/${d}`}})}function zl(e){if(typeof e!="string"||e==="")return{content:""};try{const n=atob(e),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return{content:new TextDecoder().decode(r)}}catch{return{content:"",error:"Failed to decode file contents returned by the server."}}}function Rl(e){const n=e.toLowerCase();return n.endsWith(".md")||n.endsWith(".markdown")}function zn(){return typeof window>"u"?!1:window.location.pathname.includes("/blob/")}function Cl({entities:e,selectedKey:n,blame:r,blameLoading:o,onSelect:i}){return t("aside",{style:{flex:"1 1 320px",width:"320px",maxWidth:"100%",border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[t("div",{style:{padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},children:t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Structural Blame"})}),e===null&&t("div",{style:{color:"#8b949e",fontSize:"13px",padding:"12px"},children:"Loading entities..."}),e!==null&&e.length===0&&t("div",{style:{color:"#8b949e",fontSize:"13px",padding:"12px"},children:"No entities detected for this file."}),e!==null&&e.length>0&&t("div",{style:{maxHeight:"240px",overflowY:"auto",borderBottom:"1px solid #30363d"},children:e.map(l=>t("button",{onClick:()=>i(l),style:{width:"100%",textAlign:"left",border:"none",borderTop:"1px solid #21262d",background:n===l.key?"#1f2937":"#0d1117",color:"#c9d1d9",padding:"8px 10px",cursor:"pointer"},children:[t("div",{style:{fontFamily:"monospace",fontSize:"12px"},children:l.name||l.key}),t("div",{style:{color:"#8b949e",fontSize:"11px"},children:[l.decl_kind," · L",l.start_line,"-",l.end_line]})]},l.key))}),t("div",{style:{padding:"12px"},children:o?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Resolving blame..."}):r?t("div",{style:{display:"grid",gap:"6px"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"12px"},children:Tl(r.commit_hash)}),t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:r.author||"unknown"}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:Bl(r.timestamp)}),t("div",{style:{color:"#c9d1d9",fontSize:"12px"},children:r.message||"(no message)"})]}):t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Select an entity to view attribution."})})]})}function Tl(e){return e?e.length>12?e.slice(0,12):e:""}function Bl(e){return e?new Date(e*1e3).toLocaleString():"unknown time"}const El={added:"#3fb950",removed:"#f85149",modified:"#d29922"};function Tr({files:e}){return!e||e.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No changes"}):t("div",{children:e.map(n=>t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",marginBottom:"16px"},children:[t("div",{style:{background:"#161b22",padding:"10px 16px",borderBottom:"1px solid #30363d",fontFamily:"monospace",fontSize:"13px"},children:n.path}),t("div",{style:{padding:"8px 16px"},children:n.changes.map(r=>t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 0",fontSize:"13px",fontFamily:"monospace"},children:[t("span",{style:{color:El[r.type]||"#c9d1d9",fontWeight:"bold",width:"70px"},children:r.type}),t("span",{style:{color:"#c9d1d9"},children:r.key})]},r.key))})]},n.path))})}function Dl({owner:e,repo:n,spec:r}){const[o,i]=c(null),[l,s]=c("");if(U(()=>{!e||!n||!r||Co(e,n,r).then(i).catch(p=>s(p.message))},[e,n,r]),l)return t("div",{style:{color:"#f85149",padding:"20px"},children:l});const d=(r==null?void 0:r.split("..."))||[];return t("div",{children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:["Comparing"," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:d[0]})," ","..."," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:d[1]})]}),o?t(Tr,{files:o.files||[]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})]})}function Br({page:e,hasNext:n,onPageChange:r,disabled:o=!1,style:i}){const l=o||e<=1,s=o||!n;return t("div",{style:{...Ll,...i},children:[t("button",{onClick:()=>r(Math.max(1,e-1)),disabled:l,style:Rn(l),children:"Previous"}),t("span",{style:Il,children:["Page ",e]}),t("button",{onClick:()=>r(e+1),disabled:s,style:Rn(s),children:"Next"})]})}const Ll={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",gap:"12px"},Il={color:"#8b949e",fontSize:"13px"};function Rn(e){return{background:e?"#161b22":"#21262d",color:e?"#6e7681":"#c9d1d9",border:"1px solid #30363d",padding:"6px 12px",borderRadius:"6px",cursor:e?"not-allowed":"pointer",fontSize:"13px"}}function Pl({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c("open"),[s,d]=c(1),[p,a]=c(!1),[u,f]=c(""),x=20;return U(()=>{d(1)},[e,n]),U(()=>{!e||!n||Dt(e,n,i,s,x).then(h=>{o(h),a(h.length===x),f("")}).catch(h=>f(h.message))},[e,n,i,s]),u?t("div",{style:{color:"#f85149",padding:"20px"},children:u}):t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{style:{display:"flex",gap:"8px"},children:["open","closed","merged"].map(h=>t("button",{onClick:()=>{l(h),d(1)},style:{background:i===h?"#30363d":"transparent",color:i===h?"#f0f6fc":"#8b949e",border:"1px solid #30363d",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:h.charAt(0).toUpperCase()+h.slice(1)},h))}),ge()&&t("a",{href:`/${e}/${n}/pulls/new`,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"bold",fontSize:"13px"},children:"New pull request"})]}),r.length===0?t("div",{style:{color:"#8b949e",padding:"40px",textAlign:"center",border:"1px solid #30363d",borderRadius:"6px"},children:["No ",i," pull requests"]}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:r.map(h=>t("a",{href:`/${e}/${n}/pulls/${h.number}`,style:{display:"block",padding:"12px 16px",borderBottom:"1px solid #21262d"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:Wl(h.state),fontSize:"14px"},children:Al(h.state)}),t("span",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold"},children:h.title})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["#",h.number," opened by ",h.author_name||"unknown"," · ",h.source_branch," → ",h.target_branch]})]},h.id))}),(r.length>0||s>1)&&t(Br,{page:s,hasNext:p,onPageChange:d})]})}function Wl(e){switch(e){case"open":return"#3fb950";case"merged":return"#a371f7";case"closed":return"#f85149";default:return"#8b949e"}}function Al(e){switch(e){case"open":return"○";case"merged":return"◉";case"closed":return"●";default:return"○"}}const Nl={clean:"#3fb950",conflict:"#f85149",added:"#58a6ff",deleted:"#f85149"};function Ml({preview:e,onMerge:n,merging:r}){const o=e.stats;return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #30363d",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[t("h3",{style:{fontSize:"16px",color:"#f0f6fc",marginBottom:"8px"},children:"Structural Merge Preview"}),t("div",{style:{fontSize:"13px",color:"#8b949e",display:"flex",gap:"16px",flexWrap:"wrap"},children:[t("span",{children:[o.total_entities," entities"]}),t("span",{style:{color:"#3fb950"},children:[o.unchanged," unchanged"]}),o.ours_modified>0&&t("span",{style:{color:"#d29922"},children:[o.ours_modified," ours modified"]}),o.theirs_modified>0&&t("span",{style:{color:"#d29922"},children:[o.theirs_modified," theirs modified"]}),o.added>0&&t("span",{style:{color:"#58a6ff"},children:[o.added," added"]}),o.deleted>0&&t("span",{style:{color:"#f85149"},children:[o.deleted," deleted"]}),o.conflicts>0&&t("span",{style:{color:"#f85149",fontWeight:"bold"},children:[o.conflicts," conflicts"]})]})]}),n&&!e.has_conflicts&&t("button",{onClick:n,disabled:r,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:r?"Merging...":"Merge pull request"}),e.has_conflicts&&t("div",{style:{color:"#f85149",fontWeight:"bold"},children:[e.conflict_count," conflict",e.conflict_count>1?"s":""," must be resolved"]})]}),t("div",{children:e.files.map(i=>t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderBottom:"1px solid #21262d",fontSize:"13px",fontFamily:"monospace"},children:[t("span",{style:{color:Nl[i.status]||"#c9d1d9",width:"70px"},children:i.status}),t("span",{children:i.path}),i.conflict_count>0&&t("span",{style:{color:"#f85149",marginLeft:"auto"},children:[i.conflict_count," conflict",i.conflict_count>1?"s":""]})]},i.path))})]})}const V={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22"};function Ol({files:e}){const n=(e||[]).filter(o=>o.conflict_count>0||o.status==="conflict"),r=n.reduce((o,i)=>o+(i.conflict_count||0),0);return n.length===0?t("div",{style:{border:`1px solid ${V.border}`,borderRadius:"6px",padding:"16px",color:V.muted,fontSize:"13px"},children:"No conflicts"}):t("div",{style:{border:`1px solid ${V.border}`,borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${V.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("strong",{style:{color:V.heading,fontSize:"14px"},children:"Conflict Details"}),t("span",{style:{color:V.red,fontSize:"13px",fontWeight:"bold"},children:[r," conflict",r!==1?"s":""," in"," ",n.length," file",n.length!==1?"s":""]})]}),n.map(o=>t(Fl,{file:o},o.path))]})}function Fl({file:e}){const[n,r]=c(!0),o=(e.entities||[]).filter(i=>i.status==="conflict"||i.status==="both_modified");return t("div",{style:{borderBottom:`1px solid ${V.border}`},children:[t("div",{onClick:()=>r(!n),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",cursor:"pointer",background:V.surface,userSelect:"none"},children:[t("span",{style:{color:V.muted,fontSize:"12px",fontFamily:"monospace",width:"16px",textAlign:"center"},children:n?"▼":"▶"}),t("span",{style:{color:V.heading,fontSize:"13px",fontFamily:"monospace",flex:1},children:e.path}),t("span",{style:{color:V.red,fontSize:"12px"},children:[e.conflict_count," conflict",e.conflict_count!==1?"s":""]})]}),n&&t("div",{style:{padding:"0 16px 12px 16px"},children:o.length===0?t("div",{style:{color:V.muted,fontSize:"12px",padding:"8px 0"},children:"No entity-level conflict details available"}):o.map(i=>t(Hl,{entity:i},i.key))})]})}function Hl({entity:e}){const n=!!e.base_content;return t("div",{style:{border:`1px solid ${V.border}`,borderRadius:"6px",marginTop:"10px",overflow:"hidden"},children:[t("div",{style:{padding:"8px 12px",background:V.surface,borderBottom:`1px solid ${V.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:V.red,fontSize:"12px",fontWeight:"bold"},children:"CONFLICT"}),t("span",{style:{color:V.heading,fontSize:"13px",fontWeight:"bold"},children:e.name}),t("span",{style:{color:V.muted,fontSize:"12px",fontFamily:"monospace"},children:e.key})]}),n&&t("div",{children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:V.muted,background:"rgba(139, 148, 158, 0.08)",borderBottom:`1px solid ${V.border}`},children:"BASE"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:V.text,background:"rgba(139, 148, 158, 0.04)",borderBottom:`1px solid ${V.border}`,overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.base_content})]}),t("div",{style:{display:"flex"},children:[t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:"#3fb950",background:"rgba(35, 134, 54, 0.1)",borderBottom:`1px solid ${V.border}`,borderRight:`1px solid ${V.border}`},children:"OURS"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:V.text,background:"rgba(35, 134, 54, 0.06)",borderRight:`1px solid ${V.border}`,overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px"},children:e.ours_content||"(empty)"})]}),t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:V.link,background:"rgba(88, 166, 255, 0.1)",borderBottom:`1px solid ${V.border}`},children:"THEIRS"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:V.text,background:"rgba(88, 166, 255, 0.06)",overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px"},children:e.theirs_content||"(empty)"})]})]})]})}function Ul({owner:e,repo:n,number:r}){const[o,i]=c(null),[l,s]=c("conversation"),[d,p]=c(null),[a,u]=c(""),[f,x]=c(null),[h,S]=c(""),[v,_]=c(null),[y,g]=c(null),[b,m]=c(""),[$,I]=c([]),[P,D]=c(null),[w,L]=c(!1),[E,z]=c(""),[N,F]=c([]),[X,G]=c([]),[C,M]=c(!1),[Z,de]=c(""),[ce,ne]=c(""),pe=Me({}),Q=(W,j={})=>{const le=W.trim();if(!le)return;const k=(j.dedupeKey||le).toLowerCase(),A=j.cooldownMs||0;if(A>0){const O=Date.now(),K=pe.current[k]||0;if(O-K<A)return;pe.current[k]=O}ne(O=>O?O.includes(le)?O:`${O} • ${le}`:le)},q=Number(r);U(()=>{i(null),p(null),u(""),x(null),S(""),_(null),g(null),m(""),I([]),D(null),L(!1),z(""),F([]),G([]),M(!1),de(""),ne(""),pe.current={}},[e,n,q]),U(()=>{!e||!n||!q||(ft(e,n,q).then(i).catch(W=>de(W.message)),Lo(e,n,q).then(F).catch(W=>Q(W.message||"failed to load comments")),Po(e,n,q).then(G).catch(W=>Q(W.message||"failed to load reviews")))},[e,n,q]),U(()=>{if(!e||!n||!q)return;const W=ui(e,n,{onEvent:j=>{const le=Vl(j,"number");le==null||le!==q||(Q(`Live update: ${j.type}`),ft(e,n,q).then(i).catch(k=>Q(k.message||"failed to refresh pull request",{dedupeKey:"stream-refresh-pr",cooldownMs:15e3})),(j.type==="pull_request.merged"||l==="merge")&&(ut(e,n,q).then(_).catch(k=>Q(k.message||"failed to refresh merge gate",{dedupeKey:"stream-refresh-merge-gate",cooldownMs:15e3})),dn(e,n,q).then(I).catch(k=>Q(k.message||"failed to refresh checks",{dedupeKey:"stream-refresh-checks",cooldownMs:15e3})),x(null),S(""),g(null),m("")))},onError:j=>{Q(j.message||"repository event stream disconnected",{dedupeKey:"repo-event-stream-disconnected",cooldownMs:3e4})}});return()=>{W.close()}},[e,n,q,l]),U(()=>{if(!(!e||!n||!q)&&((l==="files"||l==="merge")&&!d&&!a&&Bo(e,n,q).then(W=>{p(W),u("")}).catch(W=>{const j=(W==null?void 0:W.message)||"failed to load diff";u(j),Q(j)}),l==="merge"&&!f&&!h&&Eo(e,n,q).then(W=>{x(W),S("")}).catch(W=>{const j=(W==null?void 0:W.message)||"failed to load merge preview";S(j),Q(j)}),l==="merge"&&(ut(e,n,q).then(_).catch(W=>Q(W.message||"failed to load merge gate",{dedupeKey:"load-merge-gate",cooldownMs:1e4})),dn(e,n,q).then(I).catch(W=>Q(W.message||"failed to load checks",{dedupeKey:"load-checks",cooldownMs:1e4})),o&&!y&&!b))){const W=`${o.target_branch}...${o.source_branch}`;li(e,n,W).then(j=>{g(j),m("")}).catch(j=>{const le=(j==null?void 0:j.message)||"failed to load semver recommendation";m(le),Q(le)})}},[l,e,n,q,o,X.length,y]),U(()=>{if(!e||!n||!(o!=null&&o.source_branch))return;let W=!1;return D(null),z(""),L(!0),ur(e,n,o.source_branch).then(j=>{W||D(j)}).catch(j=>{W||z((j==null?void 0:j.message)||"failed to load indexing status")}).finally(()=>{W||L(!1)}),()=>{W=!0}},[e,n,o==null?void 0:o.source_branch]);const ae=ue(()=>jl((d==null?void 0:d.files)||[]),[d]),ee=w||!!E||!!P,me=async()=>{if(!e||!n||!q){de("missing repository context");return}M(!0);try{await Do(e,n,q),ft(e,n,q).then(i).catch(W=>Q(W.message||"failed to refresh pull request",{dedupeKey:"merge-refresh-pr",cooldownMs:1e4})),ut(e,n,q).then(_).catch(W=>Q(W.message||"failed to refresh merge gate",{dedupeKey:"merge-refresh-merge-gate",cooldownMs:1e4}))}catch(W){de(W.message)}M(!1)};return Z?t("div",{style:{color:"#f85149",padding:"20px"},children:Z}):o?t("div",{children:[t("div",{style:{marginBottom:"20px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:[o.title," ",t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:["#",o.number]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:[t("span",{style:{background:o.state==="open"?"#238636":o.state==="merged"?"#8957e5":"#da3633",color:"#fff",padding:"4px 10px",borderRadius:"12px",fontWeight:"bold"},children:o.state}),t("span",{style:{color:"#8b949e"},children:["wants to merge ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px"},children:o.source_branch})," into ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px"},children:o.target_branch})]})]}),ee&&t("div",{style:{marginTop:"12px",maxWidth:"420px"},children:t(Cr,{status:P,loading:w,error:E,refName:o.source_branch})})]}),t("div",{style:{display:"flex",gap:"4px",marginBottom:"20px",borderBottom:"1px solid #30363d",paddingBottom:"0"},children:["conversation","files","merge"].map(W=>t("button",{onClick:()=>s(W),style:{background:"transparent",color:l===W?"#f0f6fc":"#8b949e",border:"none",borderBottom:l===W?"2px solid #f78166":"2px solid transparent",padding:"8px 16px",cursor:"pointer",fontSize:"14px"},children:W==="conversation"?"Conversation":W==="files"?"Files changed":"Merge preview"},W))}),ce&&t("div",{style:{color:"#d29922",marginBottom:"16px",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:ce}),l==="conversation"&&(e&&n?t(Kl,{pr:o,comments:N,reviews:X,owner:e,repo:n,prNum:q,onCommentAdded:W=>F([...N,W]),onReviewAdded:W=>G([...X,W]),onError:W=>Q(W)}):t("div",{style:{color:"#f85149"},children:"Missing repository context"})),l==="files"&&(d?t("div",{style:{display:"grid",gap:"16px"},children:[t(Cn,{summary:ae}),t(Tr,{files:d.files||[]})]}):a?t("div",{style:{color:"#f85149",border:"1px solid #f85149",borderRadius:"6px",padding:"12px 14px",background:"#1c1214"},children:a}):t("div",{style:{color:"#8b949e"},children:"Loading diff..."})),l==="merge"&&t("div",{style:{display:"grid",gap:"16px"},children:[t(Cn,{summary:ae}),b?t("div",{style:{border:"1px solid #f85149",borderRadius:"6px",padding:"12px 16px",color:"#f85149",background:"#1c1214",fontSize:"13px"},children:b}):t(ql,{semver:y}),t(Gl,{gate:v,checks:$}),f?t(ye,{children:[t(Ml,{preview:f,onMerge:o.state==="open"?me:void 0,merging:C}),t(Ol,{files:f.files||[]})]}):h?t("div",{style:{color:"#f85149",border:"1px solid #f85149",borderRadius:"6px",padding:"12px 14px",background:"#1c1214"},children:h}):t("div",{style:{color:"#8b949e"},children:"Loading merge preview..."})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})}function Gl({gate:e,checks:n}){const r=(e==null?void 0:e.entity_owner_approvals)||[];return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"Merge Gate"}),t("span",{style:{color:e!=null&&e.allowed?"#3fb950":"#f85149",fontSize:"13px",fontWeight:"bold"},children:e==null?"checking...":e.allowed?"passing":"blocked"})]}),e&&!e.allowed&&e.reasons&&e.reasons.length>0&&t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{color:"#f85149",fontSize:"13px",marginBottom:"6px"},children:"Blocking reasons"}),e.reasons.map((o,i)=>t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:["- ",o]},i))]}),e&&r.length>0&&t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"8px"},children:"Entity owner approvals"}),r.map(o=>t("div",{style:{padding:"8px 0",borderTop:"1px solid #21262d"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[t("span",{style:{fontFamily:"monospace",fontSize:"13px",color:"#c9d1d9"},children:o.entity_key}),t("span",{style:{color:o.satisfied?"#3fb950":"#f85149",fontSize:"12px",fontWeight:"bold"},children:o.satisfied?"approved":"awaiting"})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:o.path}),o.required_owners&&o.required_owners.length>0&&t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["required: ",vt(o.required_owners)]}),o.approved_by&&o.approved_by.length>0&&t("div",{style:{color:"#3fb950",fontSize:"12px",marginTop:"2px"},children:["approved by: ",vt(o.approved_by)]}),o.missing_owners&&o.missing_owners.length>0&&t("div",{style:{color:"#f85149",fontSize:"12px",marginTop:"2px"},children:["missing: ",vt(o.missing_owners)]}),o.unresolved_teams&&o.unresolved_teams.length>0&&t("div",{style:{color:"#d29922",fontSize:"12px",marginTop:"2px"},children:["unresolved teams: ",o.unresolved_teams.map(i=>`@team/${i}`).join(", ")]})]},`${o.path}:${o.entity_key}`))]}),t("div",{style:{padding:"12px 16px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"8px"},children:"Check runs"}),n.length===0?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No checks reported"}):n.map((o,i)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderTop:i===0?"none":"1px solid #21262d"},children:[t("span",{style:{color:"#c9d1d9",fontSize:"13px",fontFamily:"monospace"},children:o.name}),t("span",{style:{color:o.status==="completed"&&o.conclusion==="success"?"#3fb950":o.status==="completed"?"#f85149":"#d29922",fontSize:"12px"},children:[o.status,o.conclusion?`/${o.conclusion}`:""]})]},i))]})]})}function Cn({summary:e}){return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"PR Impact"})}),t("div",{style:{padding:"12px 16px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(110px, 1fr))",gap:"10px"},children:[t(We,{label:"Files",value:e.files,color:"#8b949e"}),t(We,{label:"Entities",value:e.entities,color:"#8b949e"}),t(We,{label:"Added",value:e.added,color:"#3fb950"}),t(We,{label:"Modified",value:e.modified,color:"#d29922"}),t(We,{label:"Removed",value:e.removed,color:"#f85149"})]})]})}function We({label:e,value:n,color:r}){return t("div",{style:{border:"1px solid #21262d",borderRadius:"6px",padding:"10px 12px",background:"#0d1117"},children:[t("div",{style:{color:"#8b949e",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"4px"},children:e}),t("div",{style:{color:r,fontSize:"20px",fontWeight:"bold",lineHeight:1},children:n})]})}function ql({semver:e}){if(!e)return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px",color:"#8b949e",fontSize:"13px"},children:"Loading semver recommendation..."});const n=(e.bump||"none").toLowerCase();return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"SemVer Recommendation"}),t("span",{style:{color:n==="major"?"#f85149":n==="minor"?"#d29922":n==="patch"?"#3fb950":"#8b949e",fontWeight:"bold",fontSize:"13px",textTransform:"uppercase"},children:n})]}),t("div",{style:{padding:"12px 16px",display:"grid",gap:"8px"},children:[e.breaking_changes&&e.breaking_changes.length>0&&t(_t,{title:"Breaking changes",color:"#f85149",items:e.breaking_changes}),e.features&&e.features.length>0&&t(_t,{title:"Features",color:"#d29922",items:e.features}),e.fixes&&e.fixes.length>0&&t(_t,{title:"Fixes",color:"#3fb950",items:e.fixes}),(!e.breaking_changes||e.breaking_changes.length===0)&&(!e.features||e.features.length===0)&&(!e.fixes||e.fixes.length===0)&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No structural export surface changes detected."})]})]})}function _t({title:e,color:n,items:r}){return t("div",{children:[t("div",{style:{color:n,fontSize:"12px",fontWeight:"bold",marginBottom:"4px"},children:e}),r.slice(0,4).map(o=>t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:["- ",o]},o)),r.length>4&&t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"2px"},children:["+",r.length-4," more"]})]})}function jl(e){const n={files:e.length,entities:0,added:0,modified:0,removed:0};for(const r of e)for(const o of r.changes||[])n.entities++,o.type==="added"?n.added++:o.type==="modified"?n.modified++:o.type==="removed"&&n.removed++;return n}function vt(e){return!e||e.length===0?"":e.map(n=>`@${n}`).join(", ")}function Vl(e,n){var o;const r=(o=e.payload)==null?void 0:o[n];if(typeof r=="number"&&Number.isFinite(r))return r;if(typeof r=="string"&&r.trim()!==""){const i=Number(r);if(Number.isFinite(i))return i}return null}function Kl({pr:e,comments:n,reviews:r,owner:o,repo:i,prNum:l,onCommentAdded:s,onReviewAdded:d,onError:p}){const[a,u]=c(""),[f,x]=c(!1),h=!!ge(),S=async y=>{if(y.preventDefault(),!!a.trim()){x(!0);try{const g=await Io(o,i,l,{body:a});s(g),u("")}catch(g){p(g.message||"failed to submit comment")}x(!1)}},v=async y=>{x(!0);try{const g=await Wo(o,i,l,{state:y,body:a||void 0});d(g),u("")}catch(g){p(g.message||"failed to submit review")}x(!1)},_=[...n.map(y=>({...y,kind:"comment",time:y.created_at})),...r.map(y=>({...y,kind:"review",time:y.created_at}))].sort((y,g)=>(y.time||"").localeCompare(g.time||""));return t("div",{children:[e.body&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"16px"},children:t("div",{style:{color:"#c9d1d9",fontSize:"14px",whiteSpace:"pre-wrap"},children:e.body})}),_.map((y,g)=>t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"12px",color:"#8b949e"},children:[t("strong",{style:{color:"#c9d1d9"},children:y.author_name||"user"}),y.kind==="review"&&t("span",{style:{color:y.state==="approved"?"#3fb950":y.state==="changes_requested"?"#f85149":"#d29922",fontWeight:"bold"},children:y.state==="approved"?"approved":y.state==="changes_requested"?"requested changes":"commented"}),y.file_path&&t("span",{style:{fontFamily:"monospace"},children:y.file_path}),y.entity_stable_id&&t("span",{style:{fontFamily:"monospace",color:"#58a6ff"},children:["stable:",y.entity_stable_id]}),y.entity_key&&t("span",{style:{fontFamily:"monospace",color:"#d2a8ff"},children:y.entity_key})]}),y.body&&t("div",{style:{color:"#c9d1d9",fontSize:"13px",whiteSpace:"pre-wrap"},children:y.body})]},g)),h&&e.state==="open"&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginTop:"16px"},children:[t("textarea",{value:a,onInput:y=>u(y.target.value),placeholder:"Leave a comment...",style:{width:"100%",minHeight:"80px",background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px",color:"#c9d1d9",fontSize:"13px",resize:"vertical",boxSizing:"border-box"}}),t("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[t("button",{onClick:()=>v("approved"),disabled:f,style:{background:"#238636",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Approve"}),t("button",{onClick:()=>v("changes_requested"),disabled:f,style:{background:"#da3633",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Request changes"}),t("button",{onClick:S,disabled:f||!a.trim(),style:{background:"#30363d",color:"#c9d1d9",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Comment"})]})]})]})}function Yl({owner:e,repo:n}){const[r,o]=c(""),[i,l]=c(""),[s,d]=c([]),[p,a]=c(""),[u,f]=c("main"),[x,h]=c(!1),[S,v]=c(!0),[_,y]=c("");U(()=>{!e||!n||Promise.all([fr(e,n),He(e,n)]).then(([b,m])=>{d(b);const $=m.default_branch||"main";f($);const I=b.find(P=>P!==$)||b[0]||"";a(I)}).catch(b=>y(b.message)).finally(()=>v(!1))},[e,n]);const g=async b=>{if(b.preventDefault(),!(!e||!n)){if(!r.trim()||!p){y("Title and source branch are required");return}if(p===u){y("Source and target branch must be different");return}h(!0),y("");try{const m=await To(e,n,{title:r,body:i,source_branch:p,target_branch:u});location.href=`/${e}/${n}/pulls/${m.number}`}catch(m){y(m.message)}finally{h(!1)}}};return ge()?S?t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."}):_&&s.length===0?t("div",{style:{color:"#f85149",padding:"20px"},children:_}):s.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No branches found. Push at least one branch first."}):t("div",{style:{maxWidth:"800px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:"Open a new pull request"}),_&&t("div",{style:{color:"#f85149",marginBottom:"12px",border:"1px solid #30363d",padding:"10px",borderRadius:"6px"},children:_}),t("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:r,onInput:b=>o(b.target.value),placeholder:"Title",style:Xe}),t("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t("label",{style:Tn,children:["Source",t("select",{value:p,onChange:b=>a(b.target.value),style:Xe,children:s.map(b=>t("option",{value:b,children:b},b))})]}),t("label",{style:Tn,children:["Target",t("select",{value:u,onChange:b=>f(b.target.value),style:Xe,children:s.map(b=>t("option",{value:b,children:b},b))})]})]}),t("textarea",{value:i,onInput:b=>l(b.target.value),placeholder:"Description (optional)",style:{...Xe,minHeight:"150px",resize:"vertical"}}),t("button",{type:"submit",disabled:x,style:{background:x?"#1f6f3d":"#238636",color:"#fff",border:"none",padding:"10px 16px",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:"bold",alignSelf:"flex-start"},children:x?"Creating...":"Create pull request"})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Sign in to create a pull request."})}const Xe={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Tn={color:"#c9d1d9",fontSize:"13px",display:"flex",flexDirection:"column",gap:"6px",minWidth:"220px",flex:1};function Xl({owner:e,repo:n,ref:r}){const[o,i]=c([]),[l,s]=c(""),[d,p]=c(!0);return U(()=>{if(!e||!n||!r){i([]),s(""),p(!1);return}let a=!1;return p(!0),s(""),$o(e,n,r).then(u=>{a||i(u)}).catch(u=>{a||(s(u.message),i([]))}).finally(()=>{a||p(!1)}),()=>{a=!0}},[e,n,r]),l?t("div",{style:{color:"#f85149",padding:"20px"},children:l}):t("div",{children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:["Commits on ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:r})]}),d?t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."}):o.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No commits yet"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:o.map(a=>{var u;return t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #21262d",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t("div",{children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"4px"},children:a.message}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[a.author," committed ",Jl(a.timestamp)]})]}),t("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:t("a",{href:`/${e}/${n}/tree/${a.hash}`,style:{fontFamily:"monospace",fontSize:"12px",color:"#58a6ff",border:"1px solid #30363d",padding:"4px 8px",borderRadius:"6px"},children:(u=a.hash)==null?void 0:u.slice(0,10)})})]},a.hash)})})]})}function Jl(e){if(!e)return"";const n=Zl(e);if(Number.isNaN(n.getTime()))return"";const o=new Date().getTime()-n.getTime(),i=Math.floor(o/864e5);return i===0?"today":i===1?"yesterday":i<30?`${i} days ago`:n.toLocaleDateString()}function Zl(e){if(typeof e=="number")return new Date(e<1e12?e*1e3:e);if(typeof e=="string"){const n=Number(e);return Number.isNaN(n)?new Date(e):new Date(n<1e12?n*1e3:n)}return new Date(NaN)}function Ql({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c("open"),[s,d]=c(1),[p,a]=c(!1),[u,f]=c(!0),[x,h]=c(!1),[S,v]=c(""),[_,y]=c(""),[g,b]=c(!1),[m,$]=c(""),I=20,P=!!ge(),D=L=>{!e||!n||(f(!0),di(e,n,i,L,I).then(E=>{o(E),a(E.length===I),$("")}).catch(E=>$(E.message)).finally(()=>f(!1)))};U(()=>{d(1)},[e,n]),U(()=>{D(s)},[e,n,i,s]);const w=async L=>{if(L.preventDefault(),!(!e||!n||!S.trim())){b(!0),$("");try{const E=await si(e,n,{title:S,body:_});if(v(""),y(""),h(!1),i==="open"||i==="all")if(s===1){const z=[E,...r];o(z.slice(0,I)),a(p||z.length>I)}else d(1);else D(s)}catch(E){$(E.message||"failed to create issue")}finally{b(!1)}}};return t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"Issues"}),P&&t("button",{onClick:()=>h(!x),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},children:x?"Cancel":"New issue"})]}),t("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:["open","closed","all"].map(L=>t("button",{onClick:()=>{l(L),d(1)},style:{background:i===L?"#1f6feb":"#161b22",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"13px"},children:L},L))}),m&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:m}),x&&P&&t("form",{onSubmit:w,style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px",marginBottom:"12px"},children:[t("input",{value:S,onInput:L=>v(L.target.value),placeholder:"Title",style:{width:"100%",marginBottom:"8px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"14px"}}),t("textarea",{value:_,onInput:L=>y(L.target.value),placeholder:"Description (optional)",style:{width:"100%",minHeight:"100px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"13px",resize:"vertical"}}),t("div",{style:{marginTop:"8px",display:"flex",justifyContent:"flex-end"},children:t("button",{type:"submit",disabled:g||!S.trim(),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:g?"not-allowed":"pointer"},children:g?"Creating...":"Create issue"})})]}),u?t("div",{style:{color:"#8b949e"},children:"Loading..."}):r.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No issues"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:r.map((L,E)=>t("a",{href:`/${e}/${n}/issues/${L.number}`,style:{display:"block",textDecoration:"none",padding:"12px 14px",borderTop:E===0?"none":"1px solid #30363d"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"4px"},children:["#",L.number," ",L.title]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[L.state," by ",L.author_name||"user"]})]},L.id))}),!u&&(r.length>0||s>1)&&t(Br,{page:s,hasNext:p,onPageChange:d})]})}function es({owner:e,repo:n,number:r}){const[o,i]=c(null),[l,s]=c([]),[d,p]=c(""),[a,u]=c(!1),[f,x]=c(""),h=!!ge(),S=Number(r||0),v=()=>{!e||!n||!S||(ai(e,n,S).then(i).catch(g=>x(g.message)),fi(e,n,S).then(s).catch(g=>x(g.message||"failed to load comments")))};U(()=>{v()},[e,n,S]);const _=async g=>{if(g.preventDefault(),!(!e||!n||!S||!d.trim())){u(!0);try{const b=await pi(e,n,S,{body:d});s([...l,b]),p("")}catch(b){x(b.message||"failed to comment")}finally{u(!1)}}},y=async g=>{if(!(!e||!n||!S||!o)){u(!0);try{const b=await ci(e,n,S,{state:g});i(b)}catch(b){x(b.message||"failed to update issue")}finally{u(!1)}}};return f?t("div",{style:{color:"#f85149",padding:"20px"},children:f}):o?t("div",{children:[t("a",{href:`/${e}/${n}/issues`,style:{color:"#58a6ff",fontSize:"13px",textDecoration:"none"},children:"Back to issues"}),t("div",{style:{marginTop:"10px",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"6px"},children:[o.title," ",t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:["#",o.number]})]}),t("div",{style:{color:"#8b949e",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("span",{style:{color:"#fff",background:o.state==="open"?"#238636":"#da3633",borderRadius:"12px",padding:"2px 8px",fontWeight:"bold",fontSize:"12px"},children:o.state}),t("span",{children:["opened by ",o.author_name||"user"]}),h&&t("button",{onClick:()=>y(o.state==="open"?"closed":"open"),disabled:a,style:{border:"1px solid #30363d",background:"#161b22",color:"#c9d1d9",borderRadius:"6px",padding:"5px 9px",cursor:a?"not-allowed":"pointer",fontSize:"12px"},children:o.state==="open"?"Close issue":"Reopen issue"})]})]}),o.body&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px",marginBottom:"12px",whiteSpace:"pre-wrap",color:"#c9d1d9",fontSize:"13px"},children:o.body}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",marginBottom:"12px"},children:l.length===0?t("div",{style:{color:"#8b949e",padding:"12px",fontSize:"13px"},children:"No comments yet"}):l.map((g,b)=>t("div",{style:{borderTop:b===0?"none":"1px solid #30363d",padding:"10px 12px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"6px"},children:g.author_name||"user"}),t("div",{style:{color:"#c9d1d9",fontSize:"13px",whiteSpace:"pre-wrap"},children:g.body})]},g.id||b))}),h&&t("form",{onSubmit:_,style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px"},children:[t("textarea",{value:d,onInput:g=>p(g.target.value),placeholder:"Leave a comment",style:{width:"100%",minHeight:"90px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"13px",resize:"vertical"}}),t("div",{style:{marginTop:"8px",display:"flex",justifyContent:"flex-end"},children:t("button",{type:"submit",disabled:a||!d.trim(),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:a?"not-allowed":"pointer"},children:"Comment"})})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})}function ts({path:e}){const[n,r]=c([]),[o,i]=c("unread"),[l,s]=c(!0),[d,p]=c(""),a=!!ge(),u=()=>{s(!0),co(o==="unread"?!0:void 0).then(r).catch(h=>p(h.message)).finally(()=>s(!1))};U(()=>{a&&u()},[o]);const f=async h=>{try{await fo(h),r(n.map(S=>S.id===h?{...S,read_at:new Date().toISOString()}:S))}catch(S){p(S.message||"failed to mark notification as read")}},x=async()=>{try{await uo(),r(n.map(h=>({...h,read_at:h.read_at||new Date().toISOString()})))}catch(h){p(h.message||"failed to mark all notifications as read")}};return a?t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"Notifications"}),o==="unread"&&n.some(h=>!h.read_at)&&t("button",{onClick:x,style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},children:"Mark all as read"})]}),t("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:["unread","all"].map(h=>t("button",{onClick:()=>i(h),style:{background:o===h?"#1f6feb":"#161b22",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"13px"},children:h.charAt(0).toUpperCase()+h.slice(1)},h))}),d&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:d}),l?t("div",{style:{color:"#8b949e"},children:"Loading..."}):n.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No notifications"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:n.map((h,S)=>{const v=!h.read_at;return t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",padding:"12px 14px",borderTop:S===0?"none":"1px solid #30363d",borderLeft:v?"3px solid #58a6ff":"3px solid transparent"},children:[t("a",{href:h.resource_path,style:{textDecoration:"none",flex:1,minWidth:0},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[t("span",{style:{color:"#fff",background:ns(h.type),borderRadius:"12px",padding:"2px 8px",fontWeight:"bold",fontSize:"11px",whiteSpace:"nowrap"},children:h.type}),t("span",{style:{color:"#f0f6fc",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:h.title})]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[h.actor_name," · ",rs(h.created_at)]})]}),v&&t("button",{onClick:_=>{_.preventDefault(),f(h.id)},style:{border:"1px solid #30363d",background:"#161b22",color:"#c9d1d9",borderRadius:"6px",padding:"5px 9px",cursor:"pointer",fontSize:"12px",whiteSpace:"nowrap",flexShrink:0},children:"Mark as read"})]},h.id)})})]}):t("div",{style:{color:"#8b949e",padding:"40px",textAlign:"center",border:"1px solid #30363d",borderRadius:"6px"},children:"Sign in to view notifications"})}function ns(e){switch(e){case"issue":return"#238636";case"pull_request":return"#8957e5";case"review":return"#d29922";case"comment":return"#30363d";case"mention":return"#1f6feb";default:return"#30363d"}}function rs(e){if(!e)return"";const n=typeof e=="string"?new Date(e):new Date(Number(e));if(Number.isNaN(n.getTime()))return"";const o=new Date().getTime()-n.getTime(),i=Math.floor(o/1e3);if(i<60)return"just now";const l=Math.floor(i/60);if(l<60)return`${l} minute${l===1?"":"s"} ago`;const s=Math.floor(l/60);if(s<24)return`${s} hour${s===1?"":"s"} ago`;const d=Math.floor(s/24);return d===1?"yesterday":d<30?`${d} days ago`:n.toLocaleDateString()}function os({path:e}){return!ge()?t("div",{style:{maxWidth:"600px",margin:"60px auto",textAlign:"center"},children:t("p",{style:{color:"#8b949e",fontSize:"16px"},children:"Sign in to view settings"})}):t("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[t("h1",{style:{fontSize:"24px",color:"#f0f6fc",marginBottom:"24px"},children:"Settings"}),t(is,{}),t(ss,{}),t(ls,{}),t(ds,{})]})}function is(){const[e,n]=c(null),[r,o]=c(!0),[i,l]=c("");return U(()=>{ao().then(n).catch(s=>l(s.message)).finally(()=>o(!1))},[]),t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"12px"},children:"Profile"}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:i}),r?t("div",{style:{color:"#8b949e"},children:"Loading..."}):e?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22"},children:[t("div",{style:{marginBottom:"12px"},children:[t("span",{style:{color:"#8b949e",fontSize:"13px"},children:"Username"}),t("div",{style:{color:"#c9d1d9",fontSize:"15px",marginTop:"4px"},children:e.username})]}),t("div",{children:[t("span",{style:{color:"#8b949e",fontSize:"13px"},children:"Email"}),t("div",{style:{color:"#c9d1d9",fontSize:"15px",marginTop:"4px"},children:e.email})]})]}):null]})}function ls(){const[e,n]=c([]),[r,o]=c(!0),[i,l]=c(""),[s,d]=c(!1),[p,a]=c(""),[u,f]=c(""),[x,h]=c(!1),S=()=>{o(!0),qo().then(n).catch(y=>l(y.message)).finally(()=>o(!1))};U(()=>{S()},[]);const v=async y=>{if(y.preventDefault(),!(!p.trim()||!u.trim())){h(!0),l("");try{await jo(p.trim(),u.trim()),a(""),f(""),d(!1),S()}catch(g){l(g.message||"Failed to add SSH key")}finally{h(!1)}}},_=async(y,g)=>{if(window.confirm(`Delete SSH key "${g}"?`)){l("");try{await Vo(y),S()}catch(b){l(b.message||"Failed to delete SSH key")}}};return t("div",{style:{marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"SSH Keys"}),t("button",{onClick:()=>d(!s),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"13px"},children:s?"Cancel":"Add SSH Key"})]}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:i}),s&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"16px",background:"#161b22"},children:t("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:p,onInput:y=>a(y.target.value),placeholder:"Key name (e.g. work laptop)",style:dt}),t("textarea",{value:u,onInput:y=>f(y.target.value),placeholder:"Paste your public key here (ssh-ed25519 AAAA... or ssh-rsa AAAA...)",style:{...dt,minHeight:"100px",fontFamily:"monospace",resize:"vertical"}}),t("button",{type:"submit",disabled:x||!p.trim()||!u.trim(),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:"bold",fontSize:"13px",alignSelf:"flex-start",opacity:x||!p.trim()||!u.trim()?.6:1},children:x?"Adding...":"Add key"})]})}),r?t("div",{style:{color:"#8b949e"},children:"Loading..."}):e.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No SSH keys configured"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:e.map((y,g)=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderTop:g===0?"none":"1px solid #30363d"},children:[t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold",marginBottom:"4px"},children:y.name}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[t("span",{style:{marginRight:"12px"},children:y.key_type}),t("span",{style:{fontFamily:"monospace"},children:y.fingerprint&&y.fingerprint.length>32?y.fingerprint.substring(0,32)+"...":y.fingerprint})]}),t("div",{style:{color:"#8b949e",fontSize:"11px",marginTop:"2px"},children:["Added ",y.created_at?new Date(y.created_at).toLocaleDateString():"unknown"]})]}),t("button",{onClick:()=>_(y.id,y.name),style:{background:"transparent",color:"#f85149",border:"1px solid #f85149",padding:"4px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",marginLeft:"12px",flexShrink:0},children:"Delete"})]},y.id))})]})}function ss(){const[e,n]=c(!1),[r,o]=c(""),[i,l]=c(""),s=Ht();return t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"12px"},children:"Passkeys"}),r&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:r}),i&&t("div",{style:{color:"#3fb950",marginBottom:"12px"},children:i}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22"},children:[t("p",{style:{marginTop:0,marginBottom:"12px",color:"#8b949e",fontSize:"13px"},children:"Passkeys are the preferred passwordless sign-in method for gothub."}),t("button",{onClick:async()=>{n(!0),o(""),l("");try{const p=await io(),a=await bi(p.options),u=await lo(p.session_id,a);l(`Passkey registered (${u.credential_id.slice(0,16)}...)`)}catch(p){o(p.message||"Failed to register passkey")}finally{n(!1)}},disabled:!s||e,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:!s||e?"not-allowed":"pointer",fontWeight:"bold",fontSize:"13px",opacity:!s||e?.6:1},children:s?e?"Registering...":"Register passkey":"Passkeys unavailable in this browser"})]})]})}function ds(){const[e,n]=c([]),[r,o]=c(!0),[i,l]=c(""),[s,d]=c(!1),[p,a]=c(""),[u,f]=c(""),[x,h]=c(!1),S=()=>{o(!0),oi().then(n).catch(_=>l(_.message)).finally(()=>o(!1))};return U(()=>{S()},[]),t("div",{style:{marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"Organizations"}),t("button",{onClick:()=>d(!s),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"13px"},children:s?"Cancel":"Create organization"})]}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:i}),s&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"16px",background:"#161b22"},children:t("form",{onSubmit:async _=>{if(_.preventDefault(),!!p.trim()){h(!0),l("");try{await Zo(p.trim(),u.trim()),a(""),f(""),d(!1),S()}catch(y){l(y.message||"Failed to create organization")}finally{h(!1)}}},style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:p,onInput:_=>a(_.target.value),placeholder:"Organization name",style:dt}),t("input",{value:u,onInput:_=>f(_.target.value),placeholder:"Display name (optional)",style:dt}),t("button",{type:"submit",disabled:x||!p.trim(),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:x?"not-allowed":"pointer",fontWeight:"bold",fontSize:"13px",alignSelf:"flex-start",opacity:x||!p.trim()?.6:1},children:x?"Creating...":"Create organization"})]})}),r?t("div",{style:{color:"#8b949e"},children:"Loading..."}):e.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"Not a member of any organizations"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:e.map((_,y)=>t("a",{href:`/orgs/${_.name}`,style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderTop:y===0?"none":"1px solid #30363d",color:"#58a6ff",textDecoration:"none",fontWeight:"bold",fontSize:"14px"},children:[_.display_name||_.name,_.display_name&&_.display_name!==_.name&&t("span",{style:{color:"#8b949e",fontWeight:"normal",fontSize:"13px"},children:_.name})]},_.id))})]})}const dt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},as=[{key:"general",label:"General"},{key:"collaborators",label:"Collaborators"},{key:"webhooks",label:"Webhooks"},{key:"runners",label:"Runners"},{key:"branch-protection",label:"Branch Protection"}],B={bg:"#0d1117",text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",green:"#238636",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb"},he={background:B.bg,border:`1px solid ${B.border}`,borderRadius:"6px",padding:"10px 12px",color:B.text,fontSize:"14px"},Er={color:B.text,padding:"8px 16px",borderRadius:"6px",fontSize:"14px",border:`1px solid ${B.border}`,cursor:"pointer",background:B.surface},cs={...Er,background:B.active},at={background:B.green,color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},qe={background:B.red,color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},Bn={background:B.surface,color:B.text,border:`1px solid ${B.border}`,padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},ze={border:`1px solid ${B.border}`,borderRadius:"6px",padding:"20px",marginBottom:"20px",background:B.surface},be={color:B.heading,fontSize:"14px",fontWeight:"bold",marginBottom:"6px",display:"block"};function ps({owner:e,repo:n}){const[r,o]=c("general"),[i,l]=c(null),[s,d]=c("");return U(()=>{!e||!n||He(e,n).then(l).catch(p=>d(p.message))},[e,n]),!e||!n?t("div",{style:{color:B.red,padding:"20px"},children:"Missing repository context."}):ge()?s?t("div",{style:{color:B.red,padding:"20px"},children:s}):i?t("div",{children:[t("h1",{style:{fontSize:"20px",color:B.heading,marginBottom:"4px"},children:[t("a",{href:`/${e}`,style:{color:B.link,textDecoration:"none"},children:e}),t("span",{style:{color:B.muted},children:" / "}),t("a",{href:`/${e}/${n}`,style:{color:B.link,fontWeight:"bold",textDecoration:"none"},children:n}),t("span",{style:{color:B.muted,fontWeight:"normal"},children:" - Settings"})]}),t("div",{style:{display:"flex",gap:"8px",marginTop:"20px",marginBottom:"24px",flexWrap:"wrap"},children:as.map(p=>t("button",{onClick:()=>o(p.key),style:r===p.key?cs:Er,children:p.label},p.key))}),r==="general"&&t(fs,{owner:e,repo:n,repoInfo:i}),r==="collaborators"&&t(us,{owner:e,repo:n}),r==="webhooks"&&t(hs,{owner:e,repo:n}),r==="runners"&&t(gs,{owner:e,repo:n}),r==="branch-protection"&&t(ms,{owner:e,repo:n})]}):t("div",{style:{color:B.muted,padding:"20px"},children:"Loading..."}):t("div",{style:{color:B.red,padding:"20px"},children:"You must be logged in to access repository settings."})}function fs({owner:e,repo:n,repoInfo:r}){const[o,i]=c(!1),[l,s]=c(""),d=async()=>{if(window.confirm(`Are you sure you want to delete "${e}/${n}"? This action cannot be undone.`)){i(!0),s("");try{await Jo(e,n),location.href="/"}catch(a){s(a.message||"Failed to delete repository"),i(!1)}}};return t("div",{children:[t("div",{style:ze,children:[t("label",{style:be,children:"Repository name"}),t("input",{type:"text",value:`${e}/${n}`,readOnly:!0,style:{...he,width:"100%",boxSizing:"border-box",opacity:"0.7",cursor:"not-allowed"}}),r.description&&t("div",{style:{marginTop:"12px"},children:[t("label",{style:be,children:"Description"}),t("div",{style:{color:B.text,fontSize:"14px"},children:r.description})]}),r.parent_owner&&r.parent_name&&t("div",{style:{marginTop:"12px",color:B.muted,fontSize:"13px"},children:["forked from"," ",t("a",{href:`/${r.parent_owner}/${r.parent_name}`,style:{color:B.link,textDecoration:"none"},children:[r.parent_owner,"/",r.parent_name]})]})]}),t("div",{style:{border:`2px solid ${B.red}`,borderRadius:"6px",padding:"20px",background:B.surface},children:[t("h3",{style:{color:B.red,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Danger Zone"}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[t("div",{children:[t("div",{style:{color:B.heading,fontSize:"14px",fontWeight:"bold"},children:"Delete this repository"}),t("div",{style:{color:B.muted,fontSize:"13px"},children:"Once you delete a repository, there is no going back."})]}),t("button",{onClick:d,disabled:o,style:{...qe,opacity:o?"0.6":"1"},children:o?"Deleting...":"Delete this repository"})]}),l&&t("div",{style:{color:B.red,marginTop:"12px",fontSize:"13px"},children:l})]})]})}function us({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c(!0),[s,d]=c(""),[p,a]=c(""),[u,f]=c("read"),[x,h]=c(!1),S=async()=>{l(!0);try{const g=await Ko(e,n);o(g||[])}catch(g){d(g.message)}l(!1)};U(()=>{S()},[e,n]);const v=async g=>{if(g.preventDefault(),!!p.trim()){h(!0),d("");try{await Yo(e,n,p.trim(),u),a(""),f("read"),await S()}catch(b){d(b.message||"Failed to add collaborator")}h(!1)}},_=async g=>{if(window.confirm(`Remove collaborator "${g}"?`)){d("");try{await Xo(e,n,g),await S()}catch(m){d(m.message||"Failed to remove collaborator")}}},y=g=>{const b=g==="admin"?"#8957e5":g==="write"?B.green:B.border;return t("span",{style:{background:b,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:g})};return t("div",{children:[s&&t("div",{style:{color:B.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Add collaborator"}),t("form",{onSubmit:v,style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"flex-end"},children:[t("div",{style:{flex:"1",minWidth:"200px"},children:[t("label",{style:be,children:"Username"}),t("input",{type:"text",value:p,onInput:g=>a(g.target.value),placeholder:"username",style:{...he,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{minWidth:"120px"},children:[t("label",{style:be,children:"Role"}),t("select",{value:u,onChange:g=>f(g.target.value),style:{...he,width:"100%",boxSizing:"border-box"},children:[t("option",{value:"read",children:"read"}),t("option",{value:"write",children:"write"}),t("option",{value:"admin",children:"admin"})]})]}),t("button",{type:"submit",disabled:x||!p.trim(),style:{...at,opacity:x||!p.trim()?"0.6":"1"},children:x?"Adding...":"Add"})]})]}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Collaborators"}),i?t("div",{style:{color:B.muted,fontSize:"14px"},children:"Loading..."}):r.length===0?t("div",{style:{color:B.muted,fontSize:"14px"},children:"No collaborators yet."}):r.map((g,b)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderTop:b===0?"none":`1px solid ${B.border}`},children:[t("div",{style:{display:"flex",alignItems:"center"},children:[t("span",{style:{color:B.text,fontSize:"14px",fontWeight:"bold"},children:g.username}),y(g.role)]}),t("button",{onClick:()=>_(g.username),style:{...qe,padding:"4px 10px",fontSize:"12px"},children:"Remove"})]},g.username||b))]})]})}function hs({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c(!0),[s,d]=c(""),[p,a]=c(""),[u,f]=c(""),[x,h]=c(""),[S,v]=c(!1),[_,y]=c(null),[g,b]=c([]),[m,$]=c(!1),I=async()=>{l(!0);try{const z=await Fo(e,n);o(z||[])}catch(z){d(z.message)}l(!1)};U(()=>{I()},[e,n]);const P=async z=>{if(z.preventDefault(),!!p.trim()){v(!0),d("");try{const N=x.split(",").map(X=>X.trim()).filter(Boolean),F={url:p.trim()};u.trim()&&(F.secret=u.trim()),N.length>0&&(F.events=N),await Oo(e,n,F),a(""),f(""),h(""),await I()}catch(N){d(N.message||"Failed to create webhook")}v(!1)}},D=async z=>{if(window.confirm(`Delete webhook #${z}?`)){d("");try{await Ho(e,n,z),_===z&&(y(null),b([])),await I()}catch(F){d(F.message||"Failed to delete webhook")}}},w=async z=>{d("");try{await Uo(e,n,z)}catch(N){d(N.message||"Ping failed")}},L=async z=>{if(_===z){y(null),b([]);return}y(z),$(!0);try{const N=await an(e,n,z);b(N||[])}catch(N){d(N.message||"Failed to load deliveries"),b([])}$(!1)},E=async(z,N)=>{d("");try{await Go(e,n,z,N);const F=await an(e,n,z);b(F||[])}catch(F){d(F.message||"Redelivery failed")}};return t("div",{children:[s&&t("div",{style:{color:B.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Add webhook"}),t("form",{onSubmit:P,children:[t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Payload URL"}),t("input",{type:"text",value:p,onInput:z=>a(z.target.value),placeholder:"https://example.com/webhook",style:{...he,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Secret (optional)"}),t("input",{type:"text",value:u,onInput:z=>f(z.target.value),placeholder:"webhook secret",style:{...he,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Events (comma-separated)"}),t("input",{type:"text",value:x,onInput:z=>h(z.target.value),placeholder:"push, pull_request, issues",style:{...he,width:"100%",boxSizing:"border-box"}})]}),t("button",{type:"submit",disabled:S||!p.trim(),style:{...at,opacity:S||!p.trim()?"0.6":"1"},children:S?"Creating...":"Create webhook"})]})]}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Webhooks"}),i?t("div",{style:{color:B.muted,fontSize:"14px"},children:"Loading..."}):r.length===0?t("div",{style:{color:B.muted,fontSize:"14px"},children:"No webhooks configured."}):r.map((z,N)=>t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 0",borderTop:N===0?"none":`1px solid ${B.border}`,flexWrap:"wrap",gap:"8px"},children:[t("div",{onClick:()=>L(z.id),style:{cursor:"pointer",flex:"1",minWidth:"200px"},children:[t("div",{style:{color:B.link,fontSize:"14px",fontWeight:"bold"},children:z.url}),t("div",{style:{color:B.muted,fontSize:"12px"},children:["ID: ",z.id]})]}),t("div",{style:{display:"flex",gap:"6px"},children:[t("button",{onClick:()=>w(z.id),style:{...Bn,padding:"4px 10px",fontSize:"12px"},children:"Ping"}),t("button",{onClick:()=>D(z.id),style:{...qe,padding:"4px 10px",fontSize:"12px"},children:"Delete"})]})]}),_===z.id&&t("div",{style:{marginLeft:"16px",marginBottom:"12px",padding:"12px",background:B.bg,border:`1px solid ${B.border}`,borderRadius:"6px"},children:[t("h4",{style:{color:B.heading,fontSize:"13px",marginTop:"0",marginBottom:"10px"},children:"Recent Deliveries"}),m?t("div",{style:{color:B.muted,fontSize:"13px"},children:"Loading deliveries..."}):g.length===0?t("div",{style:{color:B.muted,fontSize:"13px"},children:"No deliveries yet."}):g.map((F,X)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderTop:X===0?"none":`1px solid ${B.border}`,flexWrap:"wrap",gap:"6px"},children:[t("div",{children:[t("span",{style:{color:B.text,fontSize:"13px",fontFamily:"monospace"},children:F.id}),t("span",{style:{marginLeft:"8px",color:F.status==="success"||F.response_code===200?"#3fb950":B.red,fontSize:"12px",fontWeight:"bold"},children:F.status||(F.response_code!=null?`HTTP ${F.response_code}`:"unknown")}),F.created_at&&t("span",{style:{color:B.muted,fontSize:"12px",marginLeft:"8px"},children:new Date(F.created_at).toLocaleString()})]}),t("button",{onClick:()=>E(z.id,F.id),style:{...Bn,padding:"2px 8px",fontSize:"11px"},children:"Redeliver"})]},F.id||X))]})]},z.id||N))]})]})}function gs({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c(!0),[s,d]=c(""),[p,a]=c(""),[u,f]=c(24),[x,h]=c(!1),[S,v]=c(""),_=async()=>{l(!0),d("");try{const b=await bo(e,n);o(Array.isArray(b)?b:[])}catch(b){d((b==null?void 0:b.message)||"Failed to load runner tokens")}finally{l(!1)}};U(()=>{_()},[e,n]);const y=async b=>{if(b.preventDefault(),!!p.trim()){h(!0),d(""),v("");try{const m={name:p.trim()};u>0&&(m.expires_in_hours=u);const $=await yo(e,n,m);v($.token||""),a(""),await _()}catch(m){d((m==null?void 0:m.message)||"Failed to create runner token")}finally{h(!1)}}},g=async b=>{if(window.confirm("Revoke this runner token?")){d("");try{await _o(e,n,b),await _()}catch($){d(($==null?void 0:$.message)||"Failed to revoke runner token")}}};return t("div",{children:[s&&t("div",{style:{color:B.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"10px"},children:"Runner Tokens"}),t("div",{style:{color:B.muted,fontSize:"13px",marginBottom:"14px"},children:"Use runner tokens for BYO CI runners to update PR check runs without user credentials."}),S&&t("div",{style:{marginBottom:"12px",padding:"10px",background:B.bg,border:`1px solid ${B.border}`,borderRadius:"6px"},children:[t("div",{style:{color:B.heading,fontSize:"12px",marginBottom:"6px"},children:"New token (shown once)"}),t("code",{style:{color:"#3fb950",fontSize:"12px",wordBreak:"break-all"},children:S})]}),t("form",{onSubmit:y,style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:[t("input",{type:"text",value:p,onInput:b=>a(b.target.value),placeholder:"runner name",style:{...he,minWidth:"200px",flex:"1"}}),t("input",{type:"number",min:"0",max:"8760",value:u,onInput:b=>f(parseInt(b.target.value,10)||0),style:{...he,width:"120px"},title:"Expires in hours (0 = never)"}),t("button",{type:"submit",disabled:x||!p.trim(),style:{...at,opacity:x||!p.trim()?"0.6":"1"},children:x?"Creating...":"Create token"})]}),i?t("div",{style:{color:B.muted,fontSize:"14px"},children:"Loading tokens..."}):r.length===0?t("div",{style:{color:B.muted,fontSize:"14px"},children:"No runner tokens yet."}):r.map((b,m)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",borderTop:m===0?"none":`1px solid ${B.border}`,padding:"10px 0",flexWrap:"wrap"},children:[t("div",{children:[t("div",{style:{color:B.heading,fontSize:"14px",fontWeight:"bold"},children:b.name}),t("div",{style:{color:B.muted,fontSize:"12px"},children:[b.token_prefix," • created ",b.created_at?new Date(b.created_at).toLocaleString():"n/a",b.last_used_at?` • last used ${new Date(b.last_used_at).toLocaleString()}`:"",b.expires_at?` • expires ${new Date(b.expires_at).toLocaleString()}`:" • no expiry",b.revoked_at?" • revoked":""]})]}),t("button",{onClick:()=>g(b.id),disabled:!!b.revoked_at,style:{...qe,opacity:b.revoked_at?"0.5":"1",padding:"6px 10px",fontSize:"12px"},children:b.revoked_at?"Revoked":"Revoke"})]},b.id||m))]})]})}function ms({owner:e,repo:n}){const[r,o]=c([]),[i,l]=c(""),[s,d]=c(!1),[p,a]=c(""),[u,f]=c(!1),[x,h]=c(0),[S,v]=c(""),[_,y]=c(!1),[g,b]=c(!1);U(()=>{fr(e,n).then(D=>o(D||[])).catch(D=>a(D.message||"failed to list branches"))},[e,n]);const m=async D=>{if(D){d(!0),a(""),b(!1);try{const w=await Ao(e,n,D);h(w.required_reviews||0),v(Array.isArray(w.required_checks)?w.required_checks.join(", "):""),y(!!w.require_entity_owner_approval),b(!0)}catch{h(0),v(""),y(!1),b(!0)}d(!1)}},$=D=>{l(D),D&&m(D)},I=async()=>{if(i){f(!0),a("");try{const D=S.split(",").map(w=>w.trim()).filter(Boolean);await No(e,n,i,{required_reviews:x,required_checks:D,require_entity_owner_approval:_})}catch(D){a(D.message||"Failed to save branch protection")}f(!1)}},P=async()=>{if(!(!i||!window.confirm(`Delete branch protection for "${i}"?`))){a("");try{await Mo(e,n,i),h(0),v(""),y(!1)}catch(w){a(w.message||"Failed to delete branch protection")}}};return t("div",{children:[p&&t("div",{style:{color:B.red,marginBottom:"12px",fontSize:"13px"},children:p}),t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Select branch"}),r.length>0?t("select",{value:i,onChange:D=>$(D.target.value),style:{...he,width:"100%",boxSizing:"border-box"},children:[t("option",{value:"",children:"-- select a branch --"}),r.map(D=>t("option",{value:D,children:D},D))]}):t("div",{children:[t("label",{style:be,children:"Branch name"}),t("input",{type:"text",value:i,onInput:D=>l(D.target.value),onBlur:()=>{i&&m(i)},placeholder:"main",style:{...he,width:"100%",boxSizing:"border-box"}})]})]}),s&&t("div",{style:{color:B.muted,fontSize:"14px",marginBottom:"16px"},children:"Loading protection rules..."}),g&&i&&!s&&t("div",{style:ze,children:[t("h3",{style:{color:B.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:["Protection rules for ",t("code",{style:{background:B.bg,padding:"2px 6px",borderRadius:"4px"},children:i})]}),t("div",{style:{marginBottom:"16px"},children:[t("label",{style:be,children:"Required reviews"}),t("input",{type:"number",min:"0",value:x,onInput:D=>h(parseInt(D.target.value,10)||0),style:{...he,width:"100px"}})]}),t("div",{style:{marginBottom:"16px"},children:[t("label",{style:be,children:"Required checks (comma-separated)"}),t("input",{type:"text",value:S,onInput:D=>v(D.target.value),placeholder:"ci/build, ci/test",style:{...he,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"20px"},children:[t("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t("input",{type:"checkbox",checked:_,onChange:D=>y(D.target.checked),style:{width:"16px",height:"16px",accentColor:B.active}}),t("span",{style:{color:B.heading,fontSize:"14px"},children:"Require entity owner approval"})]}),t("div",{style:{color:B.muted,fontSize:"12px",marginLeft:"24px",marginTop:"4px"},children:"When enabled, pull requests must be approved by the owners of all modified entities before merging."})]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{onClick:I,disabled:u,style:{...at,opacity:u?"0.6":"1"},children:u?"Saving...":"Save protection rules"}),t("button",{onClick:P,style:qe,children:"Delete protection"})]})]})]})}function xs({org:e}){const[n,r]=c(null),[o,i]=c([]),[l,s]=c([]),[d,p]=c(""),[a,u]=c(""),[f,x]=c("member"),[h,S]=c(!1),[v,_]=c(""),[y,g]=c(""),[b,m]=c(!1),$=!!ge();U(()=>{e&&(Qo(e).then(r).catch(w=>p(w.message)),ri(e).then(i).catch(w=>p(w.message||"failed to load repositories")),cn(e).then(s).catch(w=>p(w.message||"failed to load members")))},[e]);const I=async w=>{if(w.preventDefault(),!(!e||!a.trim())){S(!0),_("");try{await ti(e,a.trim(),f);const L=await cn(e);s(L),u(""),x("member")}catch(L){_(L.message||"Failed to add member")}finally{S(!1)}}},P=async w=>{if(e&&confirm(`Remove member "${w}" from ${e}?`))try{await ni(e,w),s(l.filter(L=>L.username!==w))}catch(L){_(L.message||"Failed to remove member")}},D=async()=>{if(!(!e||y!==e)&&confirm(`Are you sure you want to delete "${e}"? This action cannot be undone.`)){m(!0);try{await ei(e),location.href="/"}catch(w){p(w.message||"Failed to delete organization"),m(!1)}}};return d?t("div",{style:{color:"#f85149",padding:"20px"},children:d}):n?t("div",{children:[t("div",{style:{marginBottom:"24px"},children:[t("h1",{style:{fontSize:"24px",color:"#f0f6fc",marginBottom:"4px"},children:n.display_name||n.name}),n.display_name&&n.display_name!==n.name&&t("div",{style:{color:"#8b949e",fontSize:"14px"},children:n.name})]}),t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"18px",color:"#f0f6fc",marginBottom:"12px"},children:"Repositories"}),o.length===0?t("div",{style:{color:"#8b949e",padding:"20px 0",fontSize:"14px"},children:"No repositories yet"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:o.map((w,L)=>{const E=w.owner_name||e||"";return t("div",{style:{display:"block",padding:"12px 16px",borderTop:L===0?"none":"1px solid #21262d"},children:[t("div",{style:{marginBottom:"6px"},children:[t("a",{href:`/${E}/${w.name}`,style:{color:"#58a6ff",textDecoration:"none",fontWeight:"bold",fontSize:"14px"},children:w.name}),w.is_private&&t("span",{style:{color:"#8b949e",fontSize:"11px",fontWeight:"normal",marginLeft:"8px",border:"1px solid #30363d",padding:"1px 6px",borderRadius:"12px"},children:"Private"})]}),w.description&&t("div",{style:{color:"#8b949e",fontWeight:"normal",fontSize:"13px"},children:w.description}),w.parent_owner&&w.parent_name&&t("div",{style:{color:"#8b949e",fontWeight:"normal",marginTop:"4px",fontSize:"13px"},children:["forked from"," ",t("a",{href:`/${w.parent_owner}/${w.parent_name}`,style:{color:"#58a6ff",textDecoration:"none"},children:[w.parent_owner,"/",w.parent_name]})]})]},w.id)})})]}),t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"18px",color:"#f0f6fc",marginBottom:"12px"},children:"Members"}),v&&t("div",{style:{color:"#f85149",marginBottom:"12px",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:v}),l.length===0?t("div",{style:{color:"#8b949e",padding:"20px 0",fontSize:"14px"},children:"No members"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:l.map((w,L)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderTop:L===0?"none":"1px solid #21262d"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t("span",{style:{color:"#c9d1d9",fontSize:"14px",fontWeight:"bold"},children:w.username}),t("span",{style:{fontSize:"11px",fontWeight:"bold",padding:"2px 8px",borderRadius:"12px",color:"#fff",background:w.role==="owner"?"#238636":"#30363d"},children:w.role})]}),$&&t("button",{onClick:()=>P(w.username),style:{background:"transparent",color:"#f85149",border:"1px solid #f85149",borderRadius:"6px",padding:"4px 10px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},w.user_id||L))}),$&&t("form",{onSubmit:I,style:{display:"flex",gap:"8px",marginTop:"12px",alignItems:"center",flexWrap:"wrap"},children:[t("input",{value:a,onInput:w=>u(w.target.value),placeholder:"Username",style:En}),t("select",{value:f,onChange:w=>x(w.target.value),style:{background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},children:[t("option",{value:"member",children:"member"}),t("option",{value:"owner",children:"owner"})]}),t("button",{type:"submit",disabled:h||!a.trim(),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:h||!a.trim()?"not-allowed":"pointer",fontWeight:"bold",fontSize:"14px"},children:"Add"})]})]}),$&&t("div",{style:{border:"1px solid #f85149",borderRadius:"6px",padding:"16px",marginTop:"32px"},children:[t("h3",{style:{color:"#f85149",fontSize:"16px",marginBottom:"12px"},children:"Danger zone"}),t("p",{style:{color:"#8b949e",fontSize:"13px",marginBottom:"12px"},children:"Once you delete an organization, there is no going back. Please be certain."}),t("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[t("input",{value:y,onInput:w=>g(w.target.value),placeholder:`Type "${e}" to confirm`,style:En}),t("button",{onClick:D,disabled:b||y!==e,style:{background:y===e?"#da3633":"#21262d",color:y===e?"#fff":"#484f58",border:"1px solid #f85149",borderRadius:"6px",padding:"10px 16px",cursor:b||y!==e?"not-allowed":"pointer",fontWeight:"bold",fontSize:"14px"},children:b?"Deleting...":"Delete this organization"})]})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})}const En={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},se={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d"},bs={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},ys={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341"};function Dn(e){const n=e.toLowerCase();return ys[n]||se.muted}function _s({owner:e,repo:n,ref:r,path:o}){const[i,l]=c(""),[s,d]=c([]),[p,a]=c(!1),[u,f]=c(""),[x,h]=c(!1),S=Me(null);return U(()=>{if(!(!e||!n||!r)){if(S.current&&clearTimeout(S.current),!i.trim()){d([]),h(!1),f("");return}return S.current=setTimeout(()=>{a(!0),f(""),h(!0),Ft(e,n,r,i.trim()).then(v=>{d(v||[])}).catch(v=>{f(v.message||"Search failed"),d([])}).finally(()=>a(!1))},300),()=>{S.current&&clearTimeout(S.current)}}},[i,e,n,r]),t("div",{style:{color:se.text},children:[t("h1",{style:{fontSize:"20px",color:se.heading,margin:"0 0 16px 0"},children:"Symbol Search"}),t("div",{style:{marginBottom:"16px"},children:t("input",{type:"text",placeholder:"Search symbols...",value:i,onInput:v=>l(v.target.value),style:{...bs,width:"100%",boxSizing:"border-box"}})}),u&&t("div",{style:{color:se.red,marginBottom:"12px",fontSize:"14px"},children:u}),p&&t("div",{style:{color:se.muted,padding:"20px 0",fontSize:"14px"},children:"Searching..."}),!p&&x&&s.length===0&&!u&&t("div",{style:{border:`1px solid ${se.border}`,borderRadius:"6px",padding:"24px",color:se.muted,textAlign:"center",fontSize:"14px"},children:['No symbols found for "',i,'"']}),!p&&s.length>0&&t("div",{children:[t("div",{style:{color:se.muted,fontSize:"13px",marginBottom:"8px"},children:[s.length," result",s.length!==1?"s":""]}),t("div",{style:{border:`1px solid ${se.border}`,borderRadius:"6px"},children:s.map((v,_)=>t("a",{href:`/${e}/${n}/blob/${r}/${v.file}`,style:{display:"block",textDecoration:"none",padding:"12px 14px",borderTop:_===0?"none":`1px solid ${se.border}`},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",color:Dn(v.kind),border:`1px solid ${Dn(v.kind)}`,textTransform:"lowercase",flexShrink:0},children:v.kind}),t("span",{style:{color:se.heading,fontWeight:"bold",fontSize:"14px"},children:v.name}),v.receiver&&t("span",{style:{color:se.muted,fontSize:"13px"},children:["on ",v.receiver]})]}),v.signature&&t("div",{style:{color:se.muted,fontSize:"13px",marginTop:"4px",fontFamily:"monospace"},children:v.signature}),t("div",{style:{color:se.link,fontSize:"12px",marginTop:"4px"},children:[v.file,t("span",{style:{color:se.muted},children:[":",v.start_line,v.end_line&&v.end_line!==v.start_line?`-${v.end_line}`:""]})]})]},`${v.file}-${v.name}-${v.start_line}-${_}`))})]}),!p&&!x&&!u&&t("div",{style:{color:se.muted,fontSize:"14px",padding:"20px 0"},children:"Type a query to search for symbols in this repository."})]})}const re={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb"},vs={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},Ss={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341",reference:"#58a6ff",definition:"#238636",call:"#a371f7"};function Ln(e){const n=e.toLowerCase();return Ss[n]||re.muted}function ks(e){const n=new Map;for(const r of e){const o=n.get(r.file)||[];o.push(r),n.set(r.file,o)}return Array.from(n.entries()).map(([r,o])=>({file:r,refs:o}))}function ws({owner:e,repo:n,ref:r,path:o}){const[i,l]=c(""),[s,d]=c([]),[p,a]=c(!1),[u,f]=c(""),[x,h]=c(!1),[S,v]=c({}),_=b=>{b&&b.preventDefault(),!(!e||!n||!r||!i.trim())&&(a(!0),f(""),h(!0),v({}),hr(e,n,r,i.trim()).then(m=>{d(m||[])}).catch(m=>{f(m.message||"Search failed"),d([])}).finally(()=>a(!1)))},y=b=>{v(m=>({...m,[b]:!m[b]}))},g=ks(s);return t("div",{style:{color:re.text},children:[t("h1",{style:{fontSize:"20px",color:re.heading,margin:"0 0 16px 0"},children:"Find References"}),t("form",{onSubmit:_,style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[t("input",{type:"text",placeholder:"Symbol name...",value:i,onInput:b=>l(b.target.value),style:{...vs,flex:"1",minWidth:"200px"}}),t("button",{type:"submit",disabled:p||!i.trim(),style:{background:re.active,color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:p||!i.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",opacity:p||!i.trim()?.6:1},children:p?"Searching...":"Find References"})]}),u&&t("div",{style:{color:re.red,marginBottom:"12px",fontSize:"14px"},children:u}),p&&t("div",{style:{color:re.muted,padding:"20px 0",fontSize:"14px"},children:"Searching for references..."}),!p&&x&&s.length===0&&!u&&t("div",{style:{border:`1px solid ${re.border}`,borderRadius:"6px",padding:"24px",color:re.muted,textAlign:"center",fontSize:"14px"},children:['No references found for "',i,'"']}),!p&&s.length>0&&t("div",{children:[t("div",{style:{color:re.muted,fontSize:"13px",marginBottom:"12px"},children:[s.length," reference",s.length!==1?"s":""," across"," ",g.length," file",g.length!==1?"s":""]}),g.map(b=>{const m=!!S[b.file];return t("div",{style:{border:`1px solid ${re.border}`,borderRadius:"6px",marginBottom:"8px"},children:[t("div",{onClick:()=>y(b.file),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:re.surface,cursor:"pointer",borderRadius:m?"6px":"6px 6px 0 0",userSelect:"none"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:re.muted,fontSize:"12px",display:"inline-block",width:"12px",textAlign:"center"},children:m?"▶":"▼"}),t("a",{href:`/${e}/${n}/blob/${r}/${b.file}`,onClick:$=>$.stopPropagation(),style:{color:re.link,fontSize:"14px",textDecoration:"none"},children:b.file})]}),t("span",{style:{color:re.muted,fontSize:"12px"},children:[b.refs.length," reference",b.refs.length!==1?"s":""]})]}),!m&&t("div",{children:b.refs.map(($,I)=>t("a",{href:`/${e}/${n}/blob/${r}/${b.file}`,style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 14px 8px 34px",borderTop:`1px solid ${re.border}`,textDecoration:"none",color:re.text,fontSize:"13px"},children:[t("span",{style:{color:re.muted,fontFamily:"monospace",fontSize:"12px",minWidth:"50px"},children:["L",$.start_line,$.end_line&&$.end_line!==$.start_line?`-${$.end_line}`:""]}),$.start_column!=null&&t("span",{style:{color:re.muted,fontFamily:"monospace",fontSize:"12px"},children:["col ",$.start_column,$.end_column!=null&&$.end_column!==$.start_column?`-${$.end_column}`:""]}),t("span",{style:{display:"inline-block",padding:"1px 6px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",color:Ln($.kind),border:`1px solid ${Ln($.kind)}`,textTransform:"lowercase"},children:$.kind}),t("span",{style:{color:re.heading,fontSize:"13px"},children:$.name})]},`${$.start_line}-${$.start_column}-${I}`))})]},b.file)})]}),!p&&!x&&!u&&t("div",{style:{color:re.muted,fontSize:"14px",padding:"20px 0"},children:'Enter a symbol name and click "Find References" to search for all references in this repository.'})]})}const R={bg:"#0d1117",text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb",nodeFill:"#22262d",nodeStroke:"#4a5260",nodeRelated:"#275da8",nodeDim:"#1a1f26",edgeDefault:"#6e7681",edgeDim:"#3b434f",edgeInbound:"#e3b341",edgeOutbound:"#58a6ff"},In={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},$s={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341"},$e=176,Be=46,Pn=240,St=84,Wn=92,zs=68,Je=.6,Ze=1.8,An=.1;function Nn(e){if(!e)return R.muted;const n=e.toLowerCase();return $s[n]||R.muted}function ke(e,n){return`${e}::${n}`}function Mn(e,n=22){return e.length<=n?e:`${e.slice(0,n-1)}…`}function nt(e){if(!(typeof e!="number"||!Number.isFinite(e)||e<=0))return Math.floor(e)}function Qe(e,n,r,o,i){if(!e||!n||!r||!o)return"#";const l=`/${e}/${n}/blob/${r}/${o}`;return i&&i>0?`${l}#L${i}`:l}function Rs(e,n){const r=new Map;for(const i of e)r.set(ke(i.name,i.file),{id:ke(i.name,i.file),name:i.name,file:i.file,kind:i.kind,line:nt(i.start_line)});const o=n.map((i,l)=>{const s=ke(i.caller_name,i.caller_file),d=ke(i.callee_name,i.callee_file);return r.has(s)||r.set(s,{id:s,name:i.caller_name,file:i.caller_file}),r.has(d)||r.set(d,{id:d,name:i.callee_name,file:i.callee_file}),{id:`${s}->${d}-${l}`,source:s,target:d,count:typeof i.count=="number"?i.count:void 0}});return{nodes:Array.from(r.values()),edges:o}}function Cs(e,n,r){var v,_,y;if(e.length===0)return{width:820,height:340,nodes:[]};const o=new Map,i=new Map;for(const g of e)o.set(g.id,[]),i.set(g.id,0);for(const g of n)(v=o.get(g.source))==null||v.push(g.target),i.set(g.target,(i.get(g.target)||0)+1);const l=new Map,s=[];if(r&&o.has(r))l.set(r,0),s.push(r);else for(const g of e)(i.get(g.id)||0)===0&&(l.set(g.id,0),s.push(g.id));if(s.length===0){const g=(_=e[0])==null?void 0:_.id;g&&(l.set(g,0),s.push(g))}for(;s.length>0;){const g=s.shift();if(!g)continue;const b=l.get(g)||0;for(const m of o.get(g)||[]){const $=b+1,I=l.get(m);(I==null||$<I)&&(l.set(m,$),s.push(m))}}let d=0;for(const g of l.values())g>d&&(d=g);const p=d+1;for(const g of e)l.has(g.id)||l.set(g.id,p);d=Math.max(d,p);const a=new Map;for(const g of e){const b=l.get(g.id)||0,m=a.get(b);m?m.push(g):a.set(b,[g])}const u=Array.from(a.keys()).sort((g,b)=>g-b);for(const g of u)(y=a.get(g))==null||y.sort((b,m)=>b.name.localeCompare(m.name));const f=Math.max(...Array.from(a.values()).map(g=>g.length),1),x=Wn*2+d*Pn+$e,h=Math.max(340,zs*2+(f-1)*St+Be),S=[];for(const g of u){const b=a.get(g)||[],m=Wn+g*Pn+$e/2,$=(b.length-1)*St,I=(h-$)/2;b.forEach((P,D)=>{S.push({...P,x:m,y:I+D*St})})}return{width:x,height:h,nodes:S}}function Ts(e,n){const r=n.x-e.x,o=n.y-e.y;let i=e.x,l=e.y,s=n.x,d=n.y;if(Math.abs(r)>=Math.abs(o)){r>=0?(i+=$e/2,s-=$e/2):(i-=$e/2,s+=$e/2);const f=Math.max(40,Math.abs(r)*.42),x=i+(r>=0?f:-f),h=s-(r>=0?f:-f);return`M ${i} ${l} C ${x} ${l}, ${h} ${d}, ${s} ${d}`}o>=0?(l+=Be/2,d-=Be/2):(l-=Be/2,d+=Be/2);const p=Math.max(40,Math.abs(o)*.42),a=l+(o>=0?p:-p),u=d-(o>=0?p:-p);return`M ${i} ${l} C ${i} ${a}, ${s} ${u}, ${s} ${d}`}function Bs(e){return e==="outbound"?"callgraph-arrow-outbound":e==="inbound"?"callgraph-arrow-inbound":e==="dim"?"callgraph-arrow-dim":"callgraph-arrow-default"}function Es(e,n,r){const o=e.trim().toLowerCase();if(o){const i=n.find(d=>d.name.toLowerCase()===o);if(i)return ke(i.name,i.file);const l=r.find(d=>d.caller_name.toLowerCase()===o);if(l)return ke(l.caller_name,l.caller_file);const s=r.find(d=>d.callee_name.toLowerCase()===o);if(s)return ke(s.callee_name,s.callee_file)}return n[0]?ke(n[0].name,n[0].file):r[0]?ke(r[0].caller_name,r[0].caller_file):null}function Ds({owner:e,repo:n,ref:r}){const[o,i]=c(""),[l,s]=c(3),[d,p]=c(!1),[a,u]=c([]),[f,x]=c([]),[h,S]=c(null),[v,_]=c("graph"),[y,g]=c(1),[b,m]=c(!1),[$,I]=c(""),[P,D]=c(!1),w=Me(null),L=Me(null),E=Me(!1),z=ue(()=>Rs(a,f),[a,f]),N=ue(()=>Cs(z.nodes,z.edges,h),[z,h]),F=ue(()=>{const k=new Map;for(const A of N.nodes)k.set(A.id,A);return k},[N.nodes]),X=ue(()=>{const k=new Set,A=new Set;if(!h)return{inbound:k,outbound:A};for(const O of z.edges)O.target===h&&k.add(O.source),O.source===h&&A.add(O.target);return{inbound:k,outbound:A}},[h,z.edges]),G=a.length>0||f.length>0,C=N.nodes.length>0&&z.edges.length>0,M=v==="graph"&&C,Z=v==="table"||!C,de=k=>Math.max(Je,Math.min(Ze,Math.round(k*100)/100)),ce=k=>{g(A=>de(A+k))},ne=()=>{g(1);const k=w.current;k&&k.scrollTo({left:0,top:0})},pe=k=>{if(k.pointerType==="mouse"&&k.button!==0)return;const A=k.target;if(A!=null&&A.closest('a[data-callgraph-node="true"]'))return;const O=k.currentTarget;E.current=!1,L.current={pointerId:k.pointerId,startX:k.clientX,startY:k.clientY,scrollLeft:O.scrollLeft,scrollTop:O.scrollTop,moved:!1},O.style.cursor="grabbing",O.style.userSelect="none",O.setPointerCapture(k.pointerId)},Q=k=>{const A=L.current;if(!A||A.pointerId!==k.pointerId)return;const O=k.currentTarget,K=k.clientX-A.startX,_e=k.clientY-A.startY;!A.moved&&(Math.abs(K)>2||Math.abs(_e)>2)&&(A.moved=!0),O.scrollLeft=A.scrollLeft-K,O.scrollTop=A.scrollTop-_e},q=k=>{const A=L.current;if(!A||A.pointerId!==k.pointerId)return;const O=k.currentTarget;O.hasPointerCapture(k.pointerId)&&O.releasePointerCapture(k.pointerId),O.style.cursor="grab",O.style.userSelect="",A.moved&&(E.current=!0),L.current=null},ae=(k,A)=>{if(E.current){E.current=!1,k.preventDefault();return}k.shiftKey&&(k.preventDefault(),S(O=>O===A.id?null:A.id))},ee=k=>{k&&k.preventDefault(),!(!e||!n||!r||!o.trim())&&(m(!0),I(""),D(!0),ii(e,n,r,o.trim(),l,d).then(A=>{const O=(A==null?void 0:A.definitions)||[],K=(A==null?void 0:A.edges)||[];u(O),x(K),S(Es(o,O,K)),_(K.length>0?"graph":"table"),g(1)}).catch(A=>{I(A.message||"Failed to load call graph"),u([]),x([]),S(null),_("table"),g(1)}).finally(()=>m(!1)))},me=k=>{p(k)},W=()=>S(null),j=Math.max(560,Math.round(N.width*y)),le=Math.max(300,Math.round(N.height*y));return t("div",{style:{color:R.text},children:[t("h1",{style:{fontSize:"20px",color:R.heading,margin:"0 0 16px 0"},children:"Call Graph"}),t("form",{onSubmit:ee,style:{marginBottom:"16px"},children:[t("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},children:[t("input",{type:"text",placeholder:"Symbol name...",value:o,onInput:k=>i(k.currentTarget.value),style:{...In,flex:"1",minWidth:"200px"}}),t("input",{type:"number",min:1,max:10,value:l,onInput:k=>s(parseInt(k.currentTarget.value,10)||3),style:{...In,width:"80px"},title:"Depth"}),t("button",{type:"submit",disabled:b||!o.trim(),style:{background:R.active,color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:b||!o.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",opacity:b||!o.trim()?.6:1},children:b?"Loading...":"Search"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[t("div",{style:{display:"flex",gap:"4px"},children:[t("button",{type:"button",onClick:()=>me(!1),style:{background:d?R.surface:R.active,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px 0 0 6px",padding:"6px 12px",cursor:"pointer",fontSize:"13px"},children:"Callees"}),t("button",{type:"button",onClick:()=>me(!0),style:{background:d?R.active:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"0 6px 6px 0",padding:"6px 12px",cursor:"pointer",fontSize:"13px"},children:"Callers"})]}),t("span",{style:{color:R.muted,fontSize:"13px"},children:["Depth: ",l]}),M&&h&&t("button",{type:"button",onClick:W,style:{background:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"12px"},children:"Clear focus"})]})]}),$&&t("div",{style:{color:R.red,marginBottom:"12px",fontSize:"14px"},children:$}),b&&t("div",{style:{color:R.muted,padding:"20px 0",fontSize:"14px"},children:"Loading call graph..."}),!b&&P&&!G&&!$&&t("div",{style:{border:`1px solid ${R.border}`,borderRadius:"6px",padding:"24px",color:R.muted,textAlign:"center",fontSize:"14px"},children:['No call graph data found for "',o,'"']}),!b&&G&&t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"10px"},children:[C?t("div",{style:{display:"flex",gap:"4px"},children:[t("button",{type:"button",onClick:()=>_("graph"),style:{background:v==="graph"?R.active:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px 0 0 6px",padding:"6px 12px",cursor:"pointer",fontSize:"12px"},children:"Graph view"}),t("button",{type:"button",onClick:()=>_("table"),style:{background:v==="table"?R.active:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"0 6px 6px 0",padding:"6px 12px",cursor:"pointer",fontSize:"12px"},children:"Table view"})]}):t("span",{style:{color:R.muted,fontSize:"12px"},children:"Graph data is missing for this result. Showing table fallback."}),M&&t("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[t("button",{type:"button",onClick:()=>ce(-An),disabled:y<=Je,style:{background:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px",padding:"4px 8px",cursor:y<=Je?"not-allowed":"pointer",opacity:y<=Je?.5:1},"aria-label":"Zoom out graph",children:"-"}),t("span",{style:{color:R.muted,fontSize:"12px",minWidth:"44px",textAlign:"center"},children:[Math.round(y*100),"%"]}),t("button",{type:"button",onClick:()=>ce(An),disabled:y>=Ze,style:{background:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px",padding:"4px 8px",cursor:y>=Ze?"not-allowed":"pointer",opacity:y>=Ze?.5:1},"aria-label":"Zoom in graph",children:"+"}),t("button",{type:"button",onClick:ne,style:{background:R.surface,color:R.text,border:`1px solid ${R.border}`,borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Reset"})]})]}),M&&t(ye,{children:[t("div",{ref:w,onPointerDown:pe,onPointerMove:Q,onPointerUp:q,onPointerCancel:q,style:{border:`1px solid ${R.border}`,borderRadius:"10px",background:R.surface,overflow:"auto",maxHeight:"70vh",marginBottom:"14px",cursor:"grab",touchAction:"none"},children:t("svg",{width:j,height:le,viewBox:`0 0 ${N.width} ${N.height}`,role:"img","aria-label":"Interactive call graph",style:{display:"block",background:R.bg},children:[t("defs",{children:[t("marker",{id:"callgraph-arrow-default",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:R.edgeDefault})}),t("marker",{id:"callgraph-arrow-dim",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:R.edgeDim})}),t("marker",{id:"callgraph-arrow-inbound",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:R.edgeInbound})}),t("marker",{id:"callgraph-arrow-outbound",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:R.edgeOutbound})})]}),z.edges.map(k=>{const A=F.get(k.source),O=F.get(k.target);if(!A||!O)return null;let K="default";h&&(k.source===h?K="outbound":k.target===h?K="inbound":K="dim");const _e=K==="outbound"?R.edgeOutbound:K==="inbound"?R.edgeInbound:K==="dim"?R.edgeDim:R.edgeDefault;return t("g",{children:[t("path",{d:Ts(A,O),fill:"none",stroke:_e,strokeWidth:K==="dim"?1.2:1.8,opacity:K==="dim"?.35:.9,markerEnd:`url(#${Bs(K)})`}),k.count&&k.count>1&&t("text",{x:(A.x+O.x)/2,y:(A.y+O.y)/2-6,textAnchor:"middle",fontSize:"10",fill:R.muted,children:[k.count,"x"]})]},k.id)}),N.nodes.map(k=>{const A=h===k.id,O=X.inbound.has(k.id),K=X.outbound.has(k.id),_e=A||O||K,je=h!=null&&!_e,H=A?R.active:_e?R.nodeRelated:je?R.nodeDim:R.nodeFill,J=A?"#9ecbff":R.nodeStroke,ie=Qe(e,n,r,k.file,k.line);return t("a",{href:ie,"data-callgraph-node":"true",onClick:ve=>ae(ve,k),children:t("g",{transform:`translate(${k.x}, ${k.y})`,style:{cursor:"pointer"},children:[t("title",{children:`${k.name}
${k.file}`}),t("rect",{x:-$e/2,y:-Be/2,width:$e,height:Be,rx:10,ry:10,fill:H,stroke:J,strokeWidth:A?2.2:1.2,opacity:je?.55:1}),t("text",{x:"0",y:"-2",textAnchor:"middle",fill:R.heading,fontSize:"12",fontWeight:"600",children:Mn(k.name)}),t("text",{x:"0",y:"13",textAnchor:"middle",fill:Nn(k.kind),fontSize:"10",children:Mn(k.file,24)})]})},k.id)})]})}),t("div",{style:{display:"flex",gap:"14px",flexWrap:"wrap",fontSize:"12px",marginBottom:"16px",color:R.muted},children:[t("span",{children:[t("span",{style:{color:R.edgeOutbound,fontWeight:700},children:"Outbound"})," edges from focused node"]}),t("span",{children:[t("span",{style:{color:R.edgeInbound,fontWeight:700},children:"Inbound"})," edges into focused node"]}),t("span",{children:"Drag background to pan. Click nodes to open file location."}),t("span",{children:"Hold Shift and click a node to focus or unfocus."})]})]}),Z&&t("div",{style:{border:`1px solid ${R.border}`,borderRadius:"8px",padding:"12px 14px",background:R.surface},children:[t("h2",{style:{fontSize:"15px",color:R.heading,margin:"0 0 8px 0"},children:"Table fallback"}),a.length>0&&t("div",{style:{marginBottom:z.edges.length>0?"12px":0,overflowX:"auto"},children:[t("div",{style:{color:R.muted,fontSize:"12px",marginBottom:"6px"},children:["Definitions (",a.length,")"]}),t("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[t("thead",{children:t("tr",{children:[t("th",{style:{textAlign:"left",borderBottom:`1px solid ${R.border}`,padding:"6px"},children:"Symbol"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${R.border}`,padding:"6px"},children:"Kind"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${R.border}`,padding:"6px"},children:"Location"})]})}),t("tbody",{children:a.map((k,A)=>t("tr",{children:[t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`},children:k.name}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`,color:Nn(k.kind)},children:k.kind||"-"}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`},children:[t("a",{href:Qe(e,n,r,k.file,nt(k.start_line)),style:{color:R.link,textDecoration:"none"},children:k.file}),t("span",{style:{color:R.muted},children:nt(k.start_line)?`:L${nt(k.start_line)}`:""})]})]},k.id||`${k.name}-${k.file}-${A}`))})]})]}),z.edges.length>0&&t("div",{style:{overflowX:"auto"},children:[t("div",{style:{color:R.muted,fontSize:"12px",marginBottom:"6px"},children:["Directed edges (",z.edges.length,")"]}),t("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[t("thead",{children:t("tr",{children:[t("th",{style:{textAlign:"left",borderBottom:`1px solid ${R.border}`,padding:"6px"},children:"Caller"}),t("th",{style:{textAlign:"center",borderBottom:`1px solid ${R.border}`,padding:"6px",width:"40px"},children:"→"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${R.border}`,padding:"6px"},children:"Callee"})]})}),t("tbody",{children:z.edges.map((k,A)=>{const O=F.get(k.source),K=F.get(k.target);return!O||!K?null:t("tr",{children:[t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`},children:[t("a",{href:Qe(e,n,r,O.file,O.line),style:{color:R.link,textDecoration:"none"},children:O.name}),t("span",{style:{color:R.muted},children:[" (",O.file,")"]})]}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`,color:R.muted,textAlign:"center"},children:"→"}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${R.border}`},children:[t("a",{href:Qe(e,n,r,K.file,K.line),style:{color:R.link,textDecoration:"none"},children:K.name}),t("span",{style:{color:R.muted},children:[" (",K.file,")"]})]})]},`${k.id}-table-${A}`)})})]})]})]})]}),!b&&!P&&!$&&t("div",{style:{color:R.muted,fontSize:"14px",padding:"20px 0"},children:'Enter a symbol name and click "Search" to explore the call graph. Use "Callees" to see what a function calls, or "Callers" to see what calls it.'})]})}const kt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"};function Ls({owner:e,repo:n,ref:r}){const o=new URLSearchParams(window.location.search),[i,l]=c(o.get("stableId")||o.get("stable_id")||""),[s,d]=c(o.get("name")||""),[p,a]=c(o.get("bodyHash")||o.get("body_hash")||""),[u,f]=c(null),[x,h]=c(!1),[S,v]=c(""),[_,y]=c(""),g=()=>{if(!e||!n||!r)return;const m=i.trim(),$=s.trim(),I=p.trim();if(!m&&!$&&!I){y("At least one search field must be filled.");return}y(""),v(""),f(null),h(!0),gr(e,n,r,{stableId:m||void 0,name:$||void 0,bodyHash:I||void 0}).then(P=>{f(P||[])}).catch(P=>{v(P.message||"Failed to fetch entity history")}).finally(()=>{h(!1)})};return U(()=>{const m=i.trim(),$=s.trim(),I=p.trim();e&&n&&r&&(m||$||I)&&g()},[e,n,r]),t("div",{style:{maxWidth:"900px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:"Entity History"}),t("p",{style:{color:"#8b949e",fontSize:"13px",marginTop:"0",marginBottom:"16px"},children:["Track how a code entity has changed across commits in"," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",color:"#c9d1d9"},children:r||"HEAD"})]}),t("form",{onSubmit:m=>{m.preventDefault(),g()},style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22",marginBottom:"20px"},children:[t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Stable ID"}),t("input",{type:"text",value:i,onInput:m=>l(m.target.value),placeholder:"e.g. abc123def456",style:{...kt,width:"100%",boxSizing:"border-box"}})]}),t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Entity Name"}),t("input",{type:"text",value:s,onInput:m=>d(m.target.value),placeholder:"e.g. MyFunction",style:{...kt,width:"100%",boxSizing:"border-box"}})]}),t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Body Hash"}),t("input",{type:"text",value:p,onInput:m=>a(m.target.value),placeholder:"e.g. sha256:...",style:{...kt,width:"100%",boxSizing:"border-box"}})]})]}),_&&t("div",{style:{color:"#f85149",fontSize:"13px",marginTop:"10px"},children:_}),t("div",{style:{marginTop:"14px"},children:t("button",{type:"submit",disabled:x,style:{background:"#238636",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",opacity:x?.7:1},children:x?"Searching...":"Search"})})]}),S&&t("div",{style:{color:"#f85149",border:"1px solid #f8514933",borderRadius:"6px",padding:"12px 14px",marginBottom:"16px",background:"#f851490d",fontSize:"14px"},children:S}),x&&t("div",{style:{color:"#8b949e",padding:"20px 0",fontSize:"14px"},children:"Loading..."}),!x&&u!==null&&u.length===0&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"24px",textAlign:"center",color:"#8b949e",fontSize:"14px"},children:"No history found for the given criteria."}),!x&&u!==null&&u.length>0&&t("div",{children:[t("div",{style:{color:"#8b949e",fontSize:"13px",marginBottom:"12px"},children:[u.length," result",u.length!==1?"s":""]}),t("div",{style:{position:"relative",paddingLeft:"24px"},children:[t("div",{style:{position:"absolute",left:"7px",top:"0",bottom:"0",width:"2px",background:"#30363d"}}),u.map((m,$)=>{var I;return t("div",{style:{position:"relative",marginBottom:"16px"},children:[t("div",{style:{position:"absolute",left:"-20px",top:"18px",width:"10px",height:"10px",borderRadius:"50%",background:"#1f6feb",border:"2px solid #0d1117"}}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",background:"#161b22",overflow:"hidden"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t("a",{href:`/${e}/${n}/commit/${m.commit_hash}`,style:{fontFamily:"monospace",fontSize:"13px",color:"#58a6ff",textDecoration:"none",background:"#0d1117",padding:"2px 8px",borderRadius:"4px",border:"1px solid #30363d"},children:(I=m.commit_hash)==null?void 0:I.slice(0,7)}),t("span",{style:{color:"#c9d1d9",fontSize:"14px",fontWeight:"500"},children:m.author})]}),t("span",{style:{color:"#8b949e",fontSize:"12px",flexShrink:0},children:Is(m.timestamp)})]}),m.message&&t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginTop:"8px",lineHeight:"1.4"},children:m.message})]}),t("div",{style:{padding:"10px 16px",display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px"},children:[m.kind&&t("span",{style:{display:"inline-block",background:"#1f6feb",color:"#ffffff",fontSize:"11px",fontWeight:"600",padding:"2px 8px",borderRadius:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:m.kind}),m.decl_kind&&t("span",{style:{display:"inline-block",background:"#30363d",color:"#c9d1d9",fontSize:"11px",padding:"2px 8px",borderRadius:"10px"},children:m.decl_kind}),m.name&&t("span",{style:{color:"#f0f6fc",fontSize:"14px",fontFamily:"monospace",fontWeight:"500"},children:[m.receiver?`${m.receiver}.`:"",m.name]}),m.path&&t("span",{style:{color:"#8b949e",fontSize:"12px",marginLeft:"auto"},children:m.path})]}),t("div",{style:{padding:"8px 16px",borderTop:"1px solid #30363d",display:"flex",gap:"16px",flexWrap:"wrap"},children:[m.stable_id&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["ID:"," ",t("span",{style:{fontFamily:"monospace"},children:m.stable_id.length>16?m.stable_id.slice(0,16)+"...":m.stable_id})]}),m.entity_hash&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["Entity:"," ",t("span",{style:{fontFamily:"monospace"},children:m.entity_hash.length>16?m.entity_hash.slice(0,16)+"...":m.entity_hash})]}),m.body_hash&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["Body:"," ",t("span",{style:{fontFamily:"monospace"},children:m.body_hash.length>16?m.body_hash.slice(0,16)+"...":m.body_hash})]})]})]})]},`${m.commit_hash}-${m.stable_id}-${$}`)})]})]})]})}function Is(e){if(!e)return"";const n=Ps(e);if(Number.isNaN(n.getTime()))return"";const o=new Date().getTime()-n.getTime(),i=Math.floor(o/1e3);if(i<60)return"just now";const l=Math.floor(i/60);if(l<60)return`${l} minute${l!==1?"s":""} ago`;const s=Math.floor(l/60);if(s<24)return`${s} hour${s!==1?"s":""} ago`;const d=Math.floor(s/24);return d===1?"yesterday":d<30?`${d} days ago`:n.toLocaleDateString()}function Ps(e){if(typeof e=="number")return new Date(e<1e12?e*1e3:e);if(typeof e=="string"){const n=Number(e);return Number.isNaN(n)?new Date(e):new Date(n<1e12?n*1e3:n)}return new Date(NaN)}function Ws({path:e}){return e==="/login"?t(br,{}):t("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",textAlign:"center"},children:[t("h1",{style:{fontSize:"72px",color:"#f0f6fc",margin:"0 0 8px 0",fontWeight:"bold"},children:"404"}),t("h2",{style:{fontSize:"24px",color:"#8b949e",margin:"0 0 16px 0",fontWeight:"normal"},children:"Page not found"}),t("p",{style:{color:"#8b949e",fontSize:"16px",margin:"0 0 24px 0",maxWidth:"400px"},children:"The page you're looking for doesn't exist or has been moved."}),t("a",{href:"/",style:{color:"#58a6ff",fontSize:"14px",textDecoration:"none"},children:"Go to dashboard"})]})}function As({path:e}){const[n,r]=c(""),[o,i]=c(""),[l,s]=c(""),[d,p]=c(!1),[a,u]=c(!0),[f,x]=c(""),[h,S]=c(""),[v,_]=c(!1),y=Ht()&&a;U(()=>{pr().then(P=>u(!!P.passkey_enabled)).catch(()=>u(!0))},[]);const g=typeof window<"u"&&new URLSearchParams(window.location.search).get("session")==="expired",b=P=>{De(P);const w=new URLSearchParams(window.location.search).get("returnTo")||"/";window.location.assign(w.startsWith("/")&&!w.startsWith("//")?w:"/")},m=async P=>{P.preventDefault(),x(""),S(""),_(!0);try{const D=await ar(n),w=await mr(D.options),L=await cr(D.session_id,w);b(L.token)}catch(D){x(D.message||"Passkey sign-in failed")}finally{_(!1)}},$=async P=>{P.preventDefault(),x(""),S(""),_(!0);try{const D=await ro(o);p(!0),D.token&&s(D.token),S(D.token?"Magic link token generated (dev mode). Verify below.":"Check your inbox for the magic link.")}catch(D){x(D.message)}finally{_(!1)}},I=async P=>{P.preventDefault(),x(""),S(""),_(!0);try{const D=await oo(l);b(D.token)}catch(D){x(D.message)}finally{_(!1)}};return t("div",{style:{maxWidth:"400px",margin:"60px auto",padding:"0 16px"},children:[t("h1",{style:{fontSize:"24px",marginBottom:"24px",color:"#f0f6fc"},children:"Sign in to GotHub"}),g&&t("div",{style:{color:"#f0f6fc",marginBottom:"16px",padding:"12px",background:"#1b2a42",border:"1px solid #1f6feb",borderRadius:"6px"},children:"Session expired. Sign in again."}),h&&t("div",{style:{color:"#3fb950",marginBottom:"16px",padding:"12px",background:"#132a1d",border:"1px solid #3fb950",borderRadius:"6px"},children:h}),f&&t("div",{style:{color:"#f85149",marginBottom:"16px",padding:"12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:f}),t("form",{onSubmit:m,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[t("input",{value:n,onInput:P=>r(P.target.value),placeholder:"Username",style:wt}),t("button",{type:"submit",disabled:v||!n||!y,style:{...Ns,opacity:v||!n||!y?.6:1},children:y?"Sign in with passkey":"Passkeys unavailable in this browser"})]}),t("div",{style:{borderTop:"1px solid #30363d",marginTop:"14px",paddingTop:"14px"},children:[t("form",{onSubmit:$,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[t("input",{value:o,onInput:P=>i(P.target.value),placeholder:"Email",type:"email",style:wt}),t("button",{type:"submit",disabled:v||!o,style:{...On,opacity:v||!o?.6:1},children:"Send magic link"})]}),d&&t("form",{onSubmit:I,style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},children:[t("input",{value:l,onInput:P=>s(P.target.value),placeholder:"Magic token",style:wt}),t("button",{type:"submit",disabled:v||!l,style:{...On,opacity:v||!l?.6:1},children:"Verify"})]})]}),t("p",{style:{marginTop:"16px",color:"#8b949e",fontSize:"13px"},children:["New to GotHub? ",t("a",{href:"/signup",style:{color:"#58a6ff"},children:"Create an account"})]})]})}const wt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Ns={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"},On={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"};function Ms({path:e}){const[n,r]=c(""),[o,i]=c(""),[l,s]=c(""),[d,p]=c(!1);return t("div",{style:{maxWidth:"400px",margin:"60px auto",padding:"0 16px"},children:[t("h1",{style:{fontSize:"24px",marginBottom:"24px",color:"#f0f6fc"},children:"Create your account"}),l&&t("div",{style:{color:"#f85149",marginBottom:"16px",padding:"12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:l}),t("form",{onSubmit:async u=>{u.preventDefault(),s(""),p(!0);try{const f=await dr(n,o);De(f.token),window.location.assign("/")}catch(f){s(f.message)}finally{p(!1)}},style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:n,onInput:u=>r(u.target.value),placeholder:"Username",style:Fn}),t("input",{value:o,onInput:u=>i(u.target.value),placeholder:"Email",type:"email",style:Fn}),t("button",{type:"submit",disabled:d||!n||!o,style:{...Os,opacity:d||!n||!o?.6:1},children:"Create account"}),t("p",{style:{color:"#8b949e",margin:0,fontSize:"12px"},children:"After creating your account, add a passkey in Settings for fast sign-in."})]}),t("p",{style:{marginTop:"16px",color:"#8b949e",fontSize:"13px"},children:["Already have an account? ",t("a",{href:"/login",style:{color:"#58a6ff"},children:"Sign in"})]})]})}const Fn={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Os={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"};function Fs(){return t("div",{children:[t(hi,{}),t("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:t(ir,{children:[t(br,{path:"/"}),t(As,{path:"/login"}),t(Ms,{path:"/signup"}),t(ts,{path:"/notifications"}),t(os,{path:"/settings"}),t(xs,{path:"/orgs/:org"}),t(ps,{path:"/:owner/:repo/settings"}),t($n,{path:"/:owner/:repo/tree/:ref/:path*"}),t($n,{path:"/:owner/:repo/blob/:ref/:path*"}),t(Xl,{path:"/:owner/:repo/commits/:ref"}),t(Dl,{path:"/:owner/:repo/diff/:spec"}),t(_s,{path:"/:owner/:repo/symbols/:ref"}),t(ws,{path:"/:owner/:repo/references/:ref"}),t(Ds,{path:"/:owner/:repo/callgraph/:ref"}),t(Ls,{path:"/:owner/:repo/entity-history/:ref"}),t(Pl,{path:"/:owner/:repo/pulls"}),t(Yl,{path:"/:owner/:repo/pulls/new"}),t(Ul,{path:"/:owner/:repo/pulls/:number"}),t(Ql,{path:"/:owner/:repo/issues"}),t(es,{path:"/:owner/:repo/issues/:number"}),t(Ai,{path:"/:owner/:repo"}),t(Ws,{default:!0})]})})]})}Nr(t(Fs,{}),document.getElementById("app"));
