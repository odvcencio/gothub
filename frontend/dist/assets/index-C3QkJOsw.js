(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=o(i);fetch(i.href,l)}})();var qe,Q,Vn,Ce,Yt,Kn,Xn,Yn,Nt,Rt,Ct,Jn,it={},lt=[],Fo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,je=Array.isArray;function me(e,n){for(var o in n)e[o]=n[o];return e}function Mt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Zn(e,n,o){var r,i,l,s={};for(l in n)l=="key"?r=n[l]:l=="ref"?i=n[l]:s[l]=n[l];if(arguments.length>2&&(s.children=arguments.length>3?qe.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)s[l]===void 0&&(s[l]=e.defaultProps[l]);return Me(e,s,r,i,null)}function Me(e,n,o,r,i){var l={type:e,props:n,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Vn,__i:-1,__u:0};return i==null&&Q.vnode!=null&&Q.vnode(l),l}function ye(e){return e.children}function Fe(e,n){this.props=e,this.context=n}function Pe(e,n){if(n==null)return e.__?Pe(e.__,e.__i+1):null;for(var o;n<e.__k.length;n++)if((o=e.__k[n])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Pe(e):null}function Ho(e){if(e.__P&&e.__d){var n=e.__v,o=n.__e,r=[],i=[],l=me({},n);l.__v=n.__v+1,Q.vnode&&Q.vnode(l),Ft(e.__P,l,n,e.__n,e.__P.namespaceURI,32&n.__u?[o]:null,r,o??Pe(n),!!(32&n.__u),i),l.__v=n.__v,l.__.__k[l.__i]=l,no(r,l,i),n.__e=n.__=null,l.__e!=o&&Qn(l)}}function Qn(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(n){if(n!=null&&n.__e!=null)return e.__e=e.__c.base=n.__e}),Qn(e)}function Tt(e){(!e.__d&&(e.__d=!0)&&Ce.push(e)&&!st.__r++||Yt!=Q.debounceRendering)&&((Yt=Q.debounceRendering)||Kn)(st)}function st(){for(var e,n=1;Ce.length;)Ce.length>n&&Ce.sort(Xn),e=Ce.shift(),n=Ce.length,Ho(e);st.__r=0}function eo(e,n,o,r,i,l,s,d,c,a,g){var u,h,f,y,_,S,m,x=r&&r.__k||lt,b=n.length;for(c=Oo(o,n,x,c,b),u=0;u<b;u++)(f=o.__k[u])!=null&&(h=f.__i!=-1&&x[f.__i]||it,f.__i=u,S=Ft(e,f,h,i,l,s,d,c,a,g),y=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Ht(h.ref,null,f),g.push(f.ref,f.__c||y,f)),_==null&&y!=null&&(_=y),(m=!!(4&f.__u))||h.__k===f.__k?c=to(f,c,e,m):typeof f.type=="function"&&S!==void 0?c=S:y&&(c=y.nextSibling),f.__u&=-7);return o.__e=_,c}function Oo(e,n,o,r,i){var l,s,d,c,a,g=o.length,u=g,h=0;for(e.__k=new Array(i),l=0;l<i;l++)(s=n[l])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[l]=Me(null,s,null,null,null):je(s)?s=e.__k[l]=Me(ye,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[l]=Me(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[l]=s,c=l+h,s.__=e,s.__b=e.__b+1,d=null,(a=s.__i=Uo(s,o,c,u))!=-1&&(u--,(d=o[a])&&(d.__u|=2)),d==null||d.__v==null?(a==-1&&(i>g?h--:i<g&&h++),typeof s.type!="function"&&(s.__u|=4)):a!=c&&(a==c-1?h--:a==c+1?h++:(a>c?h--:h++,s.__u|=4))):e.__k[l]=null;if(u)for(l=0;l<g;l++)(d=o[l])!=null&&(2&d.__u)==0&&(d.__e==r&&(r=Pe(d)),ro(d,d));return r}function to(e,n,o,r){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,n=to(i[l],n,o,r));return n}e.__e!=n&&(r&&(n&&e.type&&!n.parentNode&&(n=Pe(e)),o.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function Bt(e,n){return n=n||[],e==null||typeof e=="boolean"||(je(e)?e.some(function(o){Bt(o,n)}):n.push(e)),n}function Uo(e,n,o,r){var i,l,s,d=e.key,c=e.type,a=n[o],g=a!=null&&(2&a.__u)==0;if(a===null&&d==null||g&&d==a.key&&c==a.type)return o;if(r>(g?1:0)){for(i=o-1,l=o+1;i>=0||l<n.length;)if((a=n[s=i>=0?i--:l++])!=null&&(2&a.__u)==0&&d==a.key&&c==a.type)return s}return-1}function Jt(e,n,o){n[0]=="-"?e.setProperty(n,o??""):e[n]=o==null?"":typeof o!="number"||Fo.test(n)?o:o+"px"}function Xe(e,n,o,r,i){var l,s;e:if(n=="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(n in r)o&&n in o||Jt(e.style,n,"");if(o)for(n in o)r&&o[n]==r[n]||Jt(e.style,n,o[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(Yn,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+l]=o,o?r?o.u=r.u:(o.u=Nt,e.addEventListener(n,l?Ct:Rt,l)):e.removeEventListener(n,l?Ct:Rt,l);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&o==1?"":o))}}function Zt(e){return function(n){if(this.l){var o=this.l[n.type+e];if(n.t==null)n.t=Nt++;else if(n.t<o.u)return;return o(Q.event?Q.event(n):n)}}}function Ft(e,n,o,r,i,l,s,d,c,a){var g,u,h,f,y,_,S,m,x,b,v,k,D,L,R,N=n.type;if(n.constructor!==void 0)return null;128&o.__u&&(c=!!(32&o.__u),l=[d=n.__e=o.__e]),(g=Q.__b)&&g(n);e:if(typeof N=="function")try{if(m=n.props,x="prototype"in N&&N.prototype.render,b=(g=N.contextType)&&r[g.__c],v=g?b?b.props.value:g.__:r,o.__c?S=(u=n.__c=o.__c).__=u.__E:(x?n.__c=u=new N(m,v):(n.__c=u=new Fe(m,v),u.constructor=N,u.render=qo),b&&b.sub(u),u.state||(u.state={}),u.__n=r,h=u.__d=!0,u.__h=[],u._sb=[]),x&&u.__s==null&&(u.__s=u.state),x&&N.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=me({},u.__s)),me(u.__s,N.getDerivedStateFromProps(m,u.__s))),f=u.props,y=u.state,u.__v=n,h)x&&N.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),x&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(x&&N.getDerivedStateFromProps==null&&m!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(m,v),n.__v==o.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(m,u.__s,v)===!1){n.__v!=o.__v&&(u.props=m,u.state=u.__s,u.__d=!1),n.__e=o.__e,n.__k=o.__k,n.__k.some(function(I){I&&(I.__=n)}),lt.push.apply(u.__h,u._sb),u._sb=[],u.__h.length&&s.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(m,u.__s,v),x&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,y,_)})}if(u.context=v,u.props=m,u.__P=e,u.__e=!1,k=Q.__r,D=0,x)u.state=u.__s,u.__d=!1,k&&k(n),g=u.render(u.props,u.state,u.context),lt.push.apply(u.__h,u._sb),u._sb=[];else do u.__d=!1,k&&k(n),g=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++D<25);u.state=u.__s,u.getChildContext!=null&&(r=me(me({},r),u.getChildContext())),x&&!h&&u.getSnapshotBeforeUpdate!=null&&(_=u.getSnapshotBeforeUpdate(f,y)),L=g!=null&&g.type===ye&&g.key==null?oo(g.props.children):g,d=eo(e,je(L)?L:[L],n,o,r,i,l,s,d,c,a),u.base=n.__e,n.__u&=-161,u.__h.length&&s.push(u),S&&(u.__E=u.__=null)}catch(I){if(n.__v=null,c||l!=null)if(I.then){for(n.__u|=c?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;l[l.indexOf(d)]=null,n.__e=d}else{for(R=l.length;R--;)Mt(l[R]);Et(n)}else n.__e=o.__e,n.__k=o.__k,I.then||Et(n);Q.__e(I,n,o)}else l==null&&n.__v==o.__v?(n.__k=o.__k,n.__e=o.__e):d=n.__e=Go(o.__e,n,o,r,i,l,s,c,a);return(g=Q.diffed)&&g(n),128&n.__u?void 0:d}function Et(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Et))}function no(e,n,o){for(var r=0;r<o.length;r++)Ht(o[r],o[++r],o[++r]);Q.__c&&Q.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(l){l.call(i)})}catch(l){Q.__e(l,i.__v)}})}function oo(e){return typeof e!="object"||e==null||e.__b>0?e:je(e)?e.map(oo):me({},e)}function Go(e,n,o,r,i,l,s,d,c){var a,g,u,h,f,y,_,S=o.props||it,m=n.props,x=n.type;if(x=="svg"?i="http://www.w3.org/2000/svg":x=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(a=0;a<l.length;a++)if((f=l[a])&&"setAttribute"in f==!!x&&(x?f.localName==x:f.nodeType==3)){e=f,l[a]=null;break}}if(e==null){if(x==null)return document.createTextNode(m);e=document.createElementNS(i,x,m.is&&m),d&&(Q.__m&&Q.__m(n,l),d=!1),l=null}if(x==null)S===m||d&&e.data==m||(e.data=m);else{if(l=l&&qe.call(e.childNodes),!d&&l!=null)for(S={},a=0;a<e.attributes.length;a++)S[(f=e.attributes[a]).name]=f.value;for(a in S)f=S[a],a=="dangerouslySetInnerHTML"?u=f:a=="children"||a in m||a=="value"&&"defaultValue"in m||a=="checked"&&"defaultChecked"in m||Xe(e,a,null,f,i);for(a in m)f=m[a],a=="children"?h=f:a=="dangerouslySetInnerHTML"?g=f:a=="value"?y=f:a=="checked"?_=f:d&&typeof f!="function"||S[a]===f||Xe(e,a,f,S[a],i);if(g)d||u&&(g.__html==u.__html||g.__html==e.innerHTML)||(e.innerHTML=g.__html),n.__k=[];else if(u&&(e.innerHTML=""),eo(n.type=="template"?e.content:e,je(h)?h:[h],n,o,r,x=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,s,l?l[0]:o.__k&&Pe(o,0),d,c),l!=null)for(a=l.length;a--;)Mt(l[a]);d||(a="value",x=="progress"&&y==null?e.removeAttribute("value"):y!=null&&(y!==e[a]||x=="progress"&&!y||x=="option"&&y!=S[a])&&Xe(e,a,y,S[a],i),a="checked",_!=null&&_!=e[a]&&Xe(e,a,_,S[a],i))}return e}function Ht(e,n,o){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&n==null||(e.__u=e(n))}else e.current=n}catch(i){Q.__e(i,o)}}function ro(e,n,o){var r,i;if(Q.unmount&&Q.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Ht(r,null,n)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){Q.__e(l,n)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ro(r[i],n,o||typeof e.type!="function");o||Mt(e.__e),e.__c=e.__=e.__e=void 0}function qo(e,n,o){return this.constructor(e,o)}function jo(e,n,o){var r,i,l,s;n==document&&(n=document.documentElement),Q.__&&Q.__(e,n),i=(r=!1)?null:n.__k,l=[],s=[],Ft(n,e=n.__k=Zn(ye,null,[e]),i||it,it,n.namespaceURI,i?null:n.firstChild?qe.call(n.childNodes):null,l,i?i.__e:n.firstChild,r,s),no(l,e,s)}function Vo(e,n,o){var r,i,l,s,d=me({},e.props);for(l in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)l=="key"?r=n[l]:l=="ref"?i=n[l]:d[l]=n[l]===void 0&&s!=null?s[l]:n[l];return arguments.length>2&&(d.children=arguments.length>3?qe.call(arguments,2):o),Me(e.type,d,r||e.key,i||e.ref,null)}function Ko(e){function n(o){var r,i;return this.getChildContext||(r=new Set,(i={})[n.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(l){this.props.value!=l.value&&r.forEach(function(s){s.__e=!0,Tt(s)})},this.sub=function(l){r.add(l);var s=l.componentWillUnmount;l.componentWillUnmount=function(){r&&r.delete(l),s&&s.call(l)}}),o.children}return n.__c="__cC"+Jn++,n.__=e,n.Provider=n.__l=(n.Consumer=function(o,r){return o.children(r)}).contextType=n,n}qe=lt.slice,Q={__e:function(e,n,o,r){for(var i,l,s;n=n.__;)if((i=n.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(e)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(d){e=d}throw e}},Vn=0,Fe.prototype.setState=function(e,n){var o;o=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=me({},this.state),typeof e=="function"&&(e=e(me({},o),this.props)),e&&me(o,e),e!=null&&this.__v&&(n&&this._sb.push(n),Tt(this))},Fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Tt(this))},Fe.prototype.render=ye,Ce=[],Kn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Xn=function(e,n){return e.__v.__b-n.__v.__b},st.__r=0,Yn=/(PointerCapture)$|Capture$/i,Nt=0,Rt=Zt(!1),Ct=Zt(!0),Jn=0;var Xo=0;function t(e,n,o,r,i,l){n||(n={});var s,d,c=n;if("ref"in c)for(d in c={},n)d=="ref"?s=n[d]:c[d]=n[d];var a={type:e,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Xo,__i:-1,__u:0,__source:i,__self:l};if(typeof e=="function"&&(s=e.defaultProps))for(d in s)c[d]===void 0&&(c[d]=s[d]);return Q.vnode&&Q.vnode(a),a}var Oe,oe,pt,Qt,Ue=0,io=[],ie=Q,en=ie.__b,tn=ie.__r,nn=ie.diffed,on=ie.__c,rn=ie.unmount,ln=ie.__;function Ot(e,n){ie.__h&&ie.__h(oe,e,Ue||n),Ue=0;var o=oe.__H||(oe.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({}),o.__[e]}function p(e){return Ue=1,Yo(so,e)}function Yo(e,n,o){var r=Ot(Oe++,2);if(r.t=e,!r.__c&&(r.__=[so(void 0,n),function(d){var c=r.__N?r.__N[0]:r.__[0],a=r.t(c,d);c!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=oe,!oe.__f)){var i=function(d,c,a){if(!r.__c.__H)return!0;var g=r.__c.__H.__.filter(function(h){return h.__c});if(g.every(function(h){return!h.__N}))return!l||l.call(this,d,c,a);var u=r.__c.props!==d;return g.some(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(u=!0)}}),l&&l.call(this,d,c,a)||u};oe.__f=!0;var l=oe.shouldComponentUpdate,s=oe.componentWillUpdate;oe.componentWillUpdate=function(d,c,a){if(this.__e){var g=l;l=void 0,i(d,c,a),l=g}s&&s.call(this,d,c,a)},oe.shouldComponentUpdate=i}return r.__N||r.__}function H(e,n){var o=Ot(Oe++,3);!ie.__s&&lo(o.__H,n)&&(o.__=e,o.u=n,oe.__H.__h.push(o))}function Ie(e){return Ue=5,ce(function(){return{current:e}},[])}function ce(e,n){var o=Ot(Oe++,7);return lo(o.__H,n)&&(o.__=e(),o.__H=n,o.__h=e),o.__}function Jo(e,n){return Ue=8,ce(function(){return e},n)}function Zo(){for(var e;e=io.shift();){var n=e.__H;if(e.__P&&n)try{n.__h.some(nt),n.__h.some(Lt),n.__h=[]}catch(o){n.__h=[],ie.__e(o,e.__v)}}}ie.__b=function(e){oe=null,en&&en(e)},ie.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),ln&&ln(e,n)},ie.__r=function(e){tn&&tn(e),Oe=0;var n=(oe=e.__c).__H;n&&(pt===oe?(n.__h=[],oe.__h=[],n.__.some(function(o){o.__N&&(o.__=o.__N),o.u=o.__N=void 0})):(n.__h.some(nt),n.__h.some(Lt),n.__h=[],Oe=0)),pt=oe},ie.diffed=function(e){nn&&nn(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(io.push(n)!==1&&Qt===ie.requestAnimationFrame||((Qt=ie.requestAnimationFrame)||Qo)(Zo)),n.__H.__.some(function(o){o.u&&(o.__H=o.u),o.u=void 0})),pt=oe=null},ie.__c=function(e,n){n.some(function(o){try{o.__h.some(nt),o.__h=o.__h.filter(function(r){return!r.__||Lt(r)})}catch(r){n.some(function(i){i.__h&&(i.__h=[])}),n=[],ie.__e(r,o.__v)}}),on&&on(e,n)},ie.unmount=function(e){rn&&rn(e);var n,o=e.__c;o&&o.__H&&(o.__H.__.some(function(r){try{nt(r)}catch(i){n=i}}),o.__H=void 0,n&&ie.__e(n,o.__v))};var sn=typeof requestAnimationFrame=="function";function Qo(e){var n,o=function(){clearTimeout(r),sn&&cancelAnimationFrame(n),setTimeout(e)},r=setTimeout(o,35);sn&&(n=requestAnimationFrame(o))}function nt(e){var n=oe,o=e.__c;typeof o=="function"&&(e.__c=void 0,o()),oe=n}function Lt(e){var n=oe;e.__c=e.__(),oe=n}function lo(e,n){return!e||e.length!==n.length||n.some(function(o,r){return o!==e[r]})}function so(e,n){return typeof n=="function"?n(e):n}var er={};function Ye(e,n){for(var o in n)e[o]=n[o];return e}function tr(e,n,o){var r,i=/(?:\?([^#]*))?(#.*)?$/,l=e.match(i),s={};if(l&&l[1])for(var d=l[1].split("&"),c=0;c<d.length;c++){var a=d[c].split("=");s[decodeURIComponent(a[0])]=decodeURIComponent(a.slice(1).join("="))}e=Dt(e.replace(i,"")),n=Dt(n||"");for(var g=Math.max(e.length,n.length),u=0;u<g;u++)if(n[u]&&n[u].charAt(0)===":"){var h=n[u].replace(/(^:|[+*?]+$)/g,""),f=(n[u].match(/[+*?]+$/)||er)[0]||"",y=~f.indexOf("+"),_=~f.indexOf("*"),S=e[u]||"";if(!S&&!_&&(f.indexOf("?")<0||y)){r=!1;break}if(s[h]=decodeURIComponent(S),y||_){s[h]=e.slice(u).map(decodeURIComponent).join("/");break}}else if(n[u]!==e[u]){r=!1;break}return(o.default===!0||r!==!1)&&s}function nr(e,n){return e.rank<n.rank?1:e.rank>n.rank?-1:e.index-n.index}function or(e,n){return e.index=n,e.rank=(function(o){return o.props.default?0:Dt(o.props.path).map(rr).join("")})(e),e.props}function Dt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function rr(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var ir={},Ee=[],dn=[],ue=null,ao={url:Ut()},lr=Ko(ao);function Ut(){var e;return""+((e=ue&&ue.location?ue.location:ue&&ue.getCurrentLocation?ue.getCurrentLocation():typeof location<"u"?location:ir).pathname||"")+(e.search||"")}function sr(e,n){return n===void 0&&(n=!1),typeof e!="string"&&e.url&&(n=e.replace,e=e.url),(function(o){for(var r=Ee.length;r--;)if(Ee[r].canRoute(o))return!0;return!1})(e)&&(function(o,r){r===void 0&&(r="push"),ue&&ue[r]?ue[r](o):typeof history<"u"&&history[r+"State"]&&history[r+"State"](null,null,o)})(e,n?"replace":"push"),co(e)}function co(e){for(var n=!1,o=0;o<Ee.length;o++)Ee[o].routeTo(e)&&(n=!0);return n}function dr(e){if(e&&e.getAttribute){var n=e.getAttribute("href"),o=e.getAttribute("target");if(n&&n.match(/^\//g)&&(!o||o.match(/^_?self$/i)))return sr(n)}}function ar(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function cr(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var n=e.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(dr(n))return ar(e)}while(n=n.parentNode)}}var an=!1;function po(e){e.history&&(ue=e.history),this.state={url:e.url||Ut()}}Ye(po.prototype=new Fe,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var n=Bt(this.props.children);return this.g(n,e)!==void 0},routeTo:function(e){this.setState({url:e});var n=this.canRoute(e);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;an||(an=!0,ue||addEventListener("popstate",function(){co(Ut())}),addEventListener("click",cr)),Ee.push(this),ue&&(this.u=ue.listen(function(n){var o=n.location||n;e.routeTo(""+(o.pathname||"")+(o.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),Ee.splice(Ee.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,n){e=e.filter(or).sort(nr);for(var o=0;o<e.length;o++){var r=e[o],i=tr(n,r.props.path,r.props);if(i)return[r,i]}},render:function(e,n){var o,r,i=e.onChange,l=n.url,s=this.c,d=this.g(Bt(e.children),l);if(d&&(r=Vo(d[0],Ye(Ye({url:l,matches:o=d[1]},o),{key:void 0,ref:void 0}))),l!==(s&&s.url)){Ye(ao,s=this.c={url:l,previous:s&&s.url,current:r,path:r?r.props.path:null,matches:o}),s.router=this,s.active=r?[r]:[];for(var c=dn.length;c--;)dn[c]({});typeof i=="function"&&i(s)}return Zn(lr.Provider,{value:s},r)}});const fo="/api/v1",It="gothub:auth-token-change";let We=localStorage.getItem("gothub_token"),dt=!1;function Le(e){We=e,e?localStorage.setItem("gothub_token",e):localStorage.removeItem("gothub_token"),typeof window<"u"&&window.dispatchEvent(new Event(It))}function pe(){return We}function uo(e){if(typeof window>"u")return()=>{};const n=()=>e();return window.addEventListener(It,n),()=>window.removeEventListener(It,n)}function pr(e){return e.startsWith("/auth/")}function ho(){if(typeof window>"u")return"/login";const e=`${window.location.pathname}${window.location.search}${window.location.hash}`,n=window.location.pathname.startsWith("/login")?"/":e||"/",o=new URLSearchParams({session:"expired"});return n!=="/login"&&o.set("returnTo",n),`/login?${o.toString()}`}async function B(e,n,o){const r={"Content-Type":"application/json"};We&&(r.Authorization=`Bearer ${We}`);const i=await fetch(`${fo}${n}`,{method:e,headers:r,body:o?JSON.stringify(o):void 0});if(i.status===401&&!pr(n))throw Le(null),typeof window<"u"&&!dt&&!window.location.pathname.startsWith("/login")&&(dt=!0,window.location.assign(ho())),new Error("authentication required");if(!i.ok){const l=await i.json().catch(()=>({error:i.statusText}));throw new Error(l.error||i.statusText)}if(i.status!==204)return i.json()}const go=(e,n)=>B("POST","/auth/register",{username:e,email:n}),fr=e=>B("POST","/auth/magic/request",{email:e}),ur=e=>B("POST","/auth/magic/verify",{token:e}),hr=()=>B("POST","/auth/webauthn/register/begin"),gr=(e,n)=>B("POST","/auth/webauthn/register/finish",{session_id:e,credential:n}),xo=e=>B("POST","/auth/webauthn/login/begin",{username:e}),mo=(e,n)=>B("POST","/auth/webauthn/login/finish",{session_id:e,credential:n}),bo=()=>B("GET","/auth/capabilities"),xr=e=>B("POST","/interest-signups",e),yo=()=>B("GET","/user"),mr=(e,n,o)=>{const r=new URLSearchParams;e&&r.set("unread","true");const i=r.toString();return B("GET",`/notifications${i?"?"+i:""}`)},br=()=>B("GET","/notifications/unread-count"),yr=e=>B("POST",`/notifications/${e}/read`),vr=()=>B("POST","/notifications/read-all"),_r=(e=1,n=10,o="updated")=>B("GET",`/explore/repos?page=${e}&per_page=${n}&sort=${o}`),Sr=(e,n,o)=>B("POST","/repos",{name:e,description:n,private:o}),kr=(e,n,o)=>B("POST",`/repos/${e}/${n}/forks`,o?{name:o}:void 0),wr=(e,n,o,r)=>{const l=new URLSearchParams().toString();return B("GET",`/repos/${e}/${n}/forks${l?"?"+l:""}`).then(s=>Array.isArray(s)?s:[])},$r=(e,n)=>B("GET",`/repos/${e}/${n}/runners/tokens`),zr=(e,n,o)=>B("POST",`/repos/${e}/${n}/runners/tokens`,o),Rr=(e,n,o)=>B("DELETE",`/repos/${e}/${n}/runners/tokens/${o}`),Ge=(e,n)=>B("GET",`/repos/${e}/${n}`),Cr=()=>B("GET","/user/repos").then(e=>Array.isArray(e)?e:[]),cn=()=>B("GET","/user/repo-policy"),Tr=(e,n)=>B("GET",`/repos/${e}/${n}/stars`),Br=(e,n)=>B("PUT",`/repos/${e}/${n}/star`),Er=(e,n)=>B("DELETE",`/repos/${e}/${n}/star`),Gt=(e,n,o,r)=>B("GET",`/repos/${e}/${n}/tree/${o}${r?"/"+r:""}`),vo=(e,n)=>B("GET",`/repos/${e}/${n}/branches`),Lr=(e,n,o,r)=>B("GET",`/repos/${e}/${n}/blob/${o}/${r}`),Dr=(e,n,o)=>B("GET",`/repos/${e}/${n}/commits/${o}`),_o=(e,n,o)=>B("GET",`/repos/${e}/${n}/index/status?ref=${encodeURIComponent(o)}`),Ir=(e,n,o,r)=>B("GET",`/repos/${e}/${n}/entities/${o}/${r}`),Pr=(e,n,o,r,i,l)=>{const s=new URLSearchParams({key:r});return i&&s.set("path",i),s.set("limit",String(l)),B("GET",`/repos/${e}/${n}/entity-blame/${o}?${s.toString()}`)},Wr=(e,n,o)=>B("GET",`/repos/${e}/${n}/diff/${o}`),Ar=(e,n,o)=>B("POST",`/repos/${e}/${n}/pulls`,o),Pt=(e,n,o,r,i)=>{const l=new URLSearchParams;o&&l.set("state",o),r&&r>0&&l.set("page",String(r)),i&&i>0&&l.set("per_page",String(i));const s=l.toString();return B("GET",`/repos/${e}/${n}/pulls${s?"?"+s:""}`)},ft=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}`),Nr=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/diff`),Mr=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/merge-preview`),ut=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/merge-gate`),Fr=(e,n,o)=>B("POST",`/repos/${e}/${n}/pulls/${o}/merge`),Hr=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/comments`),Or=(e,n,o,r)=>B("POST",`/repos/${e}/${n}/pulls/${o}/comments`,r),Ur=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/reviews`),Gr=(e,n,o,r)=>B("POST",`/repos/${e}/${n}/pulls/${o}/reviews`,r),pn=(e,n,o)=>B("GET",`/repos/${e}/${n}/pulls/${o}/checks`),qr=(e,n,o)=>B("GET",`/repos/${e}/${n}/branch-protection/${o}`),jr=(e,n,o,r)=>B("PUT",`/repos/${e}/${n}/branch-protection/${o}`,r),Vr=(e,n,o)=>B("DELETE",`/repos/${e}/${n}/branch-protection/${o}`),Kr=(e,n,o)=>B("POST",`/repos/${e}/${n}/webhooks`,o),Xr=(e,n)=>B("GET",`/repos/${e}/${n}/webhooks`),Yr=(e,n,o)=>B("DELETE",`/repos/${e}/${n}/webhooks/${o}`),fn=(e,n,o)=>B("GET",`/repos/${e}/${n}/webhooks/${o}/deliveries`),Jr=(e,n,o)=>B("POST",`/repos/${e}/${n}/webhooks/${o}/ping`),Zr=(e,n,o,r)=>B("POST",`/repos/${e}/${n}/webhooks/${o}/deliveries/${r}/redeliver`),Qr=()=>B("GET","/user/ssh-keys"),ei=(e,n)=>B("POST","/user/ssh-keys",{name:e,public_key:n}),ti=e=>B("DELETE",`/user/ssh-keys/${e}`),ni=()=>B("GET","/user/passkeys"),oi=(e,n)=>B("GET",`/repos/${e}/${n}/collaborators`),ri=(e,n,o,r)=>B("POST",`/repos/${e}/${n}/collaborators`,{username:o,role:r}),ii=(e,n,o)=>B("DELETE",`/repos/${e}/${n}/collaborators/${o}`),li=(e,n)=>B("DELETE",`/repos/${e}/${n}`),qt=(e,n,o,r)=>{const i=new URLSearchParams;r&&i.set("q",r);const l=i.toString();return B("GET",`/repos/${e}/${n}/symbols/${o}${l?"?"+l:""}`)},So=(e,n,o,r)=>B("GET",`/repos/${e}/${n}/references/${o}?name=${encodeURIComponent(r)}`),si=(e,n,o,r,i,l)=>{const s=new URLSearchParams({symbol:r});return i&&s.set("depth",String(i)),l&&s.set("reverse","true"),B("GET",`/repos/${e}/${n}/callgraph/${o}?${s.toString()}`)},ko=(e,n,o,r)=>{const i=new URLSearchParams;return r.stableId&&i.set("stable_id",r.stableId),r.name&&i.set("name",r.name),r.bodyHash&&i.set("body_hash",r.bodyHash),r.limit&&r.limit>0&&i.set("limit",String(r.limit)),B("GET",`/repos/${e}/${n}/entity-history/${o}?${i.toString()}`)},di=(e,n,o)=>B("GET",`/repos/${e}/${n}/semver/${o}`),ai=(e,n,o)=>B("POST",`/repos/${e}/${n}/issues`,o),ci=(e,n,o,r,i)=>{const l=new URLSearchParams;o&&l.set("state",o),r&&r>0&&l.set("page",String(r)),l.set("per_page",String(i));const s=l.toString();return B("GET",`/repos/${e}/${n}/issues${s?"?"+s:""}`)},pi=(e,n,o)=>B("GET",`/repos/${e}/${n}/issues/${o}`),fi=(e,n,o,r)=>B("PATCH",`/repos/${e}/${n}/issues/${o}`,r),ui=(e,n,o,r)=>B("POST",`/repos/${e}/${n}/issues/${o}/comments`,r),hi=(e,n,o)=>B("GET",`/repos/${e}/${n}/issues/${o}/comments`);function gi(e,n,o){const r=new AbortController,i=`/repos/${e}/${n}/events`,l={Accept:"text/event-stream"};We&&(l.Authorization=`Bearer ${We}`);const s=c=>{var a;r.signal.aborted||(a=o.onError)==null||a.call(o,c)},d=(c,a)=>{if(a.length===0)return;const g=a.join(`
`);try{const u=JSON.parse(g),h=c||u.type||"message";o.onEvent({...u,type:h})}catch{s(new Error("failed to parse repository event stream payload"))}};return(async()=>{var c;try{const a=await fetch(`${fo}${i}`,{method:"GET",headers:l,signal:r.signal});if(a.status===401)throw Le(null),typeof window<"u"&&!dt&&!window.location.pathname.startsWith("/login")&&(dt=!0,window.location.assign(ho())),new Error("authentication required");if(!a.ok){let _=a.statusText;try{const S=await a.json();S!=null&&S.error&&(_=S.error)}catch{}throw new Error(_||"failed to open event stream")}if(!a.body)throw new Error("event stream body missing");(c=o.onOpen)==null||c.call(o);const g=new TextDecoder,u=a.body.getReader();let h="",f="",y=[];for(;!r.signal.aborted;){const{value:_,done:S}=await u.read();if(S)break;for(h+=g.decode(_,{stream:!0});;){const m=h.indexOf(`
`);if(m<0)break;let x=h.slice(0,m);if(h=h.slice(m+1),x.endsWith("\r")&&(x=x.slice(0,-1)),x===""){d(f,y),f="",y=[];continue}if(!x.startsWith(":")){if(x.startsWith("event:")){f=x.slice(6).trim();continue}x.startsWith("data:")&&y.push(x.slice(5).trimStart())}}}}catch(a){if(r.signal.aborted)return;s(a instanceof Error?a:new Error((a==null?void 0:a.message)||"event stream failed"))}})(),{close:()=>r.abort()}}const un={color:"#c9d1d9",fontSize:"14px",textDecoration:"none"};function xi(){const[e,n]=p(()=>pe()),o=!!e,[r,i]=p(0),[l,s]=p("");return H(()=>uo(()=>n(pe())),[]),H(()=>{if(!o){i(0),s("");return}br().then(d=>{i(d.count),s("")}).catch(d=>{i(0),s((d==null?void 0:d.message)||"Unable to load unread notification count")})},[o]),t("header",{style:{background:"#161b22",borderBottom:"1px solid #30363d",padding:"12px 20px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("a",{href:"/",style:{fontSize:"20px",fontWeight:"bold",color:"#f0f6fc"},children:"gothub"}),t("nav",{style:{display:"flex",gap:"16px",alignItems:"center"},children:o?t(ye,{children:[t("a",{href:"/notifications",style:un,children:["Notifications",r>0&&t("span",{style:{background:"#1f6feb",color:"#fff",borderRadius:"10px",padding:"1px 6px",fontSize:"11px",marginLeft:"4px"},children:r})]}),l&&t("span",{title:l,style:{color:"#d29922",fontSize:"12px"},children:"Notification count unavailable"}),t("a",{href:"/settings",style:un,children:"Settings"}),t("button",{onClick:()=>{Le(null),location.reload()},style:{background:"none",border:"1px solid #30363d",color:"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:"pointer"},children:"Sign out"})]}):t("a",{href:"/login",style:{color:"#c9d1d9"},children:"Sign in"})})]})}function mi(e){const n=e.replace(/-/g,"+").replace(/_/g,"/"),o=n.length%4,r=o===0?n:n+"=".repeat(4-o),i=atob(r),l=new Uint8Array(i.length);for(let s=0;s<i.length;s++)l[s]=i.charCodeAt(s);return l}function we(e){const n=new Uint8Array(e);let o="";for(let r=0;r<n.length;r++)o+=String.fromCharCode(n[r]);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}function He(e){if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(typeof e=="string")return mi(e);throw new Error("invalid binary value in WebAuthn options")}function jt(){return typeof window<"u"&&typeof window.PublicKeyCredential<"u"}function bi(e){var o;const n={...(e==null?void 0:e.publicKey)??e};return n.challenge=He(n.challenge),((o=n.user)==null?void 0:o.id)!==void 0&&(n.user={...n.user,id:He(n.user.id)}),Array.isArray(n.excludeCredentials)&&(n.excludeCredentials=n.excludeCredentials.map(r=>({...r,id:He(r.id)}))),n}function yi(e){const n={...(e==null?void 0:e.publicKey)??e};return n.challenge=He(n.challenge),Array.isArray(n.allowCredentials)&&(n.allowCredentials=n.allowCredentials.map(o=>({...o,id:He(o.id)}))),n}async function vi(e){var r;const n=await navigator.credentials.create({publicKey:bi(e)});if(!n)throw new Error("passkey creation was cancelled");const o=n.response;return{id:n.id,rawId:we(n.rawId),type:n.type,authenticatorAttachment:n.authenticatorAttachment,response:{clientDataJSON:we(o.clientDataJSON),attestationObject:we(o.attestationObject)},clientExtensionResults:((r=n.getClientExtensionResults)==null?void 0:r.call(n))||{}}}async function wo(e){var r;const n=await navigator.credentials.get({publicKey:yi(e)});if(!n)throw new Error("passkey sign-in was cancelled");const o=n.response;return{id:n.id,rawId:we(n.rawId),type:n.type,authenticatorAttachment:n.authenticatorAttachment,response:{clientDataJSON:we(o.clientDataJSON),authenticatorData:we(o.authenticatorData),signature:we(o.signature),userHandle:o.userHandle?we(o.userHandle):null},clientExtensionResults:((r=n.getClientExtensionResults)==null?void 0:r.call(n))||{}}}function _i(){return t("div",{children:[t(Si,{}),t($i,{}),t(zi,{}),t(Ri,{})]})}function Si(){return t("section",{style:{display:"flex",gap:"48px",alignItems:"flex-start",flexWrap:"wrap",padding:"48px 0 32px"},children:[t("div",{style:{flex:"1 1 400px",minWidth:"300px"},children:[t("h1",{style:{fontSize:"64px",fontWeight:900,color:"#f0f6fc",lineHeight:1.05,margin:"0 0 28px"},children:"GOT HUB?"}),t("div",{style:{color:"#8b949e",fontSize:"18px",lineHeight:1.7,marginBottom:"24px"},children:[t("p",{style:{margin:"0 0 4px"},children:"Your code's conflicted."}),t("p",{style:{margin:"0 0 4px"},children:"Your merges are lying."}),t("p",{style:{margin:"0 0 16px"},children:"Your diffs are screaming."})]}),t("div",{style:{marginBottom:"24px"},children:[t("span",{style:{fontSize:"22px",fontWeight:700,color:"#58a6ff"},children:"GotHub.dev"}),t("div",{style:{width:"48px",height:"3px",background:"#1f6feb",borderRadius:"2px",margin:"6px 0 16px"}})]}),t("ul",{style:{listStyle:"none",padding:0,margin:"0 0 20px",color:"#c9d1d9",fontSize:"15px",lineHeight:1.8},children:[t("li",{children:"Merges functions, not lines."}),t("li",{children:`Imports don't "conflict." They combine.`}),t("li",{children:"Refactors don't look like chaos."}),t("li",{children:"Your repo, but with a spine."})]}),t("p",{style:{color:"#8b949e",fontSize:"14px",margin:"0 0 20px",maxWidth:"480px"},children:"A GotHub repo parses code as real structures â€” functions, types, imports â€” so changes actually make sense."}),t("p",{style:{fontSize:"18px",fontWeight:700,color:"#f0f6fc",margin:0},children:"GotHub. Got VCS?"})]}),t("div",{style:{flex:"0 0 340px",minWidth:"300px"},children:t(ki,{})})]})}function ki(){const[e,n]=p(""),[o,r]=p(""),[i,l]=p(""),[s,d]=p(""),[c,a]=p(!1),[g,u]=p(!0),[h,f]=p(""),y=jt()&&g;H(()=>{bo().then(m=>u(!!m.passkey_enabled)).catch(()=>{})},[]);const _=async m=>{m.preventDefault(),l(""),d(""),a(!0);try{const x=await go(e,o);if(x.token){Le(x.token),window.location.assign("/");return}if(x.requires_email_verification){const b=x.magic_token?`Account created. Verify email with token: ${x.magic_token}`:"Account created. Check your inbox for a magic link, then sign in.";d(b);return}l("account created but no sign-in token was returned")}catch(x){l(x.message)}finally{a(!1)}},S=async m=>{m.preventDefault(),l(""),a(!0);try{const x=await xo(h),b=await wo(x.options),v=await mo(x.session_id,b);if(!v.token)throw new Error("sign-in token missing from response");Le(v.token),window.location.assign("/")}catch(x){l(x.message||"Passkey sign-in failed")}finally{a(!1)}};return t("div",{style:{background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"24px"},children:[t("h2",{style:{fontSize:"18px",color:"#f0f6fc",margin:"0 0 16px"},children:"Create your account"}),s&&t("div",{style:{color:"#3fb950",marginBottom:"12px",padding:"10px",background:"#132a1d",border:"1px solid #3fb950",borderRadius:"6px",fontSize:"13px"},children:s}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px",padding:"10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:i}),t("form",{onSubmit:_,style:{display:"flex",flexDirection:"column",gap:"10px",marginBottom:"14px"},children:[t("input",{value:e,onInput:m=>n(m.target.value),placeholder:"Username",style:ot}),t("input",{value:o,onInput:m=>r(m.target.value),placeholder:"Email",type:"email",style:ot}),t("button",{type:"submit",disabled:c||!e||!o,style:{...Ci,opacity:c||!e||!o?.6:1},children:"Create account"})]}),t("div",{style:{borderTop:"1px solid #30363d",paddingTop:"12px"},children:t("form",{onSubmit:S,style:{display:"flex",gap:"8px"},children:[t("input",{value:h,onInput:m=>f(m.target.value),placeholder:"Username",style:{...ot,flex:1}}),t("button",{type:"submit",disabled:c||!h||!y,style:{...$o,opacity:c||!h||!y?.6:1,whiteSpace:"nowrap",width:"auto",padding:"10px 14px"},children:"Passkey sign-in"})]})}),t("p",{style:{color:"#8b949e",fontSize:"12px",margin:"12px 0 0",textAlign:"center"},children:["Already have an account? ",t("a",{href:"/login",style:{color:"#58a6ff"},children:"Sign in"})]})]})}const wi=[{title:"Structural Blame",desc:"Attribution at the function level, not line-by-line. See who wrote each entity and when it last changed."},{title:"Call Graphs",desc:"Explore caller/callee relationships across your codebase. Understand impact before you merge."},{title:"Entity-Aware PRs",desc:"PR diffs that show which functions were added, modified, or removed â€” not just which lines changed."},{title:"SemVer Impact",desc:"Automatic semantic versioning recommendations based on structural changes to your public API."}];function $i(){return t("section",{style:{padding:"32px 0"},children:[t("h2",{style:{fontSize:"28px",fontWeight:700,color:"#f0f6fc",marginBottom:"20px"},children:"What makes GotHub different"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:"16px"},children:wi.map(e=>t("div",{style:{background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"20px"},children:[t("h3",{style:{fontSize:"16px",fontWeight:700,color:"#f0f6fc",margin:"0 0 8px"},children:e.title}),t("p",{style:{fontSize:"14px",color:"#8b949e",margin:0,lineHeight:1.5},children:e.desc})]},e.title))})]})}function zi(){const[e,n]=p([]),[o,r]=p(!0);return H(()=>{_r(1,6,"created").then(n).catch(()=>{}).finally(()=>r(!1))},[]),o?t("section",{style:{padding:"32px 0",color:"#8b949e"},children:"Loading repositories..."}):e.length===0?null:t("section",{style:{padding:"32px 0"},children:[t("h2",{style:{fontSize:"28px",fontWeight:700,color:"#f0f6fc",marginBottom:"20px"},children:"Explore public repos"}),t("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"12px"},children:e.map(i=>t("a",{href:`/${i.owner_name}/${i.name}`,style:{display:"block",background:"#161b22",border:"1px solid #30363d",borderRadius:"8px",padding:"16px",textDecoration:"none",color:"inherit"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"6px"},children:[t("span",{style:{fontSize:"15px",fontWeight:600,color:"#58a6ff"},children:[i.owner_name,"/",i.name]}),i.star_count>0&&t("span",{style:{fontSize:"12px",color:"#8b949e"},children:[i.star_count," stars"]})]}),i.description&&t("p",{style:{fontSize:"13px",color:"#8b949e",margin:0,lineHeight:1.4},children:i.description})]},i.id))})]})}function Ri(){const[e,n]=p(""),[o,r]=p(!1),[i,l]=p("");return t("section",{style:{padding:"48px 0",textAlign:"center",borderTop:"1px solid #21262d"},children:[t("h2",{style:{fontSize:"24px",fontWeight:700,color:"#f0f6fc",marginBottom:"12px"},children:"Ready to try entity-aware version control?"}),t("a",{href:"/signup",style:{display:"inline-block",background:"#238636",color:"#fff",padding:"12px 32px",borderRadius:"6px",fontWeight:"bold",fontSize:"16px",textDecoration:"none",marginBottom:"32px"},children:"Get started"}),t("div",{style:{maxWidth:"400px",margin:"0 auto"},children:[o?t("p",{style:{color:"#3fb950",fontSize:"14px"},children:"Thanks! We'll keep you posted."}):t("form",{onSubmit:async d=>{d.preventDefault(),l("");try{await xr({email:e,source:"landing_footer"}),r(!0)}catch(c){l(c.message)}},style:{display:"flex",gap:"8px"},children:[t("input",{value:e,onInput:d=>n(d.target.value),placeholder:"Email for updates",type:"email",style:{...ot,flex:1}}),t("button",{type:"submit",disabled:!e,style:{...$o,opacity:e?1:.6,whiteSpace:"nowrap",width:"auto",padding:"10px 16px"},children:"Join mailing list"})]}),i&&t("p",{style:{color:"#f85149",fontSize:"13px",marginTop:"8px"},children:i})]})]})}const ot={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Ci={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"},$o={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"};function zo(){const[e,n]=p(()=>pe());return H(()=>uo(()=>n(pe())),[]),!e?t(_i,{}):t(Ti,{})}function Ti(){const[e,n]=p([]),[o,r]=p(""),[i,l]=p(()=>!Bi()),[s,d]=p(null),[c,a]=p([]),[g,u]=p(0),[h,f]=p(!1),[y,_]=p(""),[S,m]=p(""),x=k=>{const D=k.trim();D&&m(L=>L?L.includes(D)?L:`${L} â€¢ ${D}`:D)};H(()=>{(async()=>{try{const D=await Cr();n(Array.isArray(D)?D:[]),r("")}catch(D){r(D.message||"failed to load dashboard")}})()},[]);const b=async()=>{if(!h){l(!0),_(""),m(""),f(!0);try{const k=await Ei(e,x);if(!k){d(null),a([]),_("Create or fork a repository first, then run Try Demo again.");return}d(k),a(Li(k)),u(0),hn()}catch(k){_(k.message||"failed to prepare onboarding demo")}finally{f(!1)}}},v=()=>{l(!1),hn()};return t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc"},children:"Your repositories"}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("button",{onClick:b,disabled:h,style:{background:"#1f6feb",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:h?"not-allowed":"pointer",fontWeight:"bold",opacity:h?.7:1},children:h?"Preparing demo...":"Try Demo"}),t("a",{href:"/new",style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"bold",textDecoration:"none",display:"inline-block"},children:"New"})]})]}),o&&t("div",{style:{color:"#f85149",marginBottom:"12px",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:o}),i&&t("div",{style:{border:"1px solid #1f6feb",borderRadius:"8px",padding:"16px",marginBottom:"20px",background:"#111b2e"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px",flexWrap:"wrap"},children:[t("div",{children:[t("div",{style:{color:"#58a6ff",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"4px",fontWeight:"bold"},children:"First-run guide"}),t("h3",{style:{color:"#f0f6fc",margin:0,fontSize:"18px"},children:"Walk structural review in 4 steps"}),t("p",{style:{color:"#8b949e",margin:"8px 0 0",fontSize:"13px"},children:"Jump to PR impact, semver recommendations, call graph navigation, and structural blame with one curated flow."}),s&&t("p",{style:{color:"#8b949e",margin:"8px 0 0",fontSize:"12px"},children:["Using ",t("a",{href:`/${s.owner}/${s.repo}`,style:{color:"#58a6ff"},children:[s.owner,"/",s.repo]})," on ",t("code",{style:{background:"#0d1117",borderRadius:"4px",padding:"2px 4px"},children:s.ref})]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("button",{onClick:b,disabled:h,style:{background:"#1f6feb",color:"#fff",border:"none",padding:"7px 14px",borderRadius:"6px",cursor:h?"not-allowed":"pointer",fontWeight:"bold",opacity:h?.7:1},children:h?"Loading...":c.length>0?"Refresh path":"Try Demo"}),t("button",{onClick:v,style:{background:"transparent",color:"#8b949e",border:"1px solid #30363d",padding:"7px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Close"})]})]}),y&&t("div",{style:{marginTop:"12px",color:"#f85149",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},children:y}),S&&t("div",{style:{marginTop:"12px",color:"#d29922",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:S}),c.length>0&&!h&&t("div",{style:{marginTop:"14px",display:"grid",gap:"10px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px"},children:["Step ",g+1," of ",c.length]}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",background:"#0d1117",padding:"12px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold",marginBottom:"6px"},children:c[g].title}),t("div",{style:{color:"#8b949e",fontSize:"13px",marginBottom:"10px"},children:c[g].description}),c[g].hint&&t("div",{style:{color:"#d29922",fontSize:"12px",marginBottom:"10px"},children:c[g].hint}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("a",{href:c[g].href,style:Wi,children:c[g].cta}),t("button",{onClick:()=>u(k=>Math.max(0,k-1)),disabled:g===0,style:{...gn,opacity:g===0?.6:1},children:"Previous"}),t("button",{onClick:()=>u(k=>Math.min(c.length-1,k+1)),disabled:g>=c.length-1,style:{...gn,opacity:g>=c.length-1?.6:1},children:"Next"})]})]}),t("div",{style:{display:"grid",gap:"6px"},children:c.map((k,D)=>t("button",{onClick:()=>u(D),style:{...Ai,borderColor:D===g?"#1f6feb":"#30363d",color:D===g?"#f0f6fc":"#8b949e",background:D===g?"#161b22":"#0d1117"},children:[D+1,". ",k.title]},k.title))})]})]}),e.length===0?t("div",{style:{color:"#8b949e",padding:"40px 0",textAlign:"center"},children:"No repositories yet"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:e.map((k,D)=>{const L=Co(k),R=L?`/${L}/${k.name}`:`/${k.name}`;return t("div",{style:{display:"block",padding:"12px 16px",borderBottom:D===e.length-1?"none":"1px solid #21262d"},children:[t("div",{style:{marginBottom:"6px"},children:[t("a",{href:R,style:{color:"#58a6ff",fontWeight:"bold",textDecoration:"none"},children:[L&&t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:[L,"/"]}),k.name]}),k.is_private&&t("span",{style:{color:"#8b949e",fontWeight:"normal",marginLeft:"8px",fontSize:"11px",border:"1px solid #30363d",padding:"1px 6px",borderRadius:"12px"},children:"Private"})]}),k.description&&t("div",{style:{color:"#8b949e",fontWeight:"normal",fontSize:"13px"},children:k.description}),k.parent_owner&&k.parent_name&&t("div",{style:{color:"#8b949e",fontWeight:"normal",marginTop:"4px",fontSize:"13px"},children:["forked from"," ",t("a",{href:`/${k.parent_owner}/${k.parent_name}`,style:{color:"#58a6ff",textDecoration:"none"},children:[k.parent_owner,"/",k.parent_name]})]})]},k.id)})})]})}const Ro="gothub_onboarding_demo_seen_v1";function Bi(){return typeof window>"u"?!1:window.localStorage.getItem(Ro)==="1"}function hn(){typeof window>"u"||window.localStorage.setItem(Ro,"1")}async function Ei(e,n){const o=e.map(a=>{const g=Co(a);return!g||!a.name?null:{owner:g,repo:a.name,defaultBranch:a.default_branch||""}}).filter(a=>a!==null);if(o.length===0)return null;const r=o.slice(0,6);let i=r[0],l=null;for(const a of r){const g=await Di(a.owner,a.repo,n);if(g){i=a,l=g;break}}let s=i.defaultBranch||"main";if(!i.defaultBranch)try{const a=await Ge(i.owner,i.repo);a.default_branch&&(s=a.default_branch)}catch(a){n==null||n((a==null?void 0:a.message)||`Failed to resolve default branch for ${i.owner}/${i.repo}; using main.`),s="main"}const[d,c]=await Promise.all([Ii(i.owner,i.repo,s,n),Pi(i.owner,i.repo,s,n)]);return{owner:i.owner,repo:i.repo,ref:s,prNumber:l==null?void 0:l.number,filePath:d||void 0,symbol:c||void 0}}function Li(e){const n=e.prNumber?`/${e.owner}/${e.repo}/pulls/${e.prNumber}`:`/${e.owner}/${e.repo}/pulls`,o=e.symbol?`Use symbol "${e.symbol}" for a quick graph.`:"Pick a function name from Symbols, then run it in Call Graph.",r=e.filePath?`/${e.owner}/${e.repo}/blob/${e.ref}/${e.filePath}`:`/${e.owner}/${e.repo}/tree/${e.ref}`,i=e.filePath?`Open ${e.filePath}. The Structural Blame panel auto-selects the first entity and shows attribution.`:"Open any source file and use the Structural Blame panel to inspect entity-level attribution.";return[{title:"PR Impact",description:e.prNumber?`Open PR #${e.prNumber}, switch to "Files changed", and inspect the PR Impact summary.`:'Open pull requests, pick one PR, and inspect the PR Impact summary in "Files changed".',href:n,cta:e.prNumber?`Open PR #${e.prNumber}`:"Open pull requests"},{title:"SemVer Recommendation",description:e.prNumber?'From that PR, switch to "Merge preview" to view structural SemVer recommendations.':'After opening a PR, switch to "Merge preview" to view structural SemVer recommendations.',href:n,cta:e.prNumber?"Open merge preview":"Open pull requests"},{title:"Call Graph",description:"Explore caller/callee relationships to quickly understand behavioral impact.",href:`/${e.owner}/${e.repo}/callgraph/${e.ref}`,cta:"Open call graph",hint:o},{title:"Structural Blame",description:i,href:r,cta:e.filePath?"Open blame-ready file":"Open repository files"}]}async function Di(e,n,o){try{const r=await Pt(e,n,"open",1,10);return r.length>0?r[0]:(await Pt(e,n,void 0,1,10))[0]||null}catch(r){return o==null||o((r==null?void 0:r.message)||`Failed to inspect pull requests for ${e}/${n}.`),null}}async function Ii(e,n,o,r){const i=[""];let l=0,s=!1;for(;i.length>0&&l<12;){const d=i.shift()||"";let c;try{c=await Gt(e,n,o,d||void 0)}catch(g){s||(s=!0,r==null||r((g==null?void 0:g.message)||`Failed to inspect files for ${e}/${n}; demo hints may be limited.`));continue}l++;const a=c.find(g=>!g.is_dir);if(a)return d?`${d}/${a.name}`:a.name;for(const g of c){if(!g.is_dir)continue;const u=d?`${d}/${g.name}`:g.name;if(i.push(u),i.length>=20)break}}return null}async function Pi(e,n,o,r){try{const i=await qt(e,n,o);if(!i||i.length===0)return null;const l=i.find(d=>{const c=typeof d.kind=="string"?d.kind.toLowerCase():"";return(c==="function"||c==="method")&&typeof d.name=="string"&&d.name.trim().length>0});if(l!=null&&l.name)return l.name;const s=i.find(d=>typeof d.name=="string"&&d.name.trim().length>0);return(s==null?void 0:s.name)||null}catch(i){return r==null||r((i==null?void 0:i.message)||`Failed to inspect symbols for ${e}/${n}; call-graph hint may be limited.`),null}}function Co(e){return typeof e.owner_name=="string"&&e.owner_name.trim()?e.owner_name:null}const Wi={display:"inline-block",textDecoration:"none",background:"#1f6feb",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",fontWeight:"bold",fontSize:"13px"},gn={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},Ai={textAlign:"left",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",cursor:"pointer",fontSize:"13px"};function To({entries:e,owner:n,repo:o,ref:r,currentPath:i}){const l=i?`/${n}/${o}/tree/${r}/${i}`:`/${n}/${o}/tree/${r}`;return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[i&&t("a",{href:Ni(l),style:{display:"block",padding:"8px 16px",borderBottom:"1px solid #30363d",background:"#161b22"},children:".."}),e.sort((s,d)=>s.is_dir&&!d.is_dir?-1:!s.is_dir&&d.is_dir?1:s.name.localeCompare(d.name)).map(s=>{const d=s.is_dir?`/${n}/${o}/tree/${r}/${i?i+"/":""}${s.name}`:`/${n}/${o}/blob/${r}/${i?i+"/":""}${s.name}`;return t("a",{href:d,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderBottom:"1px solid #21262d",color:"#c9d1d9"},children:[t("span",{style:{color:s.is_dir?"#58a6ff":"#8b949e",fontFamily:"monospace",fontSize:"14px"},children:s.is_dir?"ðŸ“":"ðŸ“„"}),t("span",{children:s.name})]},s.name)})]})}function Ni(e){const n=e.split("/");return n.pop(),n.join("/")||"/"}function Mi({owner:e,repo:n}){const[o,r]=p(null),[i,l]=p(!1),[s,d]=p(""),[c,a]=p(null),[g,u]=p(!1),[h,f]=p(""),[y,_]=p(!1),[S,m]=p([]),[x,b]=p(!1),[v,k]=p(""),[D,L]=p(!1),[R,N]=p(""),[I,V]=p(!1),[w,O]=p(""),[A,j]=p(""),[de,he]=p([]),[le,xe]=p(!1),[E,G]=p(""),[K,te]=p(null),[M,T]=p(!1),X=!!pe(),Z=ce(()=>!(o!=null&&o.parent_owner)||!(o!=null&&o.parent_name)?null:{owner:o.parent_owner,name:o.parent_name},[o==null?void 0:o.parent_owner,o==null?void 0:o.parent_name]),fe=(o==null?void 0:o.default_branch)||"main",P=typeof window<"u"?window.location.origin:"",q=()=>{!e||!n||(b(!0),k(""),wr(e,n).then(U=>m(U||[])).catch(U=>k((U==null?void 0:U.message)||"failed to load forks")).finally(()=>b(!1)))},ne=U=>{!e||!n||(xe(!0),G(""),Gt(e,n,U).then(ee=>he(ee||[])).catch(ee=>{he([]),G((ee==null?void 0:ee.message)||"failed to load repository tree")}).finally(()=>xe(!1)))};if(H(()=>{if(!e||!n)return;let U=!1;return l(!0),d(""),r(null),Ge(e,n).then(ee=>{if(!U){if(!ee){d("Repository data unavailable");return}r(ee)}}).catch(ee=>{U||d((ee==null?void 0:ee.message)||"failed to load repository")}).finally(()=>{U||l(!1)}),()=>{U=!0}},[e,n]),H(()=>{if(!e||!n)return;let U=!1;return u(!0),f(""),Tr(e,n).then(ee=>{U||a(ee)}).catch(ee=>{U||(a(null),f((ee==null?void 0:ee.message)||"failed to load stars"))}).finally(()=>{U||u(!1)}),()=>{U=!0}},[e,n]),H(()=>{!e||!n||q()},[e,n]),H(()=>{!e||!n||!o||ne(o.default_branch||"main")},[e,n,o==null?void 0:o.id,o==null?void 0:o.default_branch]),H(()=>{if(!Z){te(null),T(!1);return}let U=!1;return te(Z),T(!0),(async()=>{let se={...Z};for(let _e=0;_e<6;_e++){const Se=await Ge(se.owner,se.name);if(!Se.parent_owner||!Se.parent_name)break;se={owner:Se.parent_owner,name:Se.parent_name}}U||te(se)})().catch(()=>{U||te(Z)}).finally(()=>{U||T(!1)}),()=>{U=!0}},[Z==null?void 0:Z.owner,Z==null?void 0:Z.name]),!e||!n)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing repository context"});if(s)return t("div",{style:{color:"#f85149",padding:"20px"},children:s});if(i||!o)return t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."});const $=!!Z&&!!K&&(K.owner!==Z.owner||K.name!==Z.name),W=c?`${c.starred?"Starred":"Star"} (${c.count})`:"Star",F=x?" (...)":S.length>0?` (${S.length})`:"",J=()=>{if(!e||!n||!X||I)return;if(D){L(!1),O("");return}const U=o.parent_repo_id?`${n}-fork`:n;N(U),O(""),j(""),L(!0)},ve=async()=>{if(!(!e||!n||!X||!c||y)){_(!0),f("");try{const U=c.starred?await Er(e,n):await Br(e,n);a(U)}catch(U){f((U==null?void 0:U.message)||"failed to update star")}finally{_(!1)}}},Ke=async U=>{if(U.preventDefault(),!e||!n||!X||I)return;const ee=R.trim();V(!0),O(""),j("Creating fork...");try{const se=await kr(e,n,ee||void 0),_e=typeof se.owner_name=="string"&&se.owner_name.trim()?se.owner_name:e,Se=typeof se.name=="string"&&se.name.trim()?se.name:ee||n;m(ct=>ct.some(Xt=>Xt.owner_name===_e&&Xt.name===Se)?ct:[{...se,owner_name:_e,name:Se},...ct]),L(!1),j(`Fork created: ${_e}/${Se}. Redirecting...`),window.setTimeout(()=>{window.location.assign(`/${_e}/${Se}`)},700)}catch(se){j(""),O((se==null?void 0:se.message)||"failed to fork repository")}finally{V(!1)}};return t("div",{children:[t("div",{style:{marginBottom:"20px"},children:[A&&t("div",{style:{color:I?"#58a6ff":"#3fb950",marginBottom:"12px",padding:"10px 12px",background:I?"#111b2e":"#132a1d",border:`1px solid ${I?"#1f6feb":"#3fb950"}`,borderRadius:"6px",fontSize:"13px"},children:A}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:[t("a",{href:`/${e}`,style:{color:"#58a6ff"},children:e}),t("span",{style:{color:"#8b949e"},children:" / "}),t("a",{href:`/${e}/${n}`,style:{color:"#58a6ff",fontWeight:"bold"},children:n}),o.is_private&&t("span",{style:{color:"#8b949e",fontSize:"12px",fontWeight:"normal",marginLeft:"8px",border:"1px solid #30363d",padding:"2px 8px",borderRadius:"12px"},children:"Private"})]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{onClick:ve,disabled:!X||!c||y||g,style:{border:"1px solid #30363d",background:c!=null&&c.starred?"#1f6feb":"#161b22",color:c!=null&&c.starred?"#fff":"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:!X||y||g?"not-allowed":"pointer",fontSize:"13px"},title:X?"":"Sign in to star this repository",children:g?"Loading stars...":W}),t("button",{onClick:J,disabled:!X||I,style:{border:"1px solid #30363d",background:D?"#1f6feb":"#161b22",color:"#c9d1d9",padding:"6px 12px",borderRadius:"6px",cursor:!X||I?"not-allowed":"pointer",fontSize:"13px"},title:X?"":"Sign in to fork this repository",children:I?"Forking...":`Fork${F}`})]})]}),o.description&&t("p",{style:{color:"#8b949e",fontSize:"14px"},children:o.description}),t("div",{style:{marginTop:"10px",border:"1px solid #30363d",borderRadius:"6px",background:"#0d1117",padding:"10px 12px",display:"grid",gap:"6px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Clone"}),t("code",{style:{color:"#c9d1d9",fontSize:"12px",whiteSpace:"pre-wrap"},children:["git clone ",P,"/git/",e,"/",n,".git"]}),t("code",{style:{color:"#c9d1d9",fontSize:"12px",whiteSpace:"pre-wrap"},children:["got clone ",P,"/got/",e,"/",n]})]}),Z&&t("p",{style:{color:"#8b949e",fontSize:"13px",marginTop:"8px",marginBottom:"0"},children:["forked from"," ",t("a",{href:`/${Z.owner}/${Z.name}`,style:{color:"#58a6ff"},children:[Z.owner,"/",Z.name]}),$&&K&&t(ye,{children:[t("span",{style:{color:"#8b949e"},children:" Â· upstream "}),t("a",{href:`/${K.owner}/${K.name}`,style:{color:"#58a6ff"},children:[K.owner,"/",K.name]})]}),M&&t("span",{style:{color:"#8b949e"},children:" Â· resolving upstream..."})]}),h&&t("div",{style:{marginTop:"10px",color:"#f85149",fontSize:"13px",padding:"8px 10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:h}),D&&t("form",{onSubmit:Ke,style:{marginTop:"12px",border:"1px solid #30363d",borderRadius:"6px",padding:"12px",background:"#161b22",display:"grid",gap:"10px",maxWidth:"520px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold"},children:"Create fork"}),t("label",{style:{color:"#8b949e",fontSize:"13px"},children:["Fork name",t("input",{value:R,onInput:U=>N(U.target.value),placeholder:n||"",style:{marginTop:"6px",width:"100%",background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"9px 10px",color:"#c9d1d9",fontSize:"13px",boxSizing:"border-box"}})]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Leave blank to use the default fork name. Existing names are auto-suffixed."}),w&&t("div",{style:{color:"#f85149",fontSize:"13px",padding:"8px 10px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:w}),t("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[t("button",{type:"submit",disabled:I,style:{border:"none",background:"#238636",color:"#fff",padding:"8px 14px",borderRadius:"6px",cursor:I?"not-allowed":"pointer",fontSize:"13px",fontWeight:"bold",opacity:I?.7:1},children:I?"Creating fork...":"Create fork"}),t("button",{type:"button",onClick:()=>{I||(L(!1),O(""))},style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"8px 14px",borderRadius:"6px",cursor:I?"not-allowed":"pointer",fontSize:"13px"},children:"Cancel"})]})]})]}),t("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",flexWrap:"wrap"},children:[t("a",{href:`/${e}/${n}/tree/${fe}`,style:Re,children:"Code"}),t("a",{href:`/${e}/${n}/commits/${fe}`,style:Re,children:"Commits"}),t("a",{href:`/${e}/${n}/pulls`,style:Re,children:"Pull requests"}),t("a",{href:`/${e}/${n}/issues`,style:Re,children:"Issues"}),t("a",{href:`/${e}/${n}/symbols/${fe}`,style:Re,children:"Symbols"}),t("a",{href:`/${e}/${n}/entity-history/${fe}`,style:Re,children:"Entity History"}),X&&t("a",{href:`/${e}/${n}/settings`,style:Re,children:"Settings"})]}),le&&t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading repository tree..."}),!le&&E&&t("div",{style:{border:"1px solid #f85149",borderRadius:"6px",padding:"14px",background:"#1c1214",color:"#f85149",marginBottom:"20px"},children:[t("div",{style:{marginBottom:"10px",fontSize:"13px"},children:E}),t("button",{onClick:()=>ne(fe),style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Retry tree load"})]}),!le&&!E&&de.length>0&&e&&n&&t(To,{entries:de,owner:e,repo:n,ref:fe,currentPath:""}),!le&&!E&&de.length===0&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"40px",textAlign:"center"},children:[t("p",{style:{color:"#8b949e",marginBottom:"16px"},children:"This repository is empty"}),t("div",{style:{background:"#161b22",padding:"16px",borderRadius:"6px",fontFamily:"monospace",fontSize:"13px",color:"#c9d1d9",textAlign:"left",display:"inline-block"},children:[t("div",{children:"got init"}),t("div",{children:"got add ."}),t("div",{children:'got commit -m "initial commit"'}),t("div",{children:["got publish ",e,"/",n]}),t("div",{style:{color:"#8b949e"},children:"or"}),t("div",{children:"git init -b main"}),t("div",{children:"git add ."}),t("div",{children:'git commit -m "initial commit"'}),t("div",{children:["git remote add origin ",P,"/git/",e,"/",n,".git"]}),t("div",{children:"git push -u origin main"})]})]}),(x||v||S.length>0)&&t("div",{style:{marginTop:"20px",border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"8px"},children:"Forks"}),x&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Loading forks..."}),!x&&v&&t("div",{style:{color:"#f85149",fontSize:"13px"},children:[t("span",{style:{marginRight:"8px"},children:v}),t("button",{onClick:q,style:{border:"1px solid #30363d",background:"#0d1117",color:"#c9d1d9",padding:"5px 8px",borderRadius:"6px",cursor:"pointer",fontSize:"12px"},children:"Retry"})]}),!x&&!v&&S.length===0&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No forks yet."}),!x&&!v&&S.length>0&&t("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[S.slice(0,12).map(U=>t("a",{href:`/${U.owner_name}/${U.name}`,style:{color:"#58a6ff",fontSize:"13px"},children:[U.owner_name,"/",U.name]},U.id)),S.length>12&&t("span",{style:{color:"#8b949e",fontSize:"13px"},children:["+",S.length-12," more"]})]})]})]})}const Re={color:"#c9d1d9",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",border:"1px solid #30363d"};let xn=!1,Je=null;async function Fi(){if(!xn)return Je||(Je=(async()=>{const e=document.createElement("script");e.src="/wasm_exec.js",await new Promise((r,i)=>{e.onload=()=>r(),e.onerror=i,document.head.appendChild(e)});const n=new window.Go,o=await WebAssembly.instantiateStreaming(fetch("/gothub.wasm"),n.importObject);n.run(o.instance),xn=!0})(),Je)}async function Hi(e,n){await Fi();const o=window.gothubHighlight(e,n);return JSON.parse(o)}const Oi=new Set(["keyword","string","comment","number","operator","punctuation","tag","attribute"]),Ui=/^[A-Za-z_$][A-Za-z0-9_$]*$/,mn=18e4,bn=12e3,Gi=220,De=2,ht=8,gt=16,xt=6;function Bo({filename:e,source:n,owner:o,repo:r,gitRef:i,path:l,showBlame:s,blameData:d}){const[c,a]=p([]),[g,u]=p(""),[h,f]=p(null),[y,_]=p(!1),[S,m]=p({}),[x,b]=p(()=>{if(typeof window>"u")return null;const E=window.location.hash.match(/^#L(\d+)$/);return E?parseInt(E[1],10):null}),[v,k]=p(!1);H(()=>{const E=()=>k(window.innerWidth<768);return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const D=E=>{b(E),window.history.replaceState(null,"",`${window.location.pathname}#L${E}`)},L=l||e,R=ce(()=>ol(n),[n]),N=ce(()=>n.split(`
`),[n]);H(()=>{let E=!1;return u(""),a([]),Hi(e,n).then(G=>{E||a(G)}).catch(G=>{E||u(G.message||"failed to highlight source")}),()=>{E=!0}},[e,n]),H(()=>{f(null),_(!1),m({})},[e,n,o,r,i,L]);const I=ce(()=>!o||!r||!i?"Repository context is missing for inline code intelligence.":L?n.length>mn?`Inline code intelligence is disabled for files larger than ${mn.toLocaleString()} characters.`:c.length>bn?`Inline code intelligence is disabled for files with more than ${bn.toLocaleString()} highlighted tokens.`:"":"File path is missing for inline code intelligence.",[o,r,i,L,n.length,c.length]),V=I==="",w=h?S[h.name]:void 0;H(()=>{if(!h||!o||!r||!i||!V||h.name.length<De||w!=null&&w.loading||w!=null&&w.resolved)return;let E=!1;const G=h.name,K=window.setTimeout(async()=>{m(ne=>{var $,W,F;return{...ne,[G]:{loading:!0,resolved:!1,definitions:(($=ne[G])==null?void 0:$.definitions)||[],references:((W=ne[G])==null?void 0:W.references)||[],history:((F=ne[G])==null?void 0:F.history)||[]}}});const te=`*[name=/^${Ki(G)}$/]`,[M,T,X]=await Promise.allSettled([qt(o,r,i,te),So(o,r,i,G),ko(o,r,i,{name:G,limit:40})]);if(E)return;const Z=M.status==="fulfilled"?M.value||[]:[],fe=T.status==="fulfilled"?T.value||[]:[],P=X.status==="fulfilled"?X.value||[]:[],q=[];M.status==="rejected"&&q.push("definitions"),T.status==="rejected"&&q.push("references"),X.status==="rejected"&&q.push("entity history"),m(ne=>({...ne,[G]:{loading:!1,resolved:!0,definitions:Z,references:fe,history:P,error:q.length>0?`Unable to load ${q.join(", ")}.`:void 0}}))},y?0:Gi);return()=>{E=!0,window.clearTimeout(K)}},[h==null?void 0:h.name,o,r,i,V,y,w==null?void 0:w.loading,w==null?void 0:w.resolved]);const O=ce(()=>{const E=(w==null?void 0:w.definitions)||[];return Yi(E,L,(h==null?void 0:h.line)||0)},[w==null?void 0:w.definitions,L,h==null?void 0:h.line]),A=ce(()=>{const E=(w==null?void 0:w.references)||[];return Zi(E,L)},[w==null?void 0:w.references,L]),j=(w==null?void 0:w.history)||[],de=E=>{if(y||!V)return;const G=yn(E.target);if(!G){f(te=>te&&null);return}const K=vn(G,R);K&&f(te=>Xi(te,K)?te:K)},he=E=>{if(!V)return;const G=yn(E.target);if(!G)return;E.preventDefault(),E.stopPropagation();const K=vn(G,R);K&&(f(K),_(!0))},le=()=>{_(!1),f(null)},xe=ce(()=>g?N.map(E=>[E]):ji(n,c,R,N.length,{activeToken:h,intelligenceEnabled:V}),[n,c,R,N.length,g,h,V]);return t("div",{style:{display:"flex",flexDirection:v?"column":"row",gap:"16px",alignItems:"flex-start"},children:[t("div",{style:{flex:1,overflow:"auto",minWidth:0},children:t("div",{style:{background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",fontSize:"13px",lineHeight:"1.5",overflowX:"auto"},children:t("table",{style:{borderCollapse:"collapse",borderSpacing:0,width:"100%",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace',fontSize:"13px",lineHeight:"1.5"},children:t("tbody",{children:N.map((E,G)=>{const K=G+1,te=x===K,M=te?"rgba(31, 111, 235, 0.15)":void 0,T=s&&d?d.find(Z=>K>=Z.start_line&&K<=Z.end_line):null,X=T?K===T.start_line:!1;return t("tr",{style:{background:M},id:`L${K}`,children:[s&&t("td",{style:{userSelect:"none",whiteSpace:"nowrap",paddingLeft:"8px",paddingRight:"8px",fontSize:"11px",color:"#484f58",borderRight:"1px solid #21262d",verticalAlign:"top",width:"1px",maxWidth:"140px",overflow:"hidden",textOverflow:"ellipsis"},children:X&&T?t("span",{title:`${T.author} ${T.commit_hash}`,children:[T.author.split(" ")[0]," ",T.commit_hash.slice(0,7)]}):null}),t("td",{onClick:()=>D(K),style:{userSelect:"none",textAlign:"right",paddingLeft:"12px",paddingRight:"12px",color:te?"#58a6ff":"#484f58",cursor:"pointer",verticalAlign:"top",width:"1px",whiteSpace:"nowrap"},children:K}),t("td",{onMouseOver:de,onClick:he,onMouseLeave:()=>{y||f(null)},style:{paddingLeft:"12px",paddingRight:"16px",whiteSpace:"pre",color:"#c9d1d9"},children:xe[G]})]},K)})})})})}),t("aside",{style:{width:v?"100%":"320px",maxWidth:"100%",flexShrink:0,border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Inline Intelligence"}),(h||y)&&t("button",{type:"button",onClick:le,style:{background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"4px",fontSize:"11px",padding:"2px 8px",cursor:"pointer"},children:"Clear"})]}),t("div",{style:{padding:"12px",display:"grid",gap:"10px"},children:[I&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:I}),!I&&!h&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Hover a symbol token to preview definitions and references, or click to pin."}),!I&&h&&t(ye,{children:[t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",background:"#0d1117"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"13px",wordBreak:"break-word"},children:h.name}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["L",h.line,":",h.column," ",y?"Â· pinned":"Â· hover"]})]}),h.name.length<De&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Symbol is too short for repository-wide lookups."}),h.name.length>=De&&(w==null?void 0:w.loading)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Loading definitions, references, and entity history..."}),h.name.length>=De&&(w==null?void 0:w.error)&&t("div",{style:{color:"#d29922",fontSize:"12px"},children:w.error}),h.name.length>=De&&t(ye,{children:[t(mt,{title:`Definitions (${O.length})`,children:[O.slice(0,ht).map((E,G)=>t("a",{href:bt(o,r,i,E.file,E.start_line),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{fontSize:"12px",fontFamily:"monospace",color:"#c9d1d9"},children:E.file}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.kind||"symbol"," ",Qi(E.start_line,E.end_line)]})]},`${E.file}:${E.start_line||0}:${G}`)),O.length===0&&(w==null?void 0:w.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No matching definitions found."}),O.length>ht&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",O.length-ht," more definitions"]})]}),t(mt,{title:`References (${A.length})`,children:[A.slice(0,gt).map((E,G)=>t("a",{href:bt(o,r,i,E.file,E.start_line||E.line),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{fontSize:"12px",fontFamily:"monospace",color:"#c9d1d9"},children:E.file}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.kind||"reference"," ",el(E)]})]},`${E.file}:${E.start_line||E.line||0}:${E.start_column||0}:${G}`)),A.length===0&&(w==null?void 0:w.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No matching references found."}),A.length>gt&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",A.length-gt," more references"]})]}),t(mt,{title:`Entity History (${j.length})`,children:[j.slice(0,xt).map((E,G)=>t("a",{href:bt(o,r,i,E.path),style:{display:"block",color:"#58a6ff",textDecoration:"none",padding:"4px 0"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"11px"},children:tl(E.commit_hash)}),t("div",{style:{fontSize:"12px",color:"#c9d1d9"},children:E.path}),t("div",{style:{fontSize:"11px",color:"#8b949e"},children:[E.author||"unknown"," ",E.timestamp?`Â· ${nl(E.timestamp)}`:""]})]},`${E.commit_hash}:${E.path}:${G}`)),j.length===0&&(w==null?void 0:w.resolved)&&t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"No related entity history found."}),j.length>xt&&t("div",{style:{color:"#8b949e",fontSize:"11px"},children:["+",j.length-xt," more history hits"]})]})]})]})]})]})]})}function mt({title:e,children:n}){return t("section",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",background:"#0d1117"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"12px",marginBottom:"6px"},children:e}),t("div",{children:n})]})}const qi={keyword:"#ff7b72",string:"#a5d6ff",comment:"#8b949e",function:"#d2a8ff","function.method":"#d2a8ff",type:"#79c0ff",number:"#79c0ff",operator:"#ff7b72",variable:"#ffa657","variable.parameter":"#ffa657","variable.builtin":"#ffa657",constant:"#79c0ff","constant.builtin":"#79c0ff",property:"#c9d1d9",punctuation:"#c9d1d9","punctuation.bracket":"#c9d1d9",tag:"#7ee787",attribute:"#79c0ff"};function ji(e,n,o,r,i){const l=Array.from({length:r},()=>[]);if(n.length===0){const a=e.split(`
`);for(let g=0;g<a.length;g++)l[g]=[a[g]];return l}let s=0;const d=(a,g)=>{let u=g;const h=a.split(`
`);for(let f=0;f<h.length;f++)f>0&&u++,u<r&&h[f].length>0&&l[u].push(h[f])},c=a=>{let g=0,u=o.length-1;for(;g<=u;){const h=g+u>>1;o[h]<=a?g=h+1:u=h-1}return Math.max(0,u)};for(const a of n){if(a.start_byte>s){const S=e.slice(s,a.start_byte);d(S,c(s))}const g=e.slice(a.start_byte,a.end_byte),u=qi[a.capture]||"#c9d1d9",h=i.intelligenceEnabled&&Vi(a.capture,g),f=!!i.activeToken&&i.activeToken.start===a.start_byte&&i.activeToken.end===a.end_byte,y=g.split(`
`);let _=c(a.start_byte);for(let S=0;S<y.length;S++){S>0&&_++;const m=y[S];_<r&&m.length>0&&l[_].push(t("span",{"data-symbol":h?g:void 0,"data-start":h?String(a.start_byte):void 0,"data-end":h?String(a.end_byte):void 0,style:{color:u,cursor:h?"pointer":"text",borderRadius:h?"3px":void 0,background:f?"rgba(31, 111, 235, 0.18)":void 0,outline:f?"1px solid rgba(31, 111, 235, 0.45)":void 0},children:m}))}s=a.end_byte}if(s<e.length){const a=e.slice(s);d(a,c(s))}return l}function Vi(e,n){const o=e.split(".")[0];return Oi.has(o)||!Ui.test(n)?!1:n.length>=De}function Ki(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function yn(e){if(!e)return null;let n=null;return e instanceof HTMLElement?n=e:e instanceof Text&&(n=e.parentElement),n?n.closest("[data-symbol]"):null}function vn(e,n){const o=e.dataset.symbol,r=e.dataset.start,i=e.dataset.end;if(!o||!r||!i)return null;const l=Number(r),s=Number(i);if(!Number.isFinite(l)||!Number.isFinite(s)||s<=l)return null;const d=rl(n,l);return{name:o,start:l,end:s,line:d.line,column:d.column}}function Xi(e,n){return!!e&&e.start===n.start&&e.end===n.end&&e.name===n.name}function Yi(e,n,o){const r=e.map((i,l)=>({definition:i,index:l,score:Ji(i,n,o)}));return r.sort((i,l)=>l.score-i.score||i.index-l.index),r.map(i=>i.definition)}function Ji(e,n,o){let r=0;return n&&e.file===n&&(r+=4),n&&e.file===n&&o>0&&typeof e.start_line=="number"&&typeof e.end_line=="number"&&o>=e.start_line&&o<=e.end_line&&(r+=6),r}function Zi(e,n){if(!n)return e;const o=[],r=[];for(const i of e)i.file===n?o.push(i):r.push(i);return[...o,...r]}function bt(e,n,o,r,i){if(!e||!n||!o||!r)return"#";const l=`/${e}/${n}/blob/${o}/${r}`;return i&&i>0?`${l}#L${i}`:l}function Qi(e,n){return!e||e<=0?"line ?":!n||n<=e?`L${e}`:`L${e}-${n}`}function el(e){const n=e.start_line||e.line,o=e.end_line,r=e.start_column,i=e.end_column;let l=n&&n>0?`L${n}`:"line ?";return n&&o&&o>n&&(l+=`-${o}`),r&&r>0&&(l+=`, col ${r}`,i&&i>r&&(l+=`-${i}`)),l}function tl(e){return e?e.length>12?e.slice(0,12):e:""}function nl(e){return e?new Date(e*1e3).toLocaleString():"unknown time"}function ol(e){const n=[0];for(let o=0;o<e.length;o++)e.charCodeAt(o)===10&&n.push(o+1);return n}function rl(e,n){if(e.length===0)return{line:1,column:n+1};const o=Math.max(0,n);let r=0,i=e.length-1;for(;r<=i;){const d=r+i>>1;e[d]<=o?r=d+1:i=d-1}const l=Math.max(0,i),s=e[l]||0;return{line:l+1,column:o-s+1}}const Eo=/^ {0,3}(#{1,6})\s+(.+?)\s*#*\s*$/,Vt=/^ {0,3}(\d+)[.)]\s+(.+)$/,Kt=/^ {0,3}[-+*]\s+(.+)$/,Wt=/^ {0,3}>\s?(.*)$/,Lo=/^ {0,3}((\*\s*){3,}|(-\s*){3,}|(_\s*){3,})$/,_n=/^( {2,}|\t+)\S/,il=/^([A-Za-z][A-Za-z0-9+.-]*):/,ll={border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden",background:"#0d1117"},sl={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},dl={padding:"16px",color:"#c9d1d9",fontSize:"14px",lineHeight:1.6,overflowWrap:"anywhere"},al={margin:"0 0 14px"},cl={border:0,borderTop:"1px solid #30363d",margin:"16px 0"},pl={margin:"0 0 14px",padding:"2px 0 2px 12px",borderLeft:"3px solid #30363d",color:"#adbac7"},Sn={margin:"0 0 14px 22px",padding:0,display:"grid",gap:"6px"},fl={margin:0},kn={1:{margin:"0 0 14px",fontSize:"1.85rem",lineHeight:1.2,color:"#f0f6fc",borderBottom:"1px solid #30363d",paddingBottom:"8px"},2:{margin:"0 0 12px",fontSize:"1.5rem",lineHeight:1.25,color:"#f0f6fc",borderBottom:"1px solid #30363d",paddingBottom:"6px"},3:{margin:"0 0 10px",fontSize:"1.25rem",lineHeight:1.3,color:"#f0f6fc"},4:{margin:"0 0 8px",fontSize:"1.1rem",lineHeight:1.35,color:"#f0f6fc"},5:{margin:"0 0 8px",fontSize:"1rem",lineHeight:1.4,color:"#f0f6fc"},6:{margin:"0 0 8px",fontSize:"0.95rem",lineHeight:1.4,color:"#8b949e",textTransform:"uppercase",letterSpacing:"0.04em"}},ul={fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',background:"rgba(110, 118, 129, 0.2)",border:"1px solid rgba(110, 118, 129, 0.4)",borderRadius:"4px",padding:"0 4px",fontSize:"0.92em"},hl={margin:"0 0 14px",border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden",background:"#0b1220"},gl={margin:0,padding:"5px 10px",borderBottom:"1px solid #30363d",color:"#8b949e",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.03em"},xl={margin:0,padding:"12px 14px",overflowX:"auto",fontSize:"13px",lineHeight:1.5,color:"#c9d1d9"},ml={color:"#58a6ff",textDecoration:"underline",textUnderlineOffset:"2px"};function bl({filename:e,source:n,owner:o,repo:r,gitRef:i,path:l}){const[s,d]=p("preview"),c=ce(()=>Do(n,"md"),[n]);return H(()=>{d("preview")},[e,l]),t("div",{style:{display:"grid",gap:"10px"},children:t("div",{style:ll,children:[t("div",{style:sl,children:[t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Markdown"}),t("div",{style:{display:"flex",gap:"6px"},children:[t(wn,{label:"Preview",active:s==="preview",onClick:()=>d("preview")}),t(wn,{label:"Raw",active:s==="raw",onClick:()=>d("raw")})]})]}),s==="preview"?t("article",{style:dl,children:c.length>0?c:t("p",{style:{margin:0,color:"#8b949e"},children:"Empty markdown file."})}):t("div",{style:{padding:"12px"},children:t(Bo,{filename:e,source:n,owner:o,repo:r,gitRef:i,path:l})})]})})}function wn({label:e,active:n,onClick:o}){return t("button",{type:"button",onClick:o,"aria-pressed":n,style:{background:n?"#1f6feb":"#21262d",color:n?"#ffffff":"#c9d1d9",border:"1px solid #30363d",borderRadius:"4px",fontSize:"12px",padding:"4px 10px",cursor:"pointer"},children:e})}function Do(e,n){const r=e.replace(/\r\n?/g,`
`).split(`
`),i=[];let l=0,s=0;for(;l<r.length;){const d=r[l]||"";if(d.trim()===""){l+=1;continue}const c=Io(d);if(c){l+=1;const y=[];for(;l<r.length&&!kl(r[l]||"",c);)y.push(r[l]||""),l+=1;l<r.length&&(l+=1),i.push(t("figure",{style:hl,children:[c.language&&t("figcaption",{style:gl,children:c.language}),t("pre",{style:xl,children:t("code",{children:y.join(`
`)})})]},`${n}-code-${s}`)),s+=1;continue}const a=Eo.exec(d);if(a){const y=Math.min(6,a[1].length),_=a[2]||"";i.push(vl(y,Te(_,`${n}-h-${s}`),`${n}-h-${s}`)),s+=1,l+=1;continue}if(Lo.test(d)){i.push(t("hr",{style:cl},`${n}-hr-${s}`)),s+=1,l+=1;continue}if(Wt.test(d)){const y=[];for(;l<r.length;){const _=Wt.exec(r[l]||"");if(!_)break;y.push(_[1]||""),l+=1}i.push(t("blockquote",{style:pl,children:Do(y.join(`
`),`${n}-quote-${s}`)},`${n}-quote-${s}`)),s+=1;continue}const g=Vt.exec(d),u=Kt.exec(d);if(g||u){const y=g?"ordered":"unordered",{node:_,nextIndex:S}=yl(r,l,y,`${n}-list-${s}`);i.push(_),s+=1,l=S;continue}const h=[];for(;l<r.length;){const y=r[l]||"";if(y.trim()===""||Po(y))break;h.push(y.trim()),l+=1}const f=h.join(" ").replace(/\s+/g," ").trim();f?(i.push(t("p",{style:al,children:Te(f,`${n}-p-${s}`)},`${n}-p-${s}`)),s+=1):l+=1}return i}function yl(e,n,o,r){const i=[],l=o==="ordered"?Vt:Kt;let s=n,d=0,c=1;for(;s<e.length;){const a=l.exec(e[s]||"");if(!a)break;const g=[];for(o==="ordered"?(d===0&&(c=Number(a[1])||1),g.push(a[2]||"")):g.push(a[1]||""),s+=1;s<e.length;){const h=e[s]||"";if(h.trim()===""||l.test(h)||Po(h)&&!_n.test(h))break;if(_n.test(h)){g.push(h.trim()),s+=1;continue}break}const u=g.join(" ").replace(/\s+/g," ").trim();i.push(t("li",{style:fl,children:Te(u,`${r}-item-${d}`)},`${r}-item-${d}`)),d+=1}return o==="ordered"?{node:t("ol",{style:Sn,start:c>1?c:void 0,children:i},r),nextIndex:s}:{node:t("ul",{style:Sn,children:i},r),nextIndex:s}}function vl(e,n,o){const r=Math.min(6,Math.max(1,e)),i=kn[r]||kn[3];return r===1?t("h1",{style:i,children:n},o):r===2?t("h2",{style:i,children:n},o):r===3?t("h3",{style:i,children:n},o):r===4?t("h4",{style:i,children:n},o):r===5?t("h5",{style:i,children:n},o):t("h6",{style:i,children:n},o)}function Te(e,n,o=0){if(!e)return[];if(o>8)return[e];const r=[];let i=e,l=0;for(;i.length>0;){const s=_l(i);if(!s){r.push(i);break}s.index>0&&r.push(i.slice(0,s.index));const d=`${n}-inline-${l}`;if(s.type==="code")r.push(t("code",{style:ul,children:s.content},d));else if(s.type==="link"){const c=Sl(s.href||""),a=Te(s.content,`${d}-link`,o+1);if(c){const g=/^https?:\/\//i.test(c);r.push(t("a",{href:c,style:ml,target:g?"_blank":void 0,rel:g?"noopener noreferrer":void 0,children:a},d))}else r.push(t("span",{style:{color:"#8b949e"},children:a},d))}else s.type==="strong"?r.push(t("strong",{children:Te(s.content,`${d}-strong`,o+1)},d)):s.type==="em"?r.push(t("em",{children:Te(s.content,`${d}-em`,o+1)},d)):s.type==="strike"&&r.push(t("del",{children:Te(s.content,`${d}-strike`,o+1)},d));if(s.raw.length===0){r.push(i);break}i=i.slice(s.index+s.raw.length),l+=1}return r}function _l(e){const n=[],o=/`([^`\n]+)`/.exec(e);o&&n.push({type:"code",index:o.index,raw:o[0],content:o[1]||""});const r=/\[([^\]]+)\]\(([^)]+)\)/.exec(e);r&&n.push({type:"link",index:r.index,raw:r[0],content:r[1]||"",href:r[2]||""});const i=/\*\*([^*]+)\*\*|__([^_]+)__/.exec(e);i&&n.push({type:"strong",index:i.index,raw:i[0],content:i[1]||i[2]||""});const l=/\*([^*\n]+)\*|_([^_\n]+)_/.exec(e);l&&n.push({type:"em",index:l.index,raw:l[0],content:l[1]||l[2]||""});const s=/~~([^~]+)~~/.exec(e);return s&&n.push({type:"strike",index:s.index,raw:s[0],content:s[1]||""}),n.length===0?null:(n.sort((d,c)=>d.index-c.index||$n(d.type)-$n(c.type)),n[0]||null)}function $n(e){return e==="code"?0:e==="link"?1:e==="strong"?2:e==="em"?3:4}function Sl(e){const n=e.trim();if(!n)return null;const o=n.startsWith("<")&&n.endsWith(">")?n.slice(1,-1).trim():n;if(!o)return null;if(o.startsWith("#")||/^(\/|\.\/|\.\.\/)/.test(o))return o;const r=il.exec(o);if(!r)return o;const i=`${(r[1]||"").toLowerCase()}:`;return i==="http:"||i==="https:"||i==="mailto:"?o:null}function Io(e){const n=/^ {0,3}(`{3,}|~{3,})(.*)$/.exec(e);if(!n)return null;const o=n[1]||"",r=o.startsWith("~")?"~":"`",i=o.length,l=((n[2]||"").trim().split(/\s+/)[0]||"").toLowerCase();return{markerChar:r,markerLength:i,language:l}}function kl(e,n){const o=e.trim();if(!o||o[0]!==n.markerChar)return!1;let r=0;for(;r<o.length&&o[r]===n.markerChar;)r+=1;if(r<n.markerLength)return!1;for(let i=r;i<o.length;i+=1)if(!/\s/.test(o[i]||""))return!1;return!0}function Po(e){return!!(e.trim()===""||Io(e)||Eo.test(e)||Vt.test(e)||Kt.test(e)||Wt.test(e)||Lo.test(e))}function Wo({status:e,loading:n,error:o,refName:r}){const i=(e==null?void 0:e.ref)||r||"this ref";if(n)return t("div",{style:yt,children:t("div",{style:{color:"#8b949e",fontSize:"12px"},children:"Indexing status: loading..."})});if(o)return t("div",{style:yt,children:t("div",{style:{color:"#d29922",fontSize:"12px"},children:o})});if(!e)return null;const l=wl(e.queue_status,i),s=zl(e.updated_at);return t("div",{style:yt,children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px",flexWrap:"wrap"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"12px"},children:"Indexing"}),t("span",{style:{color:l.color,background:l.background,border:`1px solid ${l.color}`,borderRadius:"999px",padding:"2px 8px",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase"},children:l.label})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"6px"},children:l.message}),t("div",{style:{color:"#8b949e",fontSize:"11px",marginTop:"6px"},children:[t("span",{style:{fontFamily:"monospace"},children:["commit ",$l(e.commit_hash)]}),s&&t("span",{children:[" ","Â·"," updated ",s]})]}),e.queue_status==="failed"&&e.last_error&&t("div",{style:{color:"#f85149",fontSize:"11px",marginTop:"6px",whiteSpace:"pre-wrap"},children:e.last_error})]})}const yt={border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",background:"#0d1117"};function wl(e,n){switch(e){case"queued":return{label:"queued",color:"#d29922",background:"#2b230f",message:`Queued for ${n}.`};case"in_progress":return{label:"in progress",color:"#58a6ff",background:"#0d2238",message:`Indexing in progress for ${n}.`};case"completed":return{label:"completed",color:"#3fb950",background:"#132a1a",message:`Index is ready for ${n}.`};case"failed":return{label:"failed",color:"#f85149",background:"#2d1216",message:`Indexing failed for ${n}.`};case"not_found":return{label:"not found",color:"#8b949e",background:"#161b22",message:`No indexing job found for ${n}.`};default:return{label:e||"unknown",color:"#8b949e",background:"#161b22",message:`Index status for ${n}: ${e||"unknown"}.`}}}function $l(e){return e?e.length>12?e.slice(0,12):e:""}function zl(e){if(!e)return"";const n=Date.parse(e);return Number.isFinite(n)?new Date(n).toLocaleString():""}if(typeof document<"u"&&!document.getElementById("gothub-shimmer")){const e=document.createElement("style");e.id="gothub-shimmer",e.textContent="@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }",document.head.appendChild(e)}function zn({lines:e=8}){return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px"},children:Array.from({length:e}).map((n,o)=>t("div",{style:{height:"14px",background:"linear-gradient(90deg, #21262d 25%, #30363d 50%, #21262d 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"4px",marginBottom:o<e-1?"8px":0,width:`${60+o*7%40}%`}},o))})}function Ae({label:e,onClick:n}){return t("button",{type:"button",onClick:n,style:{background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"4px 10px",cursor:"pointer",fontSize:"12px"},children:e})}function Rn(e){navigator.clipboard.writeText(e).catch(()=>{})}function Rl(e,n){const o=new Blob([n],{type:"text/plain"}),r=URL.createObjectURL(o),i=document.createElement("a");i.href=r,i.download=e.split("/").pop()||"file",i.click(),URL.revokeObjectURL(r)}function Cl(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Cn({owner:e,repo:n,ref:o,path:r}){const[i,l]=p(null),[s,d]=p(null),[c,a]=p(!0),[g,u]=p(null),[h,f]=p(null),[y,_]=p(null),[S,m]=p(!1),[x,b]=p(null),[v,k]=p(!1),[D,L]=p(""),[R,N]=p(""),[I,V]=p(""),[w,O]=p(!1),[A,j]=p(!1),[de,he]=p(!1);H(()=>{const M=()=>he(window.innerWidth<768);return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const le=M=>{const T=M.trim();T&&V(X=>X?X.includes(T)?X:`${X} â€¢ ${T}`:T)};if(H(()=>{if(!e||!n||!o)return;N(""),V(""),l(null),d(null),u(null),f(null),_(null),m(!1),O(!1),j(!1),Tn()&&r?(a(!1),Lr(e,n,o,r).then(T=>{const X=Bl(T==null?void 0:T.data);d({content:X.content}),X.error&&le(X.error)}).catch(T=>N(T.message)),Ir(e,n,o,r).then(T=>{const X=Array.isArray(T==null?void 0:T.entities)?T.entities:[];u(X),f(X.length>0?X[0]:null)}).catch(T=>{u([]),f(null),le((T==null?void 0:T.message)||"failed to load structural entities")})):(a(!0),Gt(e,n,o,r).then(T=>l(T||[])).catch(T=>N(T.message)))},[e,n,o,r]),H(()=>{!e||!n||!o||!r||!h||(m(!0),_(null),Pr(e,n,o,h.key,r,500).then(_).catch(M=>{_(null),le((M==null?void 0:M.message)||"failed to load structural blame")}).finally(()=>m(!1)))},[e,n,o,r,h==null?void 0:h.key]),H(()=>{if(!e||!n||!o)return;let M=!1;return b(null),L(""),k(!0),_o(e,n,o).then(T=>{M||b(T)}).catch(T=>{M||L((T==null?void 0:T.message)||"failed to load indexing status")}).finally(()=>{M||k(!1)}),()=>{M=!0}},[e,n,o]),!e||!n||!o)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing repository context"});if(Tn()&&!r)return t("div",{style:{color:"#f85149",padding:"20px"},children:"Missing file path for blob view"});if(R)return t("div",{style:{color:"#f85149",padding:"20px"},children:R});const xe=Tl(e,n,o,r),E=v||!!D||!!x,G=El(r||""),K=[];if(A&&g&&y&&h){const M=g.find(T=>T.key===h.key);M&&y.commit_hash&&K.push({start_line:M.start_line,end_line:M.end_line,author:y.author||"unknown",commit_hash:y.commit_hash})}const te=()=>{typeof window<"u"&&Rn(window.location.href)};return t("div",{children:[I&&t("div",{style:{color:"#d29922",marginBottom:"16px",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:I}),t("div",{style:{position:"sticky",top:0,zIndex:10,background:"#0d1117",paddingBottom:"8px"},children:[t("div",{style:{marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("a",{href:`/${e}/${n}`,style:{color:"#58a6ff",fontWeight:"bold"},children:n}),xe.map((M,T)=>t("span",{children:[t("span",{style:{color:"#8b949e"},children:"/"}),M.href?t("a",{href:M.href,style:{color:"#58a6ff"},children:M.name}):t("span",{style:{color:"#f0f6fc"},children:M.name})]},T))]}),!c&&s&&t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#161b22",border:"1px solid #30363d",borderRadius:"6px 6px 0 0",borderBottom:"none",flexWrap:"wrap",gap:"8px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",display:"flex",gap:"12px"},children:[t("span",{children:[s.content.split(`
`).length," lines"]}),t("span",{children:Cl(new Blob([s.content]).size)})]}),t("div",{style:{display:"flex",gap:"4px"},children:[t(Ae,{label:"Copy",onClick:()=>Rn(s.content)}),t(Ae,{label:w?"Highlighted":"Raw",onClick:()=>O(!w)}),t(Ae,{label:"Download",onClick:()=>Rl(r||"file",s.content)}),t(Ae,{label:"Permalink",onClick:te}),!G&&t(Ae,{label:A?"Hide Blame":"Blame",onClick:()=>j(!A)})]})]})]}),E&&t("div",{style:{marginBottom:"16px",maxWidth:"420px"},children:t(Wo,{status:x,loading:v,error:D,refName:o})}),c?i?t(To,{entries:i,owner:e,repo:n,ref:o,currentPath:r||""}):t(zn,{lines:10}):s?t("div",{style:{display:"flex",flexDirection:de?"column":"row",flexWrap:"wrap",alignItems:"flex-start",gap:"16px"},children:[t("div",{style:{flex:"1 1 640px",minWidth:0},children:w?t("pre",{style:{background:"#0d1117",border:"1px solid #30363d",borderRadius:!c&&s?"0 0 6px 6px":"6px",padding:"16px",fontSize:"13px",lineHeight:"1.5",overflowX:"auto",color:"#c9d1d9",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace'},children:s.content}):G?t(bl,{filename:r||"",source:s.content||"",owner:e,repo:n,gitRef:o,path:r||""}):t(Bo,{filename:r||"",source:s.content||"",owner:e,repo:n,gitRef:o,path:r||"",showBlame:A,blameData:K.length>0?K:void 0})}),t(Ll,{entities:g,selectedKey:(h==null?void 0:h.key)||"",blame:y,blameLoading:S,onSelect:M=>f(M),narrow:de})]}):t(zn,{lines:16})]})}function Tl(e,n,o,r){if(!r)return[];const i=r.split("/");return i.map((l,s)=>{if(s===i.length-1)return{name:l};const d=i.slice(0,s+1).join("/");return{name:l,href:`/${e}/${n}/tree/${o}/${d}`}})}function Bl(e){if(typeof e!="string"||e==="")return{content:""};try{const n=atob(e),o=new Uint8Array(n.length);for(let r=0;r<n.length;r++)o[r]=n.charCodeAt(r);return{content:new TextDecoder().decode(o)}}catch{return{content:"",error:"Failed to decode file contents returned by the server."}}}function El(e){const n=e.toLowerCase();return n.endsWith(".md")||n.endsWith(".markdown")}function Tn(){return typeof window>"u"?!1:window.location.pathname.includes("/blob/")}function Ll({entities:e,selectedKey:n,blame:o,blameLoading:r,onSelect:i,narrow:l}){return t("aside",{style:{flex:"1 1 320px",width:l?"100%":"320px",maxWidth:"100%",border:"1px solid #30363d",borderRadius:"6px",overflow:"hidden"},children:[t("div",{style:{padding:"10px 12px",borderBottom:"1px solid #30363d",background:"#161b22"},children:t("strong",{style:{color:"#f0f6fc",fontSize:"13px"},children:"Structural Blame"})}),e===null&&t("div",{style:{color:"#8b949e",fontSize:"13px",padding:"12px"},children:"Loading entities..."}),e!==null&&e.length===0&&t("div",{style:{color:"#8b949e",fontSize:"13px",padding:"12px"},children:"No entities detected for this file."}),e!==null&&e.length>0&&t("div",{style:{maxHeight:"240px",overflowY:"auto",borderBottom:"1px solid #30363d"},children:e.map(s=>t("button",{onClick:()=>i(s),style:{width:"100%",textAlign:"left",border:"none",borderTop:"1px solid #21262d",background:n===s.key?"#1f2937":"#0d1117",color:"#c9d1d9",padding:"8px 10px",cursor:"pointer"},children:[t("div",{style:{fontFamily:"monospace",fontSize:"12px"},children:s.name||s.key}),t("div",{style:{color:"#8b949e",fontSize:"11px"},children:[s.decl_kind," Â· L",s.start_line,"-",s.end_line]})]},s.key))}),t("div",{style:{padding:"12px"},children:r?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Resolving blame..."}):o?t("div",{style:{display:"grid",gap:"6px"},children:[t("div",{style:{color:"#58a6ff",fontFamily:"monospace",fontSize:"12px"},children:Dl(o.commit_hash)}),t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:o.author||"unknown"}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:Il(o.timestamp)}),t("div",{style:{color:"#c9d1d9",fontSize:"12px"},children:o.message||"(no message)"})]}):t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Select an entity to view attribution."})})]})}function Dl(e){return e?e.length>12?e.slice(0,12):e:""}function Il(e){return e?new Date(e*1e3).toLocaleString():"unknown time"}const Pl={added:"#3fb950",removed:"#f85149",modified:"#d29922"};function Ao({files:e}){return!e||e.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No changes"}):t("div",{children:e.map(n=>t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",marginBottom:"16px"},children:[t("div",{style:{background:"#161b22",padding:"10px 16px",borderBottom:"1px solid #30363d",fontFamily:"monospace",fontSize:"13px"},children:n.path}),t("div",{style:{padding:"8px 16px"},children:n.changes.map(o=>t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 0",fontSize:"13px",fontFamily:"monospace"},children:[t("span",{style:{color:Pl[o.type]||"#c9d1d9",fontWeight:"bold",width:"70px"},children:o.type}),t("span",{style:{color:"#c9d1d9"},children:o.key})]},o.key))})]},n.path))})}function Wl({owner:e,repo:n,spec:o}){const[r,i]=p(null),[l,s]=p("");if(H(()=>{!e||!n||!o||Wr(e,n,o).then(i).catch(c=>s(c.message))},[e,n,o]),l)return t("div",{style:{color:"#f85149",padding:"20px"},children:l});const d=(o==null?void 0:o.split("..."))||[];return t("div",{children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:["Comparing"," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:d[0]})," ","..."," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:d[1]})]}),r?t(Ao,{files:r.files||[]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})]})}function No({page:e,hasNext:n,onPageChange:o,disabled:r=!1,style:i}){const l=r||e<=1,s=r||!n;return t("div",{style:{...Al,...i},children:[t("button",{onClick:()=>o(Math.max(1,e-1)),disabled:l,style:Bn(l),children:"Previous"}),t("span",{style:Nl,children:["Page ",e]}),t("button",{onClick:()=>o(e+1),disabled:s,style:Bn(s),children:"Next"})]})}const Al={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"12px",gap:"12px"},Nl={color:"#8b949e",fontSize:"13px"};function Bn(e){return{background:e?"#161b22":"#21262d",color:e?"#6e7681":"#c9d1d9",border:"1px solid #30363d",padding:"6px 12px",borderRadius:"6px",cursor:e?"not-allowed":"pointer",fontSize:"13px"}}function Ml({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p("open"),[s,d]=p(1),[c,a]=p(!1),[g,u]=p(""),h=20;return H(()=>{d(1)},[e,n]),H(()=>{!e||!n||Pt(e,n,i,s,h).then(f=>{r(f),a(f.length===h),u("")}).catch(f=>u(f.message))},[e,n,i,s]),g?t("div",{style:{color:"#f85149",padding:"20px"},children:g}):t("div",{children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t("div",{style:{display:"flex",gap:"8px"},children:["open","closed","merged"].map(f=>t("button",{onClick:()=>{l(f),d(1)},style:{background:i===f?"#30363d":"transparent",color:i===f?"#f0f6fc":"#8b949e",border:"1px solid #30363d",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),pe()&&t("a",{href:`/${e}/${n}/pulls/new`,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"bold",fontSize:"13px"},children:"New pull request"})]}),o.length===0?t("div",{style:{color:"#8b949e",padding:"40px",textAlign:"center",border:"1px solid #30363d",borderRadius:"6px"},children:["No ",i," pull requests"]}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:o.map(f=>t("a",{href:`/${e}/${n}/pulls/${f.number}`,style:{display:"block",padding:"12px 16px",borderBottom:"1px solid #21262d"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:Fl(f.state),fontSize:"14px"},children:Hl(f.state)}),t("span",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold"},children:f.title})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["#",f.number," opened by ",f.author_name||"unknown"," Â· ",f.source_branch," â†’ ",f.target_branch]})]},f.id))}),(o.length>0||s>1)&&t(No,{page:s,hasNext:c,onPageChange:d})]})}function Fl(e){switch(e){case"open":return"#3fb950";case"merged":return"#a371f7";case"closed":return"#f85149";default:return"#8b949e"}}function Hl(e){switch(e){case"open":return"â—‹";case"merged":return"â—‰";case"closed":return"â—";default:return"â—‹"}}const Ol={clean:"#3fb950",conflict:"#f85149",added:"#58a6ff",deleted:"#f85149"};function Ul({preview:e,onMerge:n,merging:o}){const r=e.stats;return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"16px",borderBottom:"1px solid #30363d",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{children:[t("h3",{style:{fontSize:"16px",color:"#f0f6fc",marginBottom:"8px"},children:"Structural Merge Preview"}),t("div",{style:{fontSize:"13px",color:"#8b949e",display:"flex",gap:"16px",flexWrap:"wrap"},children:[t("span",{children:[r.total_entities," entities"]}),t("span",{style:{color:"#3fb950"},children:[r.unchanged," unchanged"]}),r.ours_modified>0&&t("span",{style:{color:"#d29922"},children:[r.ours_modified," ours modified"]}),r.theirs_modified>0&&t("span",{style:{color:"#d29922"},children:[r.theirs_modified," theirs modified"]}),r.added>0&&t("span",{style:{color:"#58a6ff"},children:[r.added," added"]}),r.deleted>0&&t("span",{style:{color:"#f85149"},children:[r.deleted," deleted"]}),r.conflicts>0&&t("span",{style:{color:"#f85149",fontWeight:"bold"},children:[r.conflicts," conflicts"]})]})]}),n&&!e.has_conflicts&&t("button",{onClick:n,disabled:o,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:o?"Merging...":"Merge pull request"}),e.has_conflicts&&t("div",{style:{color:"#f85149",fontWeight:"bold"},children:[e.conflict_count," conflict",e.conflict_count>1?"s":""," must be resolved"]})]}),t("div",{children:e.files.map(i=>t("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderBottom:"1px solid #21262d",fontSize:"13px",fontFamily:"monospace"},children:[t("span",{style:{color:Ol[i.status]||"#c9d1d9",width:"70px"},children:i.status}),t("span",{children:i.path}),i.conflict_count>0&&t("span",{style:{color:"#f85149",marginLeft:"auto"},children:[i.conflict_count," conflict",i.conflict_count>1?"s":""]})]},i.path))})]})}const Y={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22"};function Gl({files:e}){const n=(e||[]).filter(r=>r.conflict_count>0||r.status==="conflict"),o=n.reduce((r,i)=>r+(i.conflict_count||0),0);return n.length===0?t("div",{style:{border:`1px solid ${Y.border}`,borderRadius:"6px",padding:"16px",color:Y.muted,fontSize:"13px"},children:"No conflicts"}):t("div",{style:{border:`1px solid ${Y.border}`,borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:`1px solid ${Y.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("strong",{style:{color:Y.heading,fontSize:"14px"},children:"Conflict Details"}),t("span",{style:{color:Y.red,fontSize:"13px",fontWeight:"bold"},children:[o," conflict",o!==1?"s":""," in"," ",n.length," file",n.length!==1?"s":""]})]}),n.map(r=>t(ql,{file:r},r.path))]})}function ql({file:e}){const[n,o]=p(!0),r=(e.entities||[]).filter(i=>i.status==="conflict"||i.status==="both_modified");return t("div",{style:{borderBottom:`1px solid ${Y.border}`},children:[t("div",{onClick:()=>o(!n),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",cursor:"pointer",background:Y.surface,userSelect:"none"},children:[t("span",{style:{color:Y.muted,fontSize:"12px",fontFamily:"monospace",width:"16px",textAlign:"center"},children:n?"â–¼":"â–¶"}),t("span",{style:{color:Y.heading,fontSize:"13px",fontFamily:"monospace",flex:1},children:e.path}),t("span",{style:{color:Y.red,fontSize:"12px"},children:[e.conflict_count," conflict",e.conflict_count!==1?"s":""]})]}),n&&t("div",{style:{padding:"0 16px 12px 16px"},children:r.length===0?t("div",{style:{color:Y.muted,fontSize:"12px",padding:"8px 0"},children:"No entity-level conflict details available"}):r.map(i=>t(jl,{entity:i},i.key))})]})}function jl({entity:e}){const n=!!e.base_content;return t("div",{style:{border:`1px solid ${Y.border}`,borderRadius:"6px",marginTop:"10px",overflow:"hidden"},children:[t("div",{style:{padding:"8px 12px",background:Y.surface,borderBottom:`1px solid ${Y.border}`,display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:Y.red,fontSize:"12px",fontWeight:"bold"},children:"CONFLICT"}),t("span",{style:{color:Y.heading,fontSize:"13px",fontWeight:"bold"},children:e.name}),t("span",{style:{color:Y.muted,fontSize:"12px",fontFamily:"monospace"},children:e.key})]}),n&&t("div",{children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:Y.muted,background:"rgba(139, 148, 158, 0.08)",borderBottom:`1px solid ${Y.border}`},children:"BASE"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:Y.text,background:"rgba(139, 148, 158, 0.04)",borderBottom:`1px solid ${Y.border}`,overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.base_content})]}),t("div",{style:{display:"flex"},children:[t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:"#3fb950",background:"rgba(35, 134, 54, 0.1)",borderBottom:`1px solid ${Y.border}`,borderRight:`1px solid ${Y.border}`},children:"OURS"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:Y.text,background:"rgba(35, 134, 54, 0.06)",borderRight:`1px solid ${Y.border}`,overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px"},children:e.ours_content||"(empty)"})]}),t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{padding:"6px 12px",fontSize:"12px",fontWeight:"bold",color:Y.link,background:"rgba(88, 166, 255, 0.1)",borderBottom:`1px solid ${Y.border}`},children:"THEIRS"}),t("pre",{style:{margin:0,padding:"10px 12px",fontSize:"12px",fontFamily:"monospace",color:Y.text,background:"rgba(88, 166, 255, 0.06)",overflowX:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",minHeight:"40px"},children:e.theirs_content||"(empty)"})]})]})]})}function Vl({owner:e,repo:n,number:o}){const[r,i]=p(null),[l,s]=p("conversation"),[d,c]=p(null),[a,g]=p(""),[u,h]=p(null),[f,y]=p(""),[_,S]=p(null),[m,x]=p(null),[b,v]=p(""),[k,D]=p([]),[L,R]=p(null),[N,I]=p(!1),[V,w]=p(""),[O,A]=p([]),[j,de]=p([]),[he,le]=p(!1),[xe,E]=p(""),[G,K]=p(""),te=Ie({}),M=(P,q={})=>{const ne=P.trim();if(!ne)return;const $=(q.dedupeKey||ne).toLowerCase(),W=q.cooldownMs||0;if(W>0){const F=Date.now(),J=te.current[$]||0;if(F-J<W)return;te.current[$]=F}K(F=>F?F.includes(ne)?F:`${F} â€¢ ${ne}`:ne)},T=Number(o);H(()=>{i(null),c(null),g(""),h(null),y(""),S(null),x(null),v(""),D([]),R(null),I(!1),w(""),A([]),de([]),le(!1),E(""),K(""),te.current={}},[e,n,T]),H(()=>{!e||!n||!T||(ft(e,n,T).then(i).catch(P=>E(P.message)),Hr(e,n,T).then(A).catch(P=>M(P.message||"failed to load comments")),Ur(e,n,T).then(de).catch(P=>M(P.message||"failed to load reviews")))},[e,n,T]),H(()=>{if(!e||!n||!T)return;const P=gi(e,n,{onEvent:q=>{const ne=Jl(q,"number");ne==null||ne!==T||(M(`Live update: ${q.type}`),ft(e,n,T).then(i).catch($=>M($.message||"failed to refresh pull request",{dedupeKey:"stream-refresh-pr",cooldownMs:15e3})),(q.type==="pull_request.merged"||l==="merge")&&(ut(e,n,T).then(S).catch($=>M($.message||"failed to refresh merge gate",{dedupeKey:"stream-refresh-merge-gate",cooldownMs:15e3})),pn(e,n,T).then(D).catch($=>M($.message||"failed to refresh checks",{dedupeKey:"stream-refresh-checks",cooldownMs:15e3})),h(null),y(""),x(null),v("")))},onError:q=>{M(q.message||"repository event stream disconnected",{dedupeKey:"repo-event-stream-disconnected",cooldownMs:3e4})}});return()=>{P.close()}},[e,n,T,l]),H(()=>{if(!(!e||!n||!T)&&((l==="files"||l==="merge")&&!d&&!a&&Nr(e,n,T).then(P=>{c(P),g("")}).catch(P=>{const q=(P==null?void 0:P.message)||"failed to load diff";g(q),M(q)}),l==="merge"&&!u&&!f&&Mr(e,n,T).then(P=>{h(P),y("")}).catch(P=>{const q=(P==null?void 0:P.message)||"failed to load merge preview";y(q),M(q)}),l==="merge"&&(ut(e,n,T).then(S).catch(P=>M(P.message||"failed to load merge gate",{dedupeKey:"load-merge-gate",cooldownMs:1e4})),pn(e,n,T).then(D).catch(P=>M(P.message||"failed to load checks",{dedupeKey:"load-checks",cooldownMs:1e4})),r&&!m&&!b))){const P=`${r.target_branch}...${r.source_branch}`;di(e,n,P).then(q=>{x(q),v("")}).catch(q=>{const ne=(q==null?void 0:q.message)||"failed to load semver recommendation";v(ne),M(ne)})}},[l,e,n,T,r,j.length,m]),H(()=>{if(!e||!n||!(r!=null&&r.source_branch))return;let P=!1;return R(null),w(""),I(!0),_o(e,n,r.source_branch).then(q=>{P||R(q)}).catch(q=>{P||w((q==null?void 0:q.message)||"failed to load indexing status")}).finally(()=>{P||I(!1)}),()=>{P=!0}},[e,n,r==null?void 0:r.source_branch]);const X=ce(()=>Yl((d==null?void 0:d.files)||[]),[d]),Z=N||!!V||!!L,fe=async()=>{if(!e||!n||!T){E("missing repository context");return}le(!0);try{await Fr(e,n,T),ft(e,n,T).then(i).catch(P=>M(P.message||"failed to refresh pull request",{dedupeKey:"merge-refresh-pr",cooldownMs:1e4})),ut(e,n,T).then(S).catch(P=>M(P.message||"failed to refresh merge gate",{dedupeKey:"merge-refresh-merge-gate",cooldownMs:1e4}))}catch(P){E(P.message)}le(!1)};return xe?t("div",{style:{color:"#f85149",padding:"20px"},children:xe}):r?t("div",{children:[t("div",{style:{marginBottom:"20px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:[r.title," ",t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:["#",r.number]})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:[t("span",{style:{background:r.state==="open"?"#238636":r.state==="merged"?"#8957e5":"#da3633",color:"#fff",padding:"4px 10px",borderRadius:"12px",fontWeight:"bold"},children:r.state}),t("span",{style:{color:"#8b949e"},children:["wants to merge ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px"},children:r.source_branch})," into ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px"},children:r.target_branch})]})]}),Z&&t("div",{style:{marginTop:"12px",maxWidth:"420px"},children:t(Wo,{status:L,loading:N,error:V,refName:r.source_branch})})]}),t("div",{style:{display:"flex",gap:"4px",marginBottom:"20px",borderBottom:"1px solid #30363d",paddingBottom:"0"},children:["conversation","files","merge"].map(P=>t("button",{onClick:()=>s(P),style:{background:"transparent",color:l===P?"#f0f6fc":"#8b949e",border:"none",borderBottom:l===P?"2px solid #f78166":"2px solid transparent",padding:"8px 16px",cursor:"pointer",fontSize:"14px"},children:P==="conversation"?"Conversation":P==="files"?"Files changed":"Merge preview"},P))}),G&&t("div",{style:{color:"#d29922",marginBottom:"16px",padding:"10px 12px",background:"#2b230f",border:"1px solid #d29922",borderRadius:"6px",fontSize:"13px"},children:G}),l==="conversation"&&(e&&n?t(Zl,{pr:r,comments:O,reviews:j,owner:e,repo:n,prNum:T,onCommentAdded:P=>A([...O,P]),onReviewAdded:P=>de([...j,P]),onError:P=>M(P)}):t("div",{style:{color:"#f85149"},children:"Missing repository context"})),l==="files"&&(d?t("div",{style:{display:"grid",gap:"16px"},children:[t(En,{summary:X}),t(Ao,{files:d.files||[]})]}):a?t("div",{style:{color:"#f85149",border:"1px solid #f85149",borderRadius:"6px",padding:"12px 14px",background:"#1c1214"},children:a}):t("div",{style:{color:"#8b949e"},children:"Loading diff..."})),l==="merge"&&t("div",{style:{display:"grid",gap:"16px"},children:[t(En,{summary:X}),b?t("div",{style:{border:"1px solid #f85149",borderRadius:"6px",padding:"12px 16px",color:"#f85149",background:"#1c1214",fontSize:"13px"},children:b}):t(Xl,{semver:m}),t(Kl,{gate:_,checks:k}),u?t(ye,{children:[t(Ul,{preview:u,onMerge:r.state==="open"?fe:void 0,merging:he}),t(Gl,{files:u.files||[]})]}):f?t("div",{style:{color:"#f85149",border:"1px solid #f85149",borderRadius:"6px",padding:"12px 14px",background:"#1c1214"},children:f}):t("div",{style:{color:"#8b949e"},children:"Loading merge preview..."})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})}function Kl({gate:e,checks:n}){const o=(e==null?void 0:e.entity_owner_approvals)||[];return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"Merge Gate"}),t("span",{style:{color:e!=null&&e.allowed?"#3fb950":"#f85149",fontSize:"13px",fontWeight:"bold"},children:e==null?"checking...":e.allowed?"passing":"blocked"})]}),e&&!e.allowed&&e.reasons&&e.reasons.length>0&&t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{color:"#f85149",fontSize:"13px",marginBottom:"6px"},children:"Blocking reasons"}),e.reasons.map((r,i)=>t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:["- ",r]},i))]}),e&&o.length>0&&t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"8px"},children:"Entity owner approvals"}),o.map(r=>t("div",{style:{padding:"8px 0",borderTop:"1px solid #21262d"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[t("span",{style:{fontFamily:"monospace",fontSize:"13px",color:"#c9d1d9"},children:r.entity_key}),t("span",{style:{color:r.satisfied?"#3fb950":"#f85149",fontSize:"12px",fontWeight:"bold"},children:r.satisfied?"approved":"awaiting"})]}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:r.path}),r.required_owners&&r.required_owners.length>0&&t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"4px"},children:["required: ",_t(r.required_owners)]}),r.approved_by&&r.approved_by.length>0&&t("div",{style:{color:"#3fb950",fontSize:"12px",marginTop:"2px"},children:["approved by: ",_t(r.approved_by)]}),r.missing_owners&&r.missing_owners.length>0&&t("div",{style:{color:"#f85149",fontSize:"12px",marginTop:"2px"},children:["missing: ",_t(r.missing_owners)]}),r.unresolved_teams&&r.unresolved_teams.length>0&&t("div",{style:{color:"#d29922",fontSize:"12px",marginTop:"2px"},children:["unresolved teams: ",r.unresolved_teams.map(i=>`@team/${i}`).join(", ")]})]},`${r.path}:${r.entity_key}`))]}),t("div",{style:{padding:"12px 16px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"8px"},children:"Check runs"}),n.length===0?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No checks reported"}):n.map((r,i)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"6px 0",borderTop:i===0?"none":"1px solid #21262d"},children:[t("span",{style:{color:"#c9d1d9",fontSize:"13px",fontFamily:"monospace"},children:r.name}),t("span",{style:{color:r.status==="completed"&&r.conclusion==="success"?"#3fb950":r.status==="completed"?"#f85149":"#d29922",fontSize:"12px"},children:[r.status,r.conclusion?`/${r.conclusion}`:""]})]},i))]})]})}function En({summary:e}){return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"PR Impact"})}),t("div",{style:{padding:"12px 16px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(110px, 1fr))",gap:"10px"},children:[t(Ne,{label:"Files",value:e.files,color:"#8b949e"}),t(Ne,{label:"Entities",value:e.entities,color:"#8b949e"}),t(Ne,{label:"Added",value:e.added,color:"#3fb950"}),t(Ne,{label:"Modified",value:e.modified,color:"#d29922"}),t(Ne,{label:"Removed",value:e.removed,color:"#f85149"})]})]})}function Ne({label:e,value:n,color:o}){return t("div",{style:{border:"1px solid #21262d",borderRadius:"6px",padding:"10px 12px",background:"#0d1117"},children:[t("div",{style:{color:"#8b949e",fontSize:"11px",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"4px"},children:e}),t("div",{style:{color:o,fontSize:"20px",fontWeight:"bold",lineHeight:1},children:n})]})}function Xl({semver:e}){if(!e)return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px",color:"#8b949e",fontSize:"13px"},children:"Loading semver recommendation..."});const n=(e.bump||"none").toLowerCase();return t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("strong",{style:{color:"#f0f6fc",fontSize:"14px"},children:"SemVer Recommendation"}),t("span",{style:{color:n==="major"?"#f85149":n==="minor"?"#d29922":n==="patch"?"#3fb950":"#8b949e",fontWeight:"bold",fontSize:"13px",textTransform:"uppercase"},children:n})]}),t("div",{style:{padding:"12px 16px",display:"grid",gap:"8px"},children:[e.breaking_changes&&e.breaking_changes.length>0&&t(vt,{title:"Breaking changes",color:"#f85149",items:e.breaking_changes}),e.features&&e.features.length>0&&t(vt,{title:"Features",color:"#d29922",items:e.features}),e.fixes&&e.fixes.length>0&&t(vt,{title:"Fixes",color:"#3fb950",items:e.fixes}),(!e.breaking_changes||e.breaking_changes.length===0)&&(!e.features||e.features.length===0)&&(!e.fixes||e.fixes.length===0)&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No structural export surface changes detected."})]})]})}function vt({title:e,color:n,items:o}){return t("div",{children:[t("div",{style:{color:n,fontSize:"12px",fontWeight:"bold",marginBottom:"4px"},children:e}),o.slice(0,4).map(r=>t("div",{style:{color:"#c9d1d9",fontSize:"13px"},children:["- ",r]},r)),o.length>4&&t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"2px"},children:["+",o.length-4," more"]})]})}function Yl(e){const n={files:e.length,entities:0,added:0,modified:0,removed:0};for(const o of e)for(const r of o.changes||[])n.entities++,r.type==="added"?n.added++:r.type==="modified"?n.modified++:r.type==="removed"&&n.removed++;return n}function _t(e){return!e||e.length===0?"":e.map(n=>`@${n}`).join(", ")}function Jl(e,n){var r;const o=(r=e.payload)==null?void 0:r[n];if(typeof o=="number"&&Number.isFinite(o))return o;if(typeof o=="string"&&o.trim()!==""){const i=Number(o);if(Number.isFinite(i))return i}return null}function Zl({pr:e,comments:n,reviews:o,owner:r,repo:i,prNum:l,onCommentAdded:s,onReviewAdded:d,onError:c}){const[a,g]=p(""),[u,h]=p(!1),f=!!pe(),y=async m=>{if(m.preventDefault(),!!a.trim()){h(!0);try{const x=await Or(r,i,l,{body:a});s(x),g("")}catch(x){c(x.message||"failed to submit comment")}h(!1)}},_=async m=>{h(!0);try{const x=await Gr(r,i,l,{state:m,body:a||void 0});d(x),g("")}catch(x){c(x.message||"failed to submit review")}h(!1)},S=[...n.map(m=>({...m,kind:"comment",time:m.created_at})),...o.map(m=>({...m,kind:"review",time:m.created_at}))].sort((m,x)=>(m.time||"").localeCompare(x.time||""));return t("div",{children:[e.body&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"16px"},children:t("div",{style:{color:"#c9d1d9",fontSize:"14px",whiteSpace:"pre-wrap"},children:e.body})}),S.map((m,x)=>t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px 16px",marginBottom:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"12px",color:"#8b949e"},children:[t("strong",{style:{color:"#c9d1d9"},children:m.author_name||"user"}),m.kind==="review"&&t("span",{style:{color:m.state==="approved"?"#3fb950":m.state==="changes_requested"?"#f85149":"#d29922",fontWeight:"bold"},children:m.state==="approved"?"approved":m.state==="changes_requested"?"requested changes":"commented"}),m.file_path&&t("span",{style:{fontFamily:"monospace"},children:m.file_path}),m.entity_stable_id&&t("span",{style:{fontFamily:"monospace",color:"#58a6ff"},children:["stable:",m.entity_stable_id]}),m.entity_key&&t("span",{style:{fontFamily:"monospace",color:"#d2a8ff"},children:m.entity_key})]}),m.body&&t("div",{style:{color:"#c9d1d9",fontSize:"13px",whiteSpace:"pre-wrap"},children:m.body})]},x)),f&&e.state==="open"&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginTop:"16px"},children:[t("textarea",{value:a,onInput:m=>g(m.target.value),placeholder:"Leave a comment...",style:{width:"100%",minHeight:"80px",background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px",color:"#c9d1d9",fontSize:"13px",resize:"vertical",boxSizing:"border-box"}}),t("div",{style:{display:"flex",gap:"8px",marginTop:"8px",justifyContent:"flex-end"},children:[t("button",{onClick:()=>_("approved"),disabled:u,style:{background:"#238636",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Approve"}),t("button",{onClick:()=>_("changes_requested"),disabled:u,style:{background:"#da3633",color:"#fff",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Request changes"}),t("button",{onClick:y,disabled:u||!a.trim(),style:{background:"#30363d",color:"#c9d1d9",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Comment"})]})]})]})}function Ql({owner:e,repo:n}){const[o,r]=p(""),[i,l]=p(""),[s,d]=p([]),[c,a]=p(""),[g,u]=p("main"),[h,f]=p(!1),[y,_]=p(!0),[S,m]=p("");H(()=>{!e||!n||Promise.all([vo(e,n),Ge(e,n)]).then(([b,v])=>{d(b);const k=v.default_branch||"main";u(k);const D=b.find(L=>L!==k)||b[0]||"";a(D)}).catch(b=>m(b.message)).finally(()=>_(!1))},[e,n]);const x=async b=>{if(b.preventDefault(),!(!e||!n)){if(!o.trim()||!c){m("Title and source branch are required");return}if(c===g){m("Source and target branch must be different");return}f(!0),m("");try{const v=await Ar(e,n,{title:o,body:i,source_branch:c,target_branch:g});location.href=`/${e}/${n}/pulls/${v.number}`}catch(v){m(v.message)}finally{f(!1)}}};return pe()?y?t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."}):S&&s.length===0?t("div",{style:{color:"#f85149",padding:"20px"},children:S}):s.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No branches found. Push at least one branch first."}):t("div",{style:{maxWidth:"800px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:"Open a new pull request"}),S&&t("div",{style:{color:"#f85149",marginBottom:"12px",border:"1px solid #30363d",padding:"10px",borderRadius:"6px"},children:S}),t("form",{onSubmit:x,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:o,onInput:b=>r(b.target.value),placeholder:"Title",style:Ze}),t("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[t("label",{style:Ln,children:["Source",t("select",{value:c,onChange:b=>a(b.target.value),style:Ze,children:s.map(b=>t("option",{value:b,children:b},b))})]}),t("label",{style:Ln,children:["Target",t("select",{value:g,onChange:b=>u(b.target.value),style:Ze,children:s.map(b=>t("option",{value:b,children:b},b))})]})]}),t("textarea",{value:i,onInput:b=>l(b.target.value),placeholder:"Description (optional)",style:{...Ze,minHeight:"150px",resize:"vertical"}}),t("button",{type:"submit",disabled:h,style:{background:h?"#1f6f3d":"#238636",color:"#fff",border:"none",padding:"10px 16px",borderRadius:"6px",cursor:h?"not-allowed":"pointer",fontWeight:"bold",alignSelf:"flex-start"},children:h?"Creating...":"Create pull request"})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Sign in to create a pull request."})}const Ze={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Ln={color:"#c9d1d9",fontSize:"13px",display:"flex",flexDirection:"column",gap:"6px",minWidth:"220px",flex:1};function es({owner:e,repo:n,ref:o}){const[r,i]=p([]),[l,s]=p(""),[d,c]=p(!0);return H(()=>{if(!e||!n||!o){i([]),s(""),c(!1);return}let a=!1;return c(!0),s(""),Dr(e,n,o).then(g=>{a||i(g)}).catch(g=>{a||(s(g.message),i([]))}).finally(()=>{a||c(!1)}),()=>{a=!0}},[e,n,o]),l?t("div",{style:{color:"#f85149",padding:"20px"},children:l}):t("div",{children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"16px"},children:["Commits on ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"16px"},children:o})]}),d?t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."}):r.length===0?t("div",{style:{color:"#8b949e",padding:"20px"},children:"No commits yet"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:r.map(a=>{var g;return t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #21262d",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t("div",{children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"4px"},children:a.message}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[a.author," committed ",ts(a.timestamp)]})]}),t("div",{style:{display:"flex",gap:"8px",flexShrink:0},children:t("a",{href:`/${e}/${n}/tree/${a.hash}`,style:{fontFamily:"monospace",fontSize:"12px",color:"#58a6ff",border:"1px solid #30363d",padding:"4px 8px",borderRadius:"6px"},children:(g=a.hash)==null?void 0:g.slice(0,10)})})]},a.hash)})})]})}function ts(e){if(!e)return"";const n=ns(e);if(Number.isNaN(n.getTime()))return"";const r=new Date().getTime()-n.getTime(),i=Math.floor(r/864e5);return i===0?"today":i===1?"yesterday":i<30?`${i} days ago`:n.toLocaleDateString()}function ns(e){if(typeof e=="number")return new Date(e<1e12?e*1e3:e);if(typeof e=="string"){const n=Number(e);return Number.isNaN(n)?new Date(e):new Date(n<1e12?n*1e3:n)}return new Date(NaN)}function os({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p("open"),[s,d]=p(1),[c,a]=p(!1),[g,u]=p(!0),[h,f]=p(!1),[y,_]=p(""),[S,m]=p(""),[x,b]=p(!1),[v,k]=p(""),D=20,L=!!pe(),R=I=>{!e||!n||(u(!0),ci(e,n,i,I,D).then(V=>{r(V),a(V.length===D),k("")}).catch(V=>k(V.message)).finally(()=>u(!1)))};H(()=>{d(1)},[e,n]),H(()=>{R(s)},[e,n,i,s]);const N=async I=>{if(I.preventDefault(),!(!e||!n||!y.trim())){b(!0),k("");try{const V=await ai(e,n,{title:y,body:S});if(_(""),m(""),f(!1),i==="open"||i==="all")if(s===1){const w=[V,...o];r(w.slice(0,D)),a(c||w.length>D)}else d(1);else R(s)}catch(V){k(V.message||"failed to create issue")}finally{b(!1)}}};return t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"Issues"}),L&&t("button",{onClick:()=>f(!h),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},children:h?"Cancel":"New issue"})]}),t("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:["open","closed","all"].map(I=>t("button",{onClick:()=>{l(I),d(1)},style:{background:i===I?"#1f6feb":"#161b22",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"13px"},children:I},I))}),v&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:v}),h&&L&&t("form",{onSubmit:N,style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px",marginBottom:"12px"},children:[t("input",{value:y,onInput:I=>_(I.target.value),placeholder:"Title",style:{width:"100%",marginBottom:"8px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"14px"}}),t("textarea",{value:S,onInput:I=>m(I.target.value),placeholder:"Description (optional)",style:{width:"100%",minHeight:"100px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"13px",resize:"vertical"}}),t("div",{style:{marginTop:"8px",display:"flex",justifyContent:"flex-end"},children:t("button",{type:"submit",disabled:x||!y.trim(),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:x?"not-allowed":"pointer"},children:x?"Creating...":"Create issue"})})]}),g?t("div",{style:{color:"#8b949e"},children:"Loading..."}):o.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No issues"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:o.map((I,V)=>t("a",{href:`/${e}/${n}/issues/${I.number}`,style:{display:"block",textDecoration:"none",padding:"12px 14px",borderTop:V===0?"none":"1px solid #30363d"},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginBottom:"4px"},children:["#",I.number," ",I.title]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[I.state," by ",I.author_name||"user"]})]},I.id))}),!g&&(o.length>0||s>1)&&t(No,{page:s,hasNext:c,onPageChange:d})]})}function rs({owner:e,repo:n,number:o}){const[r,i]=p(null),[l,s]=p([]),[d,c]=p(""),[a,g]=p(!1),[u,h]=p(""),f=!!pe(),y=Number(o||0),_=()=>{!e||!n||!y||(pi(e,n,y).then(i).catch(x=>h(x.message)),hi(e,n,y).then(s).catch(x=>h(x.message||"failed to load comments")))};H(()=>{_()},[e,n,y]);const S=async x=>{if(x.preventDefault(),!(!e||!n||!y||!d.trim())){g(!0);try{const b=await ui(e,n,y,{body:d});s([...l,b]),c("")}catch(b){h(b.message||"failed to comment")}finally{g(!1)}}},m=async x=>{if(!(!e||!n||!y||!r)){g(!0);try{const b=await fi(e,n,y,{state:x});i(b)}catch(b){h(b.message||"failed to update issue")}finally{g(!1)}}};return u?t("div",{style:{color:"#f85149",padding:"20px"},children:u}):r?t("div",{children:[t("a",{href:`/${e}/${n}/issues`,style:{color:"#58a6ff",fontSize:"13px",textDecoration:"none"},children:"Back to issues"}),t("div",{style:{marginTop:"10px",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"6px"},children:[r.title," ",t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:["#",r.number]})]}),t("div",{style:{color:"#8b949e",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("span",{style:{color:"#fff",background:r.state==="open"?"#238636":"#da3633",borderRadius:"12px",padding:"2px 8px",fontWeight:"bold",fontSize:"12px"},children:r.state}),t("span",{children:["opened by ",r.author_name||"user"]}),f&&t("button",{onClick:()=>m(r.state==="open"?"closed":"open"),disabled:a,style:{border:"1px solid #30363d",background:"#161b22",color:"#c9d1d9",borderRadius:"6px",padding:"5px 9px",cursor:a?"not-allowed":"pointer",fontSize:"12px"},children:r.state==="open"?"Close issue":"Reopen issue"})]})]}),r.body&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px",marginBottom:"12px",whiteSpace:"pre-wrap",color:"#c9d1d9",fontSize:"13px"},children:r.body}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",marginBottom:"12px"},children:l.length===0?t("div",{style:{color:"#8b949e",padding:"12px",fontSize:"13px"},children:"No comments yet"}):l.map((x,b)=>t("div",{style:{borderTop:b===0?"none":"1px solid #30363d",padding:"10px 12px"},children:[t("div",{style:{color:"#8b949e",fontSize:"12px",marginBottom:"6px"},children:x.author_name||"user"}),t("div",{style:{color:"#c9d1d9",fontSize:"13px",whiteSpace:"pre-wrap"},children:x.body})]},x.id||b))}),f&&t("form",{onSubmit:S,style:{border:"1px solid #30363d",borderRadius:"6px",padding:"12px"},children:[t("textarea",{value:d,onInput:x=>c(x.target.value),placeholder:"Leave a comment",style:{width:"100%",minHeight:"90px",boxSizing:"border-box",background:"#0d1117",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"8px 10px",fontSize:"13px",resize:"vertical"}}),t("div",{style:{marginTop:"8px",display:"flex",justifyContent:"flex-end"},children:t("button",{type:"submit",disabled:a||!d.trim(),style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"6px 12px",cursor:a?"not-allowed":"pointer"},children:"Comment"})})]})]}):t("div",{style:{color:"#8b949e",padding:"20px"},children:"Loading..."})}function is({path:e}){const[n,o]=p([]),[r,i]=p("unread"),[l,s]=p(!0),[d,c]=p(""),a=!!pe(),g=()=>{s(!0),mr(r==="unread"?!0:void 0).then(o).catch(f=>c(f.message)).finally(()=>s(!1))};H(()=>{a&&g()},[r]);const u=async f=>{try{await yr(f),o(n.map(y=>y.id===f?{...y,read_at:new Date().toISOString()}:y))}catch(y){c(y.message||"failed to mark notification as read")}},h=async()=>{try{await vr(),o(n.map(f=>({...f,read_at:f.read_at||new Date().toISOString()})))}catch(f){c(f.message||"failed to mark all notifications as read")}};return a?t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"16px"},children:[t("h1",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"Notifications"}),r==="unread"&&n.some(f=>!f.read_at)&&t("button",{onClick:h,style:{background:"#238636",color:"#fff",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"13px"},children:"Mark all as read"})]}),t("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:["unread","all"].map(f=>t("button",{onClick:()=>i(f),style:{background:r===f?"#1f6feb":"#161b22",color:"#c9d1d9",border:"1px solid #30363d",borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"13px"},children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),d&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:d}),l?t("div",{style:{color:"#8b949e"},children:"Loading..."}):n.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No notifications"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:n.map((f,y)=>{const _=!f.read_at;return t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",padding:"12px 14px",borderTop:y===0?"none":"1px solid #30363d",borderLeft:_?"3px solid #58a6ff":"3px solid transparent"},children:[t("a",{href:f.resource_path,style:{textDecoration:"none",flex:1,minWidth:0},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[t("span",{style:{color:"#fff",background:ls(f.type),borderRadius:"12px",padding:"2px 8px",fontWeight:"bold",fontSize:"11px",whiteSpace:"nowrap"},children:f.type}),t("span",{style:{color:"#f0f6fc",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.title})]}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[f.actor_name," Â· ",ss(f.created_at)]})]}),_&&t("button",{onClick:S=>{S.preventDefault(),u(f.id)},style:{border:"1px solid #30363d",background:"#161b22",color:"#c9d1d9",borderRadius:"6px",padding:"5px 9px",cursor:"pointer",fontSize:"12px",whiteSpace:"nowrap",flexShrink:0},children:"Mark as read"})]},f.id)})})]}):t("div",{style:{color:"#8b949e",padding:"40px",textAlign:"center",border:"1px solid #30363d",borderRadius:"6px"},children:"Sign in to view notifications"})}function ls(e){switch(e){case"issue":return"#238636";case"pull_request":return"#8957e5";case"review":return"#d29922";case"comment":return"#30363d";case"mention":return"#1f6feb";default:return"#30363d"}}function ss(e){if(!e)return"";const n=typeof e=="string"?new Date(e):new Date(Number(e));if(Number.isNaN(n.getTime()))return"";const r=new Date().getTime()-n.getTime(),i=Math.floor(r/1e3);if(i<60)return"just now";const l=Math.floor(i/60);if(l<60)return`${l} minute${l===1?"":"s"} ago`;const s=Math.floor(l/60);if(s<24)return`${s} hour${s===1?"":"s"} ago`;const d=Math.floor(s/24);return d===1?"yesterday":d<30?`${d} days ago`:n.toLocaleDateString()}function ds({path:e}){return!pe()?t("div",{style:{maxWidth:"600px",margin:"60px auto",textAlign:"center"},children:t("p",{style:{color:"#8b949e",fontSize:"16px"},children:"Sign in to view settings"})}):t("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[t("h1",{style:{fontSize:"24px",color:"#f0f6fc",marginBottom:"24px"},children:"Settings"}),t(as,{}),t(ps,{}),t(cs,{})]})}function as(){const[e,n]=p(null),[o,r]=p(!0),[i,l]=p("");return H(()=>{yo().then(n).catch(s=>l(s.message)).finally(()=>r(!1))},[]),t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"12px"},children:"Profile"}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:i}),o?t("div",{style:{color:"#8b949e"},children:"Loading..."}):e?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22"},children:[t("div",{style:{marginBottom:"12px"},children:[t("span",{style:{color:"#8b949e",fontSize:"13px"},children:"Username"}),t("div",{style:{color:"#c9d1d9",fontSize:"15px",marginTop:"4px"},children:e.username})]}),t("div",{children:[t("span",{style:{color:"#8b949e",fontSize:"13px"},children:"Email"}),t("div",{style:{color:"#c9d1d9",fontSize:"15px",marginTop:"4px"},children:e.email})]})]}):null]})}function cs(){const[e,n]=p([]),[o,r]=p(!0),[i,l]=p(""),[s,d]=p(!1),[c,a]=p(""),[g,u]=p(""),[h,f]=p(!1),y=()=>{r(!0),Qr().then(n).catch(m=>l(m.message)).finally(()=>r(!1))};H(()=>{y()},[]);const _=async m=>{if(m.preventDefault(),!(!c.trim()||!g.trim())){f(!0),l("");try{await ei(c.trim(),g.trim()),a(""),u(""),d(!1),y()}catch(x){l(x.message||"Failed to add SSH key")}finally{f(!1)}}},S=async(m,x)=>{if(window.confirm(`Delete SSH key "${x}"?`)){l("");try{await ti(m),y()}catch(b){l(b.message||"Failed to delete SSH key")}}};return t("div",{style:{marginBottom:"32px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",margin:0},children:"SSH Keys"}),t("button",{onClick:()=>d(!s),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"13px"},children:s?"Cancel":"Add SSH Key"})]}),i&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:i}),s&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",marginBottom:"16px",background:"#161b22"},children:t("form",{onSubmit:_,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:c,onInput:m=>a(m.target.value),placeholder:"Key name (e.g. work laptop)",style:Dn}),t("textarea",{value:g,onInput:m=>u(m.target.value),placeholder:"Paste your public key here (ssh-ed25519 AAAA... or ssh-rsa AAAA...)",style:{...Dn,minHeight:"100px",fontFamily:"monospace",resize:"vertical"}}),t("button",{type:"submit",disabled:h||!c.trim()||!g.trim(),style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:h?"not-allowed":"pointer",fontWeight:"bold",fontSize:"13px",alignSelf:"flex-start",opacity:h||!c.trim()||!g.trim()?.6:1},children:h?"Adding...":"Add key"})]})}),o?t("div",{style:{color:"#8b949e"},children:"Loading..."}):e.length===0?t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",color:"#8b949e"},children:"No SSH keys configured"}):t("div",{style:{border:"1px solid #30363d",borderRadius:"6px"},children:e.map((m,x)=>t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderTop:x===0?"none":"1px solid #30363d"},children:[t("div",{style:{flex:1,minWidth:0},children:[t("div",{style:{color:"#f0f6fc",fontSize:"14px",fontWeight:"bold",marginBottom:"4px"},children:m.name}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:[t("span",{style:{marginRight:"12px"},children:m.key_type}),t("span",{style:{fontFamily:"monospace"},children:m.fingerprint&&m.fingerprint.length>32?m.fingerprint.substring(0,32)+"...":m.fingerprint})]}),t("div",{style:{color:"#8b949e",fontSize:"11px",marginTop:"2px"},children:["Added ",m.created_at?new Date(m.created_at).toLocaleDateString():"unknown"]})]}),t("button",{onClick:()=>S(m.id,m.name),style:{background:"transparent",color:"#f85149",border:"1px solid #f85149",padding:"4px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",marginLeft:"12px",flexShrink:0},children:"Delete"})]},m.id))})]})}function ps(){const[e,n]=p([]),[o,r]=p(!0),[i,l]=p(!1),[s,d]=p(""),[c,a]=p(""),g=jt(),u=()=>{r(!0),ni().then(n).catch(f=>d(f.message||"Failed to load passkeys")).finally(()=>r(!1))};return H(()=>{u()},[]),t("div",{style:{marginBottom:"32px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"12px"},children:"Passkeys"}),s&&t("div",{style:{color:"#f85149",marginBottom:"12px"},children:s}),c&&t("div",{style:{color:"#3fb950",marginBottom:"12px"},children:c}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22"},children:[t("p",{style:{marginTop:0,marginBottom:"12px",color:"#8b949e",fontSize:"13px"},children:"Passkeys are the preferred passwordless sign-in method for gothub."}),t("button",{onClick:async()=>{l(!0),d(""),a("");try{const f=await hr(),y=await vi(f.options),_=await gr(f.session_id,y);a(`Passkey registered (${_.credential_id.slice(0,16)}...)`),u()}catch(f){d(f.message||"Failed to register passkey")}finally{l(!1)}},disabled:!g||i,style:{background:"#238636",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:!g||i?"not-allowed":"pointer",fontWeight:"bold",fontSize:"13px",opacity:!g||i?.6:1},children:g?i?"Registering...":"Register passkey":"Passkeys unavailable in this browser"}),t("div",{style:{marginTop:"16px"},children:o?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Loading passkeys..."}):e.length===0?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"No passkeys registered"}):t("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(f=>t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",background:"#0d1117"},children:[t("div",{style:{color:"#c9d1d9",fontFamily:"monospace",fontSize:"12px",marginBottom:"4px"},children:f.credential_id}),t("div",{style:{color:"#8b949e",fontSize:"12px"},children:["Added ",f.created_at?new Date(f.created_at).toLocaleString():"unknown",f.last_used_at?`, last used ${new Date(f.last_used_at).toLocaleString()}`:""]})]},f.id))})})]})]})}const Dn={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},fs=[{key:"general",label:"General"},{key:"collaborators",label:"Collaborators"},{key:"webhooks",label:"Webhooks"},{key:"runners",label:"Runners"},{key:"branch-protection",label:"Branch Protection"}],C={bg:"#0d1117",text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",green:"#238636",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb"},ge={background:C.bg,border:`1px solid ${C.border}`,borderRadius:"6px",padding:"10px 12px",color:C.text,fontSize:"14px"},Mo={color:C.text,padding:"8px 16px",borderRadius:"6px",fontSize:"14px",border:`1px solid ${C.border}`,cursor:"pointer",background:C.surface},us={...Mo,background:C.active},at={background:C.green,color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},Ve={background:C.red,color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},In={background:C.surface,color:C.text,border:`1px solid ${C.border}`,padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},ze={border:`1px solid ${C.border}`,borderRadius:"6px",padding:"20px",marginBottom:"20px",background:C.surface},be={color:C.heading,fontSize:"14px",fontWeight:"bold",marginBottom:"6px",display:"block"};function hs({owner:e,repo:n}){const[o,r]=p("general"),[i,l]=p(null),[s,d]=p("");return H(()=>{!e||!n||Ge(e,n).then(l).catch(c=>d(c.message))},[e,n]),!e||!n?t("div",{style:{color:C.red,padding:"20px"},children:"Missing repository context."}):pe()?s?t("div",{style:{color:C.red,padding:"20px"},children:s}):i?t("div",{children:[t("h1",{style:{fontSize:"20px",color:C.heading,marginBottom:"4px"},children:[t("a",{href:`/${e}`,style:{color:C.link,textDecoration:"none"},children:e}),t("span",{style:{color:C.muted},children:" / "}),t("a",{href:`/${e}/${n}`,style:{color:C.link,fontWeight:"bold",textDecoration:"none"},children:n}),t("span",{style:{color:C.muted,fontWeight:"normal"},children:" - Settings"})]}),t("div",{style:{display:"flex",gap:"8px",marginTop:"20px",marginBottom:"24px",flexWrap:"wrap"},children:fs.map(c=>t("button",{onClick:()=>r(c.key),style:o===c.key?us:Mo,children:c.label},c.key))}),o==="general"&&t(gs,{owner:e,repo:n,repoInfo:i}),o==="collaborators"&&t(xs,{owner:e,repo:n}),o==="webhooks"&&t(ms,{owner:e,repo:n}),o==="runners"&&t(bs,{owner:e,repo:n}),o==="branch-protection"&&t(ys,{owner:e,repo:n})]}):t("div",{style:{color:C.muted,padding:"20px"},children:"Loading..."}):t("div",{style:{color:C.red,padding:"20px"},children:"You must be logged in to access repository settings."})}function gs({owner:e,repo:n,repoInfo:o}){const[r,i]=p(!1),[l,s]=p(""),d=async()=>{if(window.confirm(`Are you sure you want to delete "${e}/${n}"? This action cannot be undone.`)){i(!0),s("");try{await li(e,n),location.href="/"}catch(a){s(a.message||"Failed to delete repository"),i(!1)}}};return t("div",{children:[t("div",{style:ze,children:[t("label",{style:be,children:"Repository name"}),t("input",{type:"text",value:`${e}/${n}`,readOnly:!0,style:{...ge,width:"100%",boxSizing:"border-box",opacity:"0.7",cursor:"not-allowed"}}),o.description&&t("div",{style:{marginTop:"12px"},children:[t("label",{style:be,children:"Description"}),t("div",{style:{color:C.text,fontSize:"14px"},children:o.description})]}),o.parent_owner&&o.parent_name&&t("div",{style:{marginTop:"12px",color:C.muted,fontSize:"13px"},children:["forked from"," ",t("a",{href:`/${o.parent_owner}/${o.parent_name}`,style:{color:C.link,textDecoration:"none"},children:[o.parent_owner,"/",o.parent_name]})]})]}),t("div",{style:{border:`2px solid ${C.red}`,borderRadius:"6px",padding:"20px",background:C.surface},children:[t("h3",{style:{color:C.red,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Danger Zone"}),t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[t("div",{children:[t("div",{style:{color:C.heading,fontSize:"14px",fontWeight:"bold"},children:"Delete this repository"}),t("div",{style:{color:C.muted,fontSize:"13px"},children:"Once you delete a repository, there is no going back."})]}),t("button",{onClick:d,disabled:r,style:{...Ve,opacity:r?"0.6":"1"},children:r?"Deleting...":"Delete this repository"})]}),l&&t("div",{style:{color:C.red,marginTop:"12px",fontSize:"13px"},children:l})]})]})}function xs({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p(!0),[s,d]=p(""),[c,a]=p(""),[g,u]=p("read"),[h,f]=p(!1),y=async()=>{l(!0);try{const x=await oi(e,n);r(x||[])}catch(x){d(x.message)}l(!1)};H(()=>{y()},[e,n]);const _=async x=>{if(x.preventDefault(),!!c.trim()){f(!0),d("");try{await ri(e,n,c.trim(),g),a(""),u("read"),await y()}catch(b){d(b.message||"Failed to add collaborator")}f(!1)}},S=async x=>{if(window.confirm(`Remove collaborator "${x}"?`)){d("");try{await ii(e,n,x),await y()}catch(v){d(v.message||"Failed to remove collaborator")}}},m=x=>{const b=x==="admin"?"#8957e5":x==="write"?C.green:C.border;return t("span",{style:{background:b,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",marginLeft:"8px"},children:x})};return t("div",{children:[s&&t("div",{style:{color:C.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Add collaborator"}),t("form",{onSubmit:_,style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"flex-end"},children:[t("div",{style:{flex:"1",minWidth:"200px"},children:[t("label",{style:be,children:"Username"}),t("input",{type:"text",value:c,onInput:x=>a(x.target.value),placeholder:"username",style:{...ge,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{minWidth:"120px"},children:[t("label",{style:be,children:"Role"}),t("select",{value:g,onChange:x=>u(x.target.value),style:{...ge,width:"100%",boxSizing:"border-box"},children:[t("option",{value:"read",children:"read"}),t("option",{value:"write",children:"write"}),t("option",{value:"admin",children:"admin"})]})]}),t("button",{type:"submit",disabled:h||!c.trim(),style:{...at,opacity:h||!c.trim()?"0.6":"1"},children:h?"Adding...":"Add"})]})]}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Collaborators"}),i?t("div",{style:{color:C.muted,fontSize:"14px"},children:"Loading..."}):o.length===0?t("div",{style:{color:C.muted,fontSize:"14px"},children:"No collaborators yet."}):o.map((x,b)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderTop:b===0?"none":`1px solid ${C.border}`},children:[t("div",{style:{display:"flex",alignItems:"center"},children:[t("span",{style:{color:C.text,fontSize:"14px",fontWeight:"bold"},children:x.username}),m(x.role)]}),t("button",{onClick:()=>S(x.username),style:{...Ve,padding:"4px 10px",fontSize:"12px"},children:"Remove"})]},x.username||b))]})]})}function ms({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p(!0),[s,d]=p(""),[c,a]=p(""),[g,u]=p(""),[h,f]=p(""),[y,_]=p(!1),[S,m]=p(null),[x,b]=p([]),[v,k]=p(!1),D=async()=>{l(!0);try{const w=await Xr(e,n);r(w||[])}catch(w){d(w.message)}l(!1)};H(()=>{D()},[e,n]);const L=async w=>{if(w.preventDefault(),!!c.trim()){_(!0),d("");try{const O=h.split(",").map(j=>j.trim()).filter(Boolean),A={url:c.trim()};g.trim()&&(A.secret=g.trim()),O.length>0&&(A.events=O),await Kr(e,n,A),a(""),u(""),f(""),await D()}catch(O){d(O.message||"Failed to create webhook")}_(!1)}},R=async w=>{if(window.confirm(`Delete webhook #${w}?`)){d("");try{await Yr(e,n,w),S===w&&(m(null),b([])),await D()}catch(A){d(A.message||"Failed to delete webhook")}}},N=async w=>{d("");try{await Jr(e,n,w)}catch(O){d(O.message||"Ping failed")}},I=async w=>{if(S===w){m(null),b([]);return}m(w),k(!0);try{const O=await fn(e,n,w);b(O||[])}catch(O){d(O.message||"Failed to load deliveries"),b([])}k(!1)},V=async(w,O)=>{d("");try{await Zr(e,n,w,O);const A=await fn(e,n,w);b(A||[])}catch(A){d(A.message||"Redelivery failed")}};return t("div",{children:[s&&t("div",{style:{color:C.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Add webhook"}),t("form",{onSubmit:L,children:[t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Payload URL"}),t("input",{type:"text",value:c,onInput:w=>a(w.target.value),placeholder:"https://example.com/webhook",style:{...ge,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Secret (optional)"}),t("input",{type:"text",value:g,onInput:w=>u(w.target.value),placeholder:"webhook secret",style:{...ge,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"12px"},children:[t("label",{style:be,children:"Events (comma-separated)"}),t("input",{type:"text",value:h,onInput:w=>f(w.target.value),placeholder:"push, pull_request, issues",style:{...ge,width:"100%",boxSizing:"border-box"}})]}),t("button",{type:"submit",disabled:y||!c.trim(),style:{...at,opacity:y||!c.trim()?"0.6":"1"},children:y?"Creating...":"Create webhook"})]})]}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Webhooks"}),i?t("div",{style:{color:C.muted,fontSize:"14px"},children:"Loading..."}):o.length===0?t("div",{style:{color:C.muted,fontSize:"14px"},children:"No webhooks configured."}):o.map((w,O)=>t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 0",borderTop:O===0?"none":`1px solid ${C.border}`,flexWrap:"wrap",gap:"8px"},children:[t("div",{onClick:()=>I(w.id),style:{cursor:"pointer",flex:"1",minWidth:"200px"},children:[t("div",{style:{color:C.link,fontSize:"14px",fontWeight:"bold"},children:w.url}),t("div",{style:{color:C.muted,fontSize:"12px"},children:["ID: ",w.id]})]}),t("div",{style:{display:"flex",gap:"6px"},children:[t("button",{onClick:()=>N(w.id),style:{...In,padding:"4px 10px",fontSize:"12px"},children:"Ping"}),t("button",{onClick:()=>R(w.id),style:{...Ve,padding:"4px 10px",fontSize:"12px"},children:"Delete"})]})]}),S===w.id&&t("div",{style:{marginLeft:"16px",marginBottom:"12px",padding:"12px",background:C.bg,border:`1px solid ${C.border}`,borderRadius:"6px"},children:[t("h4",{style:{color:C.heading,fontSize:"13px",marginTop:"0",marginBottom:"10px"},children:"Recent Deliveries"}),v?t("div",{style:{color:C.muted,fontSize:"13px"},children:"Loading deliveries..."}):x.length===0?t("div",{style:{color:C.muted,fontSize:"13px"},children:"No deliveries yet."}):x.map((A,j)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 0",borderTop:j===0?"none":`1px solid ${C.border}`,flexWrap:"wrap",gap:"6px"},children:[t("div",{children:[t("span",{style:{color:C.text,fontSize:"13px",fontFamily:"monospace"},children:A.id}),t("span",{style:{marginLeft:"8px",color:A.status==="success"||A.response_code===200?"#3fb950":C.red,fontSize:"12px",fontWeight:"bold"},children:A.status||(A.response_code!=null?`HTTP ${A.response_code}`:"unknown")}),A.created_at&&t("span",{style:{color:C.muted,fontSize:"12px",marginLeft:"8px"},children:new Date(A.created_at).toLocaleString()})]}),t("button",{onClick:()=>V(w.id,A.id),style:{...In,padding:"2px 8px",fontSize:"11px"},children:"Redeliver"})]},A.id||j))]})]},w.id||O))]})]})}function bs({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p(!0),[s,d]=p(""),[c,a]=p(""),[g,u]=p(24),[h,f]=p(!1),[y,_]=p(""),S=async()=>{l(!0),d("");try{const b=await $r(e,n);r(Array.isArray(b)?b:[])}catch(b){d((b==null?void 0:b.message)||"Failed to load runner tokens")}finally{l(!1)}};H(()=>{S()},[e,n]);const m=async b=>{if(b.preventDefault(),!!c.trim()){f(!0),d(""),_("");try{const v={name:c.trim()};g>0&&(v.expires_in_hours=g);const k=await zr(e,n,v);_(k.token||""),a(""),await S()}catch(v){d((v==null?void 0:v.message)||"Failed to create runner token")}finally{f(!1)}}},x=async b=>{if(window.confirm("Revoke this runner token?")){d("");try{await Rr(e,n,b),await S()}catch(k){d((k==null?void 0:k.message)||"Failed to revoke runner token")}}};return t("div",{children:[s&&t("div",{style:{color:C.red,marginBottom:"12px",fontSize:"13px"},children:s}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"10px"},children:"Runner Tokens"}),t("div",{style:{color:C.muted,fontSize:"13px",marginBottom:"14px"},children:"Use runner tokens for BYO CI runners to update PR check runs without user credentials."}),y&&t("div",{style:{marginBottom:"12px",padding:"10px",background:C.bg,border:`1px solid ${C.border}`,borderRadius:"6px"},children:[t("div",{style:{color:C.heading,fontSize:"12px",marginBottom:"6px"},children:"New token (shown once)"}),t("code",{style:{color:"#3fb950",fontSize:"12px",wordBreak:"break-all"},children:y})]}),t("form",{onSubmit:m,style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:[t("input",{type:"text",value:c,onInput:b=>a(b.target.value),placeholder:"runner name",style:{...ge,minWidth:"200px",flex:"1"}}),t("input",{type:"number",min:"0",max:"8760",value:g,onInput:b=>u(parseInt(b.target.value,10)||0),style:{...ge,width:"120px"},title:"Expires in hours (0 = never)"}),t("button",{type:"submit",disabled:h||!c.trim(),style:{...at,opacity:h||!c.trim()?"0.6":"1"},children:h?"Creating...":"Create token"})]}),i?t("div",{style:{color:C.muted,fontSize:"14px"},children:"Loading tokens..."}):o.length===0?t("div",{style:{color:C.muted,fontSize:"14px"},children:"No runner tokens yet."}):o.map((b,v)=>t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",borderTop:v===0?"none":`1px solid ${C.border}`,padding:"10px 0",flexWrap:"wrap"},children:[t("div",{children:[t("div",{style:{color:C.heading,fontSize:"14px",fontWeight:"bold"},children:b.name}),t("div",{style:{color:C.muted,fontSize:"12px"},children:[b.token_prefix," â€¢ created ",b.created_at?new Date(b.created_at).toLocaleString():"n/a",b.last_used_at?` â€¢ last used ${new Date(b.last_used_at).toLocaleString()}`:"",b.expires_at?` â€¢ expires ${new Date(b.expires_at).toLocaleString()}`:" â€¢ no expiry",b.revoked_at?" â€¢ revoked":""]})]}),t("button",{onClick:()=>x(b.id),disabled:!!b.revoked_at,style:{...Ve,opacity:b.revoked_at?"0.5":"1",padding:"6px 10px",fontSize:"12px"},children:b.revoked_at?"Revoked":"Revoke"})]},b.id||v))]})]})}function ys({owner:e,repo:n}){const[o,r]=p([]),[i,l]=p(""),[s,d]=p(!1),[c,a]=p(""),[g,u]=p(!1),[h,f]=p(0),[y,_]=p(""),[S,m]=p(!1),[x,b]=p(!1);H(()=>{vo(e,n).then(R=>r(R||[])).catch(R=>a(R.message||"failed to list branches"))},[e,n]);const v=async R=>{if(R){d(!0),a(""),b(!1);try{const N=await qr(e,n,R);f(N.required_reviews||0),_(Array.isArray(N.required_checks)?N.required_checks.join(", "):""),m(!!N.require_entity_owner_approval),b(!0)}catch{f(0),_(""),m(!1),b(!0)}d(!1)}},k=R=>{l(R),R&&v(R)},D=async()=>{if(i){u(!0),a("");try{const R=y.split(",").map(N=>N.trim()).filter(Boolean);await jr(e,n,i,{required_reviews:h,required_checks:R,require_entity_owner_approval:S})}catch(R){a(R.message||"Failed to save branch protection")}u(!1)}},L=async()=>{if(!(!i||!window.confirm(`Delete branch protection for "${i}"?`))){a("");try{await Vr(e,n,i),f(0),_(""),m(!1)}catch(N){a(N.message||"Failed to delete branch protection")}}};return t("div",{children:[c&&t("div",{style:{color:C.red,marginBottom:"12px",fontSize:"13px"},children:c}),t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:"Select branch"}),o.length>0?t("select",{value:i,onChange:R=>k(R.target.value),style:{...ge,width:"100%",boxSizing:"border-box"},children:[t("option",{value:"",children:"-- select a branch --"}),o.map(R=>t("option",{value:R,children:R},R))]}):t("div",{children:[t("label",{style:be,children:"Branch name"}),t("input",{type:"text",value:i,onInput:R=>l(R.target.value),onBlur:()=>{i&&v(i)},placeholder:"main",style:{...ge,width:"100%",boxSizing:"border-box"}})]})]}),s&&t("div",{style:{color:C.muted,fontSize:"14px",marginBottom:"16px"},children:"Loading protection rules..."}),x&&i&&!s&&t("div",{style:ze,children:[t("h3",{style:{color:C.heading,fontSize:"16px",marginTop:"0",marginBottom:"16px"},children:["Protection rules for ",t("code",{style:{background:C.bg,padding:"2px 6px",borderRadius:"4px"},children:i})]}),t("div",{style:{marginBottom:"16px"},children:[t("label",{style:be,children:"Required reviews"}),t("input",{type:"number",min:"0",value:h,onInput:R=>f(parseInt(R.target.value,10)||0),style:{...ge,width:"100px"}})]}),t("div",{style:{marginBottom:"16px"},children:[t("label",{style:be,children:"Required checks (comma-separated)"}),t("input",{type:"text",value:y,onInput:R=>_(R.target.value),placeholder:"ci/build, ci/test",style:{...ge,width:"100%",boxSizing:"border-box"}})]}),t("div",{style:{marginBottom:"20px"},children:[t("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t("input",{type:"checkbox",checked:S,onChange:R=>m(R.target.checked),style:{width:"16px",height:"16px",accentColor:C.active}}),t("span",{style:{color:C.heading,fontSize:"14px"},children:"Require entity owner approval"})]}),t("div",{style:{color:C.muted,fontSize:"12px",marginLeft:"24px",marginTop:"4px"},children:"When enabled, pull requests must be approved by the owners of all modified entities before merging."})]}),t("div",{style:{display:"flex",gap:"8px"},children:[t("button",{onClick:D,disabled:g,style:{...at,opacity:g?"0.6":"1"},children:g?"Saving...":"Save protection rules"}),t("button",{onClick:L,style:Ve,children:"Delete protection"})]})]})]})}const ae={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d"},vs={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},_s={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341"};function Pn(e){const n=e.toLowerCase();return _s[n]||ae.muted}function Ss({owner:e,repo:n,ref:o,path:r}){const[i,l]=p(""),[s,d]=p([]),[c,a]=p(!1),[g,u]=p(""),[h,f]=p(!1),y=Ie(null);return H(()=>{if(!(!e||!n||!o)){if(y.current&&clearTimeout(y.current),!i.trim()){d([]),f(!1),u("");return}return y.current=setTimeout(()=>{a(!0),u(""),f(!0),qt(e,n,o,i.trim()).then(_=>{d(_||[])}).catch(_=>{u(_.message||"Search failed"),d([])}).finally(()=>a(!1))},300),()=>{y.current&&clearTimeout(y.current)}}},[i,e,n,o]),t("div",{style:{color:ae.text},children:[t("h1",{style:{fontSize:"20px",color:ae.heading,margin:"0 0 16px 0"},children:"Symbol Search"}),t("div",{style:{marginBottom:"16px"},children:t("input",{type:"text",placeholder:"Search symbols...",value:i,onInput:_=>l(_.target.value),style:{...vs,width:"100%",boxSizing:"border-box"}})}),g&&t("div",{style:{color:ae.red,marginBottom:"12px",fontSize:"14px"},children:g}),c&&t("div",{style:{color:ae.muted,padding:"20px 0",fontSize:"14px"},children:"Searching..."}),!c&&h&&s.length===0&&!g&&t("div",{style:{border:`1px solid ${ae.border}`,borderRadius:"6px",padding:"24px",color:ae.muted,textAlign:"center",fontSize:"14px"},children:['No symbols found for "',i,'"']}),!c&&s.length>0&&t("div",{children:[t("div",{style:{color:ae.muted,fontSize:"13px",marginBottom:"8px"},children:[s.length," result",s.length!==1?"s":""]}),t("div",{style:{border:`1px solid ${ae.border}`,borderRadius:"6px"},children:s.map((_,S)=>t("a",{href:`/${e}/${n}/blob/${o}/${_.file}`,style:{display:"block",textDecoration:"none",padding:"12px 14px",borderTop:S===0?"none":`1px solid ${ae.border}`},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[t("span",{style:{display:"inline-block",padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",color:Pn(_.kind),border:`1px solid ${Pn(_.kind)}`,textTransform:"lowercase",flexShrink:0},children:_.kind}),t("span",{style:{color:ae.heading,fontWeight:"bold",fontSize:"14px"},children:_.name}),_.receiver&&t("span",{style:{color:ae.muted,fontSize:"13px"},children:["on ",_.receiver]})]}),_.signature&&t("div",{style:{color:ae.muted,fontSize:"13px",marginTop:"4px",fontFamily:"monospace"},children:_.signature}),t("div",{style:{color:ae.link,fontSize:"12px",marginTop:"4px"},children:[_.file,t("span",{style:{color:ae.muted},children:[":",_.start_line,_.end_line&&_.end_line!==_.start_line?`-${_.end_line}`:""]})]})]},`${_.file}-${_.name}-${_.start_line}-${S}`))})]}),!c&&!h&&!g&&t("div",{style:{color:ae.muted,fontSize:"14px",padding:"20px 0"},children:"Type a query to search for symbols in this repository."})]})}const re={text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb"},ks={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},ws={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341",reference:"#58a6ff",definition:"#238636",call:"#a371f7"};function Wn(e){const n=e.toLowerCase();return ws[n]||re.muted}function $s(e){const n=new Map;for(const o of e){const r=n.get(o.file)||[];r.push(o),n.set(o.file,r)}return Array.from(n.entries()).map(([o,r])=>({file:o,refs:r}))}function zs({owner:e,repo:n,ref:o,path:r}){const[i,l]=p(""),[s,d]=p([]),[c,a]=p(!1),[g,u]=p(""),[h,f]=p(!1),[y,_]=p({}),S=b=>{b&&b.preventDefault(),!(!e||!n||!o||!i.trim())&&(a(!0),u(""),f(!0),_({}),So(e,n,o,i.trim()).then(v=>{d(v||[])}).catch(v=>{u(v.message||"Search failed"),d([])}).finally(()=>a(!1)))},m=b=>{_(v=>({...v,[b]:!v[b]}))},x=$s(s);return t("div",{style:{color:re.text},children:[t("h1",{style:{fontSize:"20px",color:re.heading,margin:"0 0 16px 0"},children:"Find References"}),t("form",{onSubmit:S,style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[t("input",{type:"text",placeholder:"Symbol name...",value:i,onInput:b=>l(b.target.value),style:{...ks,flex:"1",minWidth:"200px"}}),t("button",{type:"submit",disabled:c||!i.trim(),style:{background:re.active,color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:c||!i.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",opacity:c||!i.trim()?.6:1},children:c?"Searching...":"Find References"})]}),g&&t("div",{style:{color:re.red,marginBottom:"12px",fontSize:"14px"},children:g}),c&&t("div",{style:{color:re.muted,padding:"20px 0",fontSize:"14px"},children:"Searching for references..."}),!c&&h&&s.length===0&&!g&&t("div",{style:{border:`1px solid ${re.border}`,borderRadius:"6px",padding:"24px",color:re.muted,textAlign:"center",fontSize:"14px"},children:['No references found for "',i,'"']}),!c&&s.length>0&&t("div",{children:[t("div",{style:{color:re.muted,fontSize:"13px",marginBottom:"12px"},children:[s.length," reference",s.length!==1?"s":""," across"," ",x.length," file",x.length!==1?"s":""]}),x.map(b=>{const v=!!y[b.file];return t("div",{style:{border:`1px solid ${re.border}`,borderRadius:"6px",marginBottom:"8px"},children:[t("div",{onClick:()=>m(b.file),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:re.surface,cursor:"pointer",borderRadius:v?"6px":"6px 6px 0 0",userSelect:"none"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("span",{style:{color:re.muted,fontSize:"12px",display:"inline-block",width:"12px",textAlign:"center"},children:v?"â–¶":"â–¼"}),t("a",{href:`/${e}/${n}/blob/${o}/${b.file}`,onClick:k=>k.stopPropagation(),style:{color:re.link,fontSize:"14px",textDecoration:"none"},children:b.file})]}),t("span",{style:{color:re.muted,fontSize:"12px"},children:[b.refs.length," reference",b.refs.length!==1?"s":""]})]}),!v&&t("div",{children:b.refs.map((k,D)=>t("a",{href:`/${e}/${n}/blob/${o}/${b.file}`,style:{display:"flex",alignItems:"center",gap:"10px",padding:"8px 14px 8px 34px",borderTop:`1px solid ${re.border}`,textDecoration:"none",color:re.text,fontSize:"13px"},children:[t("span",{style:{color:re.muted,fontFamily:"monospace",fontSize:"12px",minWidth:"50px"},children:["L",k.start_line,k.end_line&&k.end_line!==k.start_line?`-${k.end_line}`:""]}),k.start_column!=null&&t("span",{style:{color:re.muted,fontFamily:"monospace",fontSize:"12px"},children:["col ",k.start_column,k.end_column!=null&&k.end_column!==k.start_column?`-${k.end_column}`:""]}),t("span",{style:{display:"inline-block",padding:"1px 6px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",color:Wn(k.kind),border:`1px solid ${Wn(k.kind)}`,textTransform:"lowercase"},children:k.kind}),t("span",{style:{color:re.heading,fontSize:"13px"},children:k.name})]},`${k.start_line}-${k.start_column}-${D}`))})]},b.file)})]}),!c&&!h&&!g&&t("div",{style:{color:re.muted,fontSize:"14px",padding:"20px 0"},children:'Enter a symbol name and click "Find References" to search for all references in this repository.'})]})}const z={bg:"#0d1117",text:"#c9d1d9",heading:"#f0f6fc",muted:"#8b949e",link:"#58a6ff",red:"#f85149",border:"#30363d",surface:"#161b22",active:"#1f6feb",nodeFill:"#22262d",nodeStroke:"#4a5260",nodeRelated:"#275da8",nodeDim:"#1a1f26",edgeDefault:"#6e7681",edgeDim:"#3b434f",edgeInbound:"#e3b341",edgeOutbound:"#58a6ff"},An={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"},Rs={function:"#58a6ff",type:"#238636",method:"#a371f7",variable:"#d29922",constant:"#e3b341"},$e=176,Be=46,Nn=240,St=84,Mn=92,Cs=68,Qe=.6,et=1.8,Fn=.1;function Hn(e){if(!e)return z.muted;const n=e.toLowerCase();return Rs[n]||z.muted}function ke(e,n){return`${e}::${n}`}function On(e,n=22){return e.length<=n?e:`${e.slice(0,n-1)}â€¦`}function rt(e){if(!(typeof e!="number"||!Number.isFinite(e)||e<=0))return Math.floor(e)}function tt(e,n,o,r,i){if(!e||!n||!o||!r)return"#";const l=`/${e}/${n}/blob/${o}/${r}`;return i&&i>0?`${l}#L${i}`:l}function Ts(e,n){const o=new Map;for(const i of e)o.set(ke(i.name,i.file),{id:ke(i.name,i.file),name:i.name,file:i.file,kind:i.kind,line:rt(i.start_line)});const r=n.map((i,l)=>{const s=ke(i.caller_name,i.caller_file),d=ke(i.callee_name,i.callee_file);return o.has(s)||o.set(s,{id:s,name:i.caller_name,file:i.caller_file}),o.has(d)||o.set(d,{id:d,name:i.callee_name,file:i.callee_file}),{id:`${s}->${d}-${l}`,source:s,target:d,count:typeof i.count=="number"?i.count:void 0}});return{nodes:Array.from(o.values()),edges:r}}function Bs(e,n,o){var _,S,m;if(e.length===0)return{width:820,height:340,nodes:[]};const r=new Map,i=new Map;for(const x of e)r.set(x.id,[]),i.set(x.id,0);for(const x of n)(_=r.get(x.source))==null||_.push(x.target),i.set(x.target,(i.get(x.target)||0)+1);const l=new Map,s=[];if(o&&r.has(o))l.set(o,0),s.push(o);else for(const x of e)(i.get(x.id)||0)===0&&(l.set(x.id,0),s.push(x.id));if(s.length===0){const x=(S=e[0])==null?void 0:S.id;x&&(l.set(x,0),s.push(x))}for(;s.length>0;){const x=s.shift();if(!x)continue;const b=l.get(x)||0;for(const v of r.get(x)||[]){const k=b+1,D=l.get(v);(D==null||k<D)&&(l.set(v,k),s.push(v))}}let d=0;for(const x of l.values())x>d&&(d=x);const c=d+1;for(const x of e)l.has(x.id)||l.set(x.id,c);d=Math.max(d,c);const a=new Map;for(const x of e){const b=l.get(x.id)||0,v=a.get(b);v?v.push(x):a.set(b,[x])}const g=Array.from(a.keys()).sort((x,b)=>x-b);for(const x of g)(m=a.get(x))==null||m.sort((b,v)=>b.name.localeCompare(v.name));const u=Math.max(...Array.from(a.values()).map(x=>x.length),1),h=Mn*2+d*Nn+$e,f=Math.max(340,Cs*2+(u-1)*St+Be),y=[];for(const x of g){const b=a.get(x)||[],v=Mn+x*Nn+$e/2,k=(b.length-1)*St,D=(f-k)/2;b.forEach((L,R)=>{y.push({...L,x:v,y:D+R*St})})}return{width:h,height:f,nodes:y}}function Es(e,n){const o=n.x-e.x,r=n.y-e.y;let i=e.x,l=e.y,s=n.x,d=n.y;if(Math.abs(o)>=Math.abs(r)){o>=0?(i+=$e/2,s-=$e/2):(i-=$e/2,s+=$e/2);const u=Math.max(40,Math.abs(o)*.42),h=i+(o>=0?u:-u),f=s-(o>=0?u:-u);return`M ${i} ${l} C ${h} ${l}, ${f} ${d}, ${s} ${d}`}r>=0?(l+=Be/2,d-=Be/2):(l-=Be/2,d+=Be/2);const c=Math.max(40,Math.abs(r)*.42),a=l+(r>=0?c:-c),g=d-(r>=0?c:-c);return`M ${i} ${l} C ${i} ${a}, ${s} ${g}, ${s} ${d}`}function Ls(e){return e==="outbound"?"callgraph-arrow-outbound":e==="inbound"?"callgraph-arrow-inbound":e==="dim"?"callgraph-arrow-dim":"callgraph-arrow-default"}function Ds(e,n,o){const r=e.trim().toLowerCase();if(r){const i=n.find(d=>d.name.toLowerCase()===r);if(i)return ke(i.name,i.file);const l=o.find(d=>d.caller_name.toLowerCase()===r);if(l)return ke(l.caller_name,l.caller_file);const s=o.find(d=>d.callee_name.toLowerCase()===r);if(s)return ke(s.callee_name,s.callee_file)}return n[0]?ke(n[0].name,n[0].file):o[0]?ke(o[0].caller_name,o[0].caller_file):null}function Is({owner:e,repo:n,ref:o}){const[r,i]=p(""),[l,s]=p(3),[d,c]=p(!1),[a,g]=p([]),[u,h]=p([]),[f,y]=p(null),[_,S]=p("graph"),[m,x]=p(1),[b,v]=p(!1),[k,D]=p(""),[L,R]=p(!1),N=Ie(null),I=Ie(null),V=Ie(!1),w=ce(()=>Ts(a,u),[a,u]),O=ce(()=>Bs(w.nodes,w.edges,f),[w,f]),A=ce(()=>{const $=new Map;for(const W of O.nodes)$.set(W.id,W);return $},[O.nodes]),j=ce(()=>{const $=new Set,W=new Set;if(!f)return{inbound:$,outbound:W};for(const F of w.edges)F.target===f&&$.add(F.source),F.source===f&&W.add(F.target);return{inbound:$,outbound:W}},[f,w.edges]),de=a.length>0||u.length>0,he=O.nodes.length>0&&w.edges.length>0,le=_==="graph"&&he,xe=_==="table"||!he,E=$=>Math.max(Qe,Math.min(et,Math.round($*100)/100)),G=$=>{x(W=>E(W+$))},K=()=>{x(1);const $=N.current;$&&$.scrollTo({left:0,top:0})},te=$=>{if($.pointerType==="mouse"&&$.button!==0)return;const W=$.target;if(W!=null&&W.closest('a[data-callgraph-node="true"]'))return;const F=$.currentTarget;V.current=!1,I.current={pointerId:$.pointerId,startX:$.clientX,startY:$.clientY,scrollLeft:F.scrollLeft,scrollTop:F.scrollTop,moved:!1},F.style.cursor="grabbing",F.style.userSelect="none",F.setPointerCapture($.pointerId)},M=$=>{const W=I.current;if(!W||W.pointerId!==$.pointerId)return;const F=$.currentTarget,J=$.clientX-W.startX,ve=$.clientY-W.startY;!W.moved&&(Math.abs(J)>2||Math.abs(ve)>2)&&(W.moved=!0),F.scrollLeft=W.scrollLeft-J,F.scrollTop=W.scrollTop-ve},T=$=>{const W=I.current;if(!W||W.pointerId!==$.pointerId)return;const F=$.currentTarget;F.hasPointerCapture($.pointerId)&&F.releasePointerCapture($.pointerId),F.style.cursor="grab",F.style.userSelect="",W.moved&&(V.current=!0),I.current=null},X=($,W)=>{if(V.current){V.current=!1,$.preventDefault();return}$.shiftKey&&($.preventDefault(),y(F=>F===W.id?null:W.id))},Z=$=>{$&&$.preventDefault(),!(!e||!n||!o||!r.trim())&&(v(!0),D(""),R(!0),si(e,n,o,r.trim(),l,d).then(W=>{const F=(W==null?void 0:W.definitions)||[],J=(W==null?void 0:W.edges)||[];g(F),h(J),y(Ds(r,F,J)),S(J.length>0?"graph":"table"),x(1)}).catch(W=>{D(W.message||"Failed to load call graph"),g([]),h([]),y(null),S("table"),x(1)}).finally(()=>v(!1)))},fe=$=>{c($)},P=()=>y(null),q=Math.max(560,Math.round(O.width*m)),ne=Math.max(300,Math.round(O.height*m));return t("div",{style:{color:z.text},children:[t("h1",{style:{fontSize:"20px",color:z.heading,margin:"0 0 16px 0"},children:"Call Graph"}),t("form",{onSubmit:Z,style:{marginBottom:"16px"},children:[t("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},children:[t("input",{type:"text",placeholder:"Symbol name...",value:r,onInput:$=>i($.currentTarget.value),style:{...An,flex:"1",minWidth:"200px"}}),t("input",{type:"number",min:1,max:10,value:l,onInput:$=>s(parseInt($.currentTarget.value,10)||3),style:{...An,width:"80px"},title:"Depth"}),t("button",{type:"submit",disabled:b||!r.trim(),style:{background:z.active,color:"#fff",border:"none",borderRadius:"6px",padding:"10px 16px",cursor:b||!r.trim()?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold",opacity:b||!r.trim()?.6:1},children:b?"Loading...":"Search"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap"},children:[t("div",{style:{display:"flex",gap:"4px"},children:[t("button",{type:"button",onClick:()=>fe(!1),style:{background:d?z.surface:z.active,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px 0 0 6px",padding:"6px 12px",cursor:"pointer",fontSize:"13px"},children:"Callees"}),t("button",{type:"button",onClick:()=>fe(!0),style:{background:d?z.active:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"0 6px 6px 0",padding:"6px 12px",cursor:"pointer",fontSize:"13px"},children:"Callers"})]}),t("span",{style:{color:z.muted,fontSize:"13px"},children:["Depth: ",l]}),le&&f&&t("button",{type:"button",onClick:P,style:{background:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px",padding:"6px 10px",cursor:"pointer",fontSize:"12px"},children:"Clear focus"})]})]}),k&&t("div",{style:{color:z.red,marginBottom:"12px",fontSize:"14px"},children:k}),b&&t("div",{style:{color:z.muted,padding:"20px 0",fontSize:"14px"},children:"Loading call graph..."}),!b&&L&&!de&&!k&&t("div",{style:{border:`1px solid ${z.border}`,borderRadius:"6px",padding:"24px",color:z.muted,textAlign:"center",fontSize:"14px"},children:['No call graph data found for "',r,'"']}),!b&&de&&t("div",{children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",flexWrap:"wrap",marginBottom:"10px"},children:[he?t("div",{style:{display:"flex",gap:"4px"},children:[t("button",{type:"button",onClick:()=>S("graph"),style:{background:_==="graph"?z.active:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px 0 0 6px",padding:"6px 12px",cursor:"pointer",fontSize:"12px"},children:"Graph view"}),t("button",{type:"button",onClick:()=>S("table"),style:{background:_==="table"?z.active:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"0 6px 6px 0",padding:"6px 12px",cursor:"pointer",fontSize:"12px"},children:"Table view"})]}):t("span",{style:{color:z.muted,fontSize:"12px"},children:"Graph data is missing for this result. Showing table fallback."}),le&&t("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[t("button",{type:"button",onClick:()=>G(-Fn),disabled:m<=Qe,style:{background:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px",padding:"4px 8px",cursor:m<=Qe?"not-allowed":"pointer",opacity:m<=Qe?.5:1},"aria-label":"Zoom out graph",children:"-"}),t("span",{style:{color:z.muted,fontSize:"12px",minWidth:"44px",textAlign:"center"},children:[Math.round(m*100),"%"]}),t("button",{type:"button",onClick:()=>G(Fn),disabled:m>=et,style:{background:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px",padding:"4px 8px",cursor:m>=et?"not-allowed":"pointer",opacity:m>=et?.5:1},"aria-label":"Zoom in graph",children:"+"}),t("button",{type:"button",onClick:K,style:{background:z.surface,color:z.text,border:`1px solid ${z.border}`,borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Reset"})]})]}),le&&t(ye,{children:[t("div",{ref:N,onPointerDown:te,onPointerMove:M,onPointerUp:T,onPointerCancel:T,style:{border:`1px solid ${z.border}`,borderRadius:"10px",background:z.surface,overflow:"auto",maxHeight:"70vh",marginBottom:"14px",cursor:"grab",touchAction:"none"},children:t("svg",{width:q,height:ne,viewBox:`0 0 ${O.width} ${O.height}`,role:"img","aria-label":"Interactive call graph",style:{display:"block",background:z.bg},children:[t("defs",{children:[t("marker",{id:"callgraph-arrow-default",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:z.edgeDefault})}),t("marker",{id:"callgraph-arrow-dim",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:z.edgeDim})}),t("marker",{id:"callgraph-arrow-inbound",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:z.edgeInbound})}),t("marker",{id:"callgraph-arrow-outbound",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",children:t("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:z.edgeOutbound})})]}),w.edges.map($=>{const W=A.get($.source),F=A.get($.target);if(!W||!F)return null;let J="default";f&&($.source===f?J="outbound":$.target===f?J="inbound":J="dim");const ve=J==="outbound"?z.edgeOutbound:J==="inbound"?z.edgeInbound:J==="dim"?z.edgeDim:z.edgeDefault;return t("g",{children:[t("path",{d:Es(W,F),fill:"none",stroke:ve,strokeWidth:J==="dim"?1.2:1.8,opacity:J==="dim"?.35:.9,markerEnd:`url(#${Ls(J)})`}),$.count&&$.count>1&&t("text",{x:(W.x+F.x)/2,y:(W.y+F.y)/2-6,textAnchor:"middle",fontSize:"10",fill:z.muted,children:[$.count,"x"]})]},$.id)}),O.nodes.map($=>{const W=f===$.id,F=j.inbound.has($.id),J=j.outbound.has($.id),ve=W||F||J,Ke=f!=null&&!ve,U=W?z.active:ve?z.nodeRelated:Ke?z.nodeDim:z.nodeFill,ee=W?"#9ecbff":z.nodeStroke,se=tt(e,n,o,$.file,$.line);return t("a",{href:se,"data-callgraph-node":"true",onClick:_e=>X(_e,$),children:t("g",{transform:`translate(${$.x}, ${$.y})`,style:{cursor:"pointer"},children:[t("title",{children:`${$.name}
${$.file}`}),t("rect",{x:-$e/2,y:-Be/2,width:$e,height:Be,rx:10,ry:10,fill:U,stroke:ee,strokeWidth:W?2.2:1.2,opacity:Ke?.55:1}),t("text",{x:"0",y:"-2",textAnchor:"middle",fill:z.heading,fontSize:"12",fontWeight:"600",children:On($.name)}),t("text",{x:"0",y:"13",textAnchor:"middle",fill:Hn($.kind),fontSize:"10",children:On($.file,24)})]})},$.id)})]})}),t("div",{style:{display:"flex",gap:"14px",flexWrap:"wrap",fontSize:"12px",marginBottom:"16px",color:z.muted},children:[t("span",{children:[t("span",{style:{color:z.edgeOutbound,fontWeight:700},children:"Outbound"})," edges from focused node"]}),t("span",{children:[t("span",{style:{color:z.edgeInbound,fontWeight:700},children:"Inbound"})," edges into focused node"]}),t("span",{children:"Drag background to pan. Click nodes to open file location."}),t("span",{children:"Hold Shift and click a node to focus or unfocus."})]})]}),xe&&t("div",{style:{border:`1px solid ${z.border}`,borderRadius:"8px",padding:"12px 14px",background:z.surface},children:[t("h2",{style:{fontSize:"15px",color:z.heading,margin:"0 0 8px 0"},children:"Table fallback"}),a.length>0&&t("div",{style:{marginBottom:w.edges.length>0?"12px":0,overflowX:"auto"},children:[t("div",{style:{color:z.muted,fontSize:"12px",marginBottom:"6px"},children:["Definitions (",a.length,")"]}),t("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[t("thead",{children:t("tr",{children:[t("th",{style:{textAlign:"left",borderBottom:`1px solid ${z.border}`,padding:"6px"},children:"Symbol"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${z.border}`,padding:"6px"},children:"Kind"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${z.border}`,padding:"6px"},children:"Location"})]})}),t("tbody",{children:a.map(($,W)=>t("tr",{children:[t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`},children:$.name}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`,color:Hn($.kind)},children:$.kind||"-"}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`},children:[t("a",{href:tt(e,n,o,$.file,rt($.start_line)),style:{color:z.link,textDecoration:"none"},children:$.file}),t("span",{style:{color:z.muted},children:rt($.start_line)?`:L${rt($.start_line)}`:""})]})]},$.id||`${$.name}-${$.file}-${W}`))})]})]}),w.edges.length>0&&t("div",{style:{overflowX:"auto"},children:[t("div",{style:{color:z.muted,fontSize:"12px",marginBottom:"6px"},children:["Directed edges (",w.edges.length,")"]}),t("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[t("thead",{children:t("tr",{children:[t("th",{style:{textAlign:"left",borderBottom:`1px solid ${z.border}`,padding:"6px"},children:"Caller"}),t("th",{style:{textAlign:"center",borderBottom:`1px solid ${z.border}`,padding:"6px",width:"40px"},children:"â†’"}),t("th",{style:{textAlign:"left",borderBottom:`1px solid ${z.border}`,padding:"6px"},children:"Callee"})]})}),t("tbody",{children:w.edges.map(($,W)=>{const F=A.get($.source),J=A.get($.target);return!F||!J?null:t("tr",{children:[t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`},children:[t("a",{href:tt(e,n,o,F.file,F.line),style:{color:z.link,textDecoration:"none"},children:F.name}),t("span",{style:{color:z.muted},children:[" (",F.file,")"]})]}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`,color:z.muted,textAlign:"center"},children:"â†’"}),t("td",{style:{padding:"6px",borderBottom:`1px solid ${z.border}`},children:[t("a",{href:tt(e,n,o,J.file,J.line),style:{color:z.link,textDecoration:"none"},children:J.name}),t("span",{style:{color:z.muted},children:[" (",J.file,")"]})]})]},`${$.id}-table-${W}`)})})]})]})]})]}),!b&&!L&&!k&&t("div",{style:{color:z.muted,fontSize:"14px",padding:"20px 0"},children:'Enter a symbol name and click "Search" to explore the call graph. Use "Callees" to see what a function calls, or "Callers" to see what calls it.'})]})}const kt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px"};function Ps({owner:e,repo:n,ref:o}){const r=new URLSearchParams(window.location.search),[i,l]=p(r.get("stableId")||r.get("stable_id")||""),[s,d]=p(r.get("name")||""),[c,a]=p(r.get("bodyHash")||r.get("body_hash")||""),[g,u]=p(null),[h,f]=p(!1),[y,_]=p(""),[S,m]=p(""),x=()=>{if(!e||!n||!o)return;const v=i.trim(),k=s.trim(),D=c.trim();if(!v&&!k&&!D){m("At least one search field must be filled.");return}m(""),_(""),u(null),f(!0),ko(e,n,o,{stableId:v||void 0,name:k||void 0,bodyHash:D||void 0}).then(L=>{u(L||[])}).catch(L=>{_(L.message||"Failed to fetch entity history")}).finally(()=>{f(!1)})};return H(()=>{const v=i.trim(),k=s.trim(),D=c.trim();e&&n&&o&&(v||k||D)&&x()},[e,n,o]),t("div",{style:{maxWidth:"900px"},children:[t("h2",{style:{fontSize:"20px",color:"#f0f6fc",marginBottom:"4px"},children:"Entity History"}),t("p",{style:{color:"#8b949e",fontSize:"13px",marginTop:"0",marginBottom:"16px"},children:["Track how a code entity has changed across commits in"," ",t("code",{style:{background:"#161b22",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",color:"#c9d1d9"},children:o||"HEAD"})]}),t("form",{onSubmit:v=>{v.preventDefault(),x()},style:{border:"1px solid #30363d",borderRadius:"6px",padding:"16px",background:"#161b22",marginBottom:"20px"},children:[t("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Stable ID"}),t("input",{type:"text",value:i,onInput:v=>l(v.target.value),placeholder:"e.g. abc123def456",style:{...kt,width:"100%",boxSizing:"border-box"}})]}),t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Entity Name"}),t("input",{type:"text",value:s,onInput:v=>d(v.target.value),placeholder:"e.g. MyFunction",style:{...kt,width:"100%",boxSizing:"border-box"}})]}),t("div",{children:[t("label",{style:{display:"block",color:"#c9d1d9",fontSize:"13px",marginBottom:"6px",fontWeight:"500"},children:"Body Hash"}),t("input",{type:"text",value:c,onInput:v=>a(v.target.value),placeholder:"e.g. sha256:...",style:{...kt,width:"100%",boxSizing:"border-box"}})]})]}),S&&t("div",{style:{color:"#f85149",fontSize:"13px",marginTop:"10px"},children:S}),t("div",{style:{marginTop:"14px"},children:t("button",{type:"submit",disabled:h,style:{background:"#238636",color:"#ffffff",border:"none",borderRadius:"6px",padding:"8px 16px",fontSize:"14px",fontWeight:"500",cursor:h?"not-allowed":"pointer",opacity:h?.7:1},children:h?"Searching...":"Search"})})]}),y&&t("div",{style:{color:"#f85149",border:"1px solid #f8514933",borderRadius:"6px",padding:"12px 14px",marginBottom:"16px",background:"#f851490d",fontSize:"14px"},children:y}),h&&t("div",{style:{color:"#8b949e",padding:"20px 0",fontSize:"14px"},children:"Loading..."}),!h&&g!==null&&g.length===0&&t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",padding:"24px",textAlign:"center",color:"#8b949e",fontSize:"14px"},children:"No history found for the given criteria."}),!h&&g!==null&&g.length>0&&t("div",{children:[t("div",{style:{color:"#8b949e",fontSize:"13px",marginBottom:"12px"},children:[g.length," result",g.length!==1?"s":""]}),t("div",{style:{position:"relative",paddingLeft:"24px"},children:[t("div",{style:{position:"absolute",left:"7px",top:"0",bottom:"0",width:"2px",background:"#30363d"}}),g.map((v,k)=>{var D;return t("div",{style:{position:"relative",marginBottom:"16px"},children:[t("div",{style:{position:"absolute",left:"-20px",top:"18px",width:"10px",height:"10px",borderRadius:"50%",background:"#1f6feb",border:"2px solid #0d1117"}}),t("div",{style:{border:"1px solid #30363d",borderRadius:"6px",background:"#161b22",overflow:"hidden"},children:[t("div",{style:{padding:"12px 16px",borderBottom:"1px solid #30363d"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"8px"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[t("a",{href:`/${e}/${n}/commit/${v.commit_hash}`,style:{fontFamily:"monospace",fontSize:"13px",color:"#58a6ff",textDecoration:"none",background:"#0d1117",padding:"2px 8px",borderRadius:"4px",border:"1px solid #30363d"},children:(D=v.commit_hash)==null?void 0:D.slice(0,7)}),t("span",{style:{color:"#c9d1d9",fontSize:"14px",fontWeight:"500"},children:v.author})]}),t("span",{style:{color:"#8b949e",fontSize:"12px",flexShrink:0},children:Ws(v.timestamp)})]}),v.message&&t("div",{style:{color:"#f0f6fc",fontSize:"14px",marginTop:"8px",lineHeight:"1.4"},children:v.message})]}),t("div",{style:{padding:"10px 16px",display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px"},children:[v.kind&&t("span",{style:{display:"inline-block",background:"#1f6feb",color:"#ffffff",fontSize:"11px",fontWeight:"600",padding:"2px 8px",borderRadius:"10px",textTransform:"uppercase",letterSpacing:"0.5px"},children:v.kind}),v.decl_kind&&t("span",{style:{display:"inline-block",background:"#30363d",color:"#c9d1d9",fontSize:"11px",padding:"2px 8px",borderRadius:"10px"},children:v.decl_kind}),v.name&&t("span",{style:{color:"#f0f6fc",fontSize:"14px",fontFamily:"monospace",fontWeight:"500"},children:[v.receiver?`${v.receiver}.`:"",v.name]}),v.path&&t("span",{style:{color:"#8b949e",fontSize:"12px",marginLeft:"auto"},children:v.path})]}),t("div",{style:{padding:"8px 16px",borderTop:"1px solid #30363d",display:"flex",gap:"16px",flexWrap:"wrap"},children:[v.stable_id&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["ID:"," ",t("span",{style:{fontFamily:"monospace"},children:v.stable_id.length>16?v.stable_id.slice(0,16)+"...":v.stable_id})]}),v.entity_hash&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["Entity:"," ",t("span",{style:{fontFamily:"monospace"},children:v.entity_hash.length>16?v.entity_hash.slice(0,16)+"...":v.entity_hash})]}),v.body_hash&&t("span",{style:{color:"#8b949e",fontSize:"12px"},children:["Body:"," ",t("span",{style:{fontFamily:"monospace"},children:v.body_hash.length>16?v.body_hash.slice(0,16)+"...":v.body_hash})]})]})]})]},`${v.commit_hash}-${v.stable_id}-${k}`)})]})]})]})}function Ws(e){if(!e)return"";const n=As(e);if(Number.isNaN(n.getTime()))return"";const r=new Date().getTime()-n.getTime(),i=Math.floor(r/1e3);if(i<60)return"just now";const l=Math.floor(i/60);if(l<60)return`${l} minute${l!==1?"s":""} ago`;const s=Math.floor(l/60);if(s<24)return`${s} hour${s!==1?"s":""} ago`;const d=Math.floor(s/24);return d===1?"yesterday":d<30?`${d} days ago`:n.toLocaleDateString()}function As(e){if(typeof e=="number")return new Date(e<1e12?e*1e3:e);if(typeof e=="string"){const n=Number(e);return Number.isNaN(n)?new Date(e):new Date(n<1e12?n*1e3:n)}return new Date(NaN)}function Ns({path:e}){return e==="/login"?t(zo,{}):t("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",textAlign:"center"},children:[t("h1",{style:{fontSize:"72px",color:"#f0f6fc",margin:"0 0 8px 0",fontWeight:"bold"},children:"404"}),t("h2",{style:{fontSize:"24px",color:"#8b949e",margin:"0 0 16px 0",fontWeight:"normal"},children:"Page not found"}),t("p",{style:{color:"#8b949e",fontSize:"16px",margin:"0 0 24px 0",maxWidth:"400px"},children:"The page you're looking for doesn't exist or has been moved."}),t("a",{href:"/",style:{color:"#58a6ff",fontSize:"14px",textDecoration:"none"},children:"Go to dashboard"})]})}function Ms({path:e}){const[n,o]=p(""),[r,i]=p(""),[l,s]=p(""),[d,c]=p(!1),[a,g]=p(!0),[u,h]=p(""),[f,y]=p(""),[_,S]=p(!1),m=jt()&&a;H(()=>{bo().then(L=>g(!!L.passkey_enabled)).catch(()=>g(!0))},[]);const x=typeof window<"u"&&new URLSearchParams(window.location.search).get("session")==="expired",b=L=>{Le(L);const N=new URLSearchParams(window.location.search).get("returnTo")||"/";window.location.assign(N.startsWith("/")&&!N.startsWith("//")?N:"/")},v=async L=>{L.preventDefault(),h(""),y(""),S(!0);try{const R=await xo(n),N=await wo(R.options),I=await mo(R.session_id,N);if(!I.token)throw new Error("sign-in token missing from response");b(I.token)}catch(R){h(R.message||"Passkey sign-in failed")}finally{S(!1)}},k=async L=>{L.preventDefault(),h(""),y(""),S(!0);try{const R=await fr(r);c(!0),R.token&&s(R.token),y(R.token?"Magic link token generated (dev mode). Verify below.":"Check your inbox for the magic link.")}catch(R){h(R.message)}finally{S(!1)}},D=async L=>{L.preventDefault(),h(""),y(""),S(!0);try{const R=await ur(l);if(!R.token)throw new Error("sign-in token missing from response");b(R.token)}catch(R){h(R.message)}finally{S(!1)}};return t("div",{style:{maxWidth:"400px",margin:"60px auto",padding:"0 16px"},children:[t("h1",{style:{fontSize:"24px",marginBottom:"24px",color:"#f0f6fc"},children:"Sign in to GotHub"}),x&&t("div",{style:{color:"#f0f6fc",marginBottom:"16px",padding:"12px",background:"#1b2a42",border:"1px solid #1f6feb",borderRadius:"6px"},children:"Session expired. Sign in again."}),f&&t("div",{style:{color:"#3fb950",marginBottom:"16px",padding:"12px",background:"#132a1d",border:"1px solid #3fb950",borderRadius:"6px"},children:f}),u&&t("div",{style:{color:"#f85149",marginBottom:"16px",padding:"12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:u}),t("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[t("input",{value:n,onInput:L=>o(L.target.value),placeholder:"Username",style:wt}),t("button",{type:"submit",disabled:_||!n||!m,style:{...Fs,opacity:_||!n||!m?.6:1},children:m?"Sign in with passkey":"Passkeys unavailable in this browser"})]}),t("div",{style:{borderTop:"1px solid #30363d",marginTop:"14px",paddingTop:"14px"},children:[t("form",{onSubmit:k,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[t("input",{value:r,onInput:L=>i(L.target.value),placeholder:"Email",type:"email",style:wt}),t("button",{type:"submit",disabled:_||!r,style:{...Un,opacity:_||!r?.6:1},children:"Send magic link"})]}),d&&t("form",{onSubmit:D,style:{display:"flex",flexDirection:"column",gap:"10px",marginTop:"10px"},children:[t("input",{value:l,onInput:L=>s(L.target.value),placeholder:"Magic token",style:wt}),t("button",{type:"submit",disabled:_||!l,style:{...Un,opacity:_||!l?.6:1},children:"Verify"})]})]}),t("p",{style:{marginTop:"16px",color:"#8b949e",fontSize:"13px"},children:["New to GotHub? ",t("a",{href:"/signup",style:{color:"#58a6ff"},children:"Create an account"})]})]})}const wt={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Fs={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"},Un={background:"#21262d",color:"#c9d1d9",border:"1px solid #30363d",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"};function Hs({path:e}){const[n,o]=p(""),[r,i]=p(""),[l,s]=p(""),[d,c]=p(""),[a,g]=p(!1);return t("div",{style:{maxWidth:"400px",margin:"60px auto",padding:"0 16px"},children:[t("h1",{style:{fontSize:"24px",marginBottom:"24px",color:"#f0f6fc"},children:"Create your account"}),d&&t("div",{style:{color:"#3fb950",marginBottom:"16px",padding:"12px",background:"#132a1d",border:"1px solid #3fb950",borderRadius:"6px"},children:d}),l&&t("div",{style:{color:"#f85149",marginBottom:"16px",padding:"12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px"},children:l}),t("form",{onSubmit:async h=>{h.preventDefault(),s(""),c(""),g(!0);try{const f=await go(n,r);if(f.token){Le(f.token),window.location.assign("/");return}if(f.requires_email_verification){const y=f.magic_token?`Account created. Verify your email using this token: ${f.magic_token}`:"Account created. Check your inbox for a magic link, then sign in.";c(y);return}s("account created but no sign-in token was returned")}catch(f){s(f.message)}finally{g(!1)}},style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t("input",{value:n,onInput:h=>o(h.target.value),placeholder:"Username",style:Gn}),t("input",{value:r,onInput:h=>i(h.target.value),placeholder:"Email",type:"email",style:Gn}),t("button",{type:"submit",disabled:a||!n||!r,style:{...Os,opacity:a||!n||!r?.6:1},children:"Create account"}),t("p",{style:{color:"#8b949e",margin:0,fontSize:"12px"},children:"After creating your account, add a passkey in Settings for fast sign-in."})]}),t("p",{style:{marginTop:"16px",color:"#8b949e",fontSize:"13px"},children:["Already have an account? ",t("a",{href:"/login",style:{color:"#58a6ff"},children:"Sign in"})]})]})}const Gn={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},Os={background:"#238636",color:"#fff",border:"none",padding:"10px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px",width:"100%"},Us=/^[a-zA-Z0-9][a-zA-Z0-9._-]*$/,At=100;function $t(e){return e?e.length>At?`Name must be ${At} characters or fewer`:Us.test(e)?null:"Name must start with a letter or number and contain only alphanumeric characters, hyphens, dots, or underscores":"Repository name is required"}function Gs(e){const[n,o]=p(null),[r,i]=p(null),[l,s]=p(!0),[d,c]=p(""),[a,g]=p(""),[u,h]=p(""),[f,y]=p("public"),[_,S]=p(!0),[m,x]=p(!1),[b,v]=p(null),[k,D]=p(!1);H(()=>{if(!pe()){window.location.assign("/login?returnTo=/new");return}(async()=>{try{const[j,de]=await Promise.all([yo(),cn()]);o(j),i(de)}catch(j){c(j.message||"Failed to load account information")}finally{s(!1)}})()},[]);const L=A=>{const j=A.target.value;g(j),k&&v($t(j))},R=()=>{D(!0),v($t(a))},N=f==="private",I=(r==null?void 0:r.can_create_private)!==!1,V=N&&r&&!I,w=!!a&&!$t(a)&&!(N&&!I),O=async A=>{if(A.preventDefault(),!(!w||m)){c(""),x(!0);try{await Sr(a,u,N);const j=(n==null?void 0:n.username)||"";window.location.assign(`/${j}/${a}`)}catch(j){c(j.message||"Failed to create repository"),x(!1)}}};return l?t("div",{style:{maxWidth:"600px",margin:"60px auto",textAlign:"center",color:"#8b949e"},children:"Loading..."}):t("div",{style:{maxWidth:"600px",margin:"40px auto"},children:[t("h1",{style:{fontSize:"24px",fontWeight:"bold",color:"#f0f6fc",marginBottom:"8px"},children:"Create a new repository"}),t("p",{style:{color:"#8b949e",fontSize:"14px",marginBottom:"24px"},children:"A repository contains all project files, including the revision history."}),d&&t("div",{style:js,children:d}),t("form",{onSubmit:O,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[t("div",{children:[t("label",{style:zt,children:["Repository name ",t("span",{style:{color:"#f85149"},children:"*"})]}),t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[n&&t("span",{style:{color:"#c9d1d9",fontSize:"14px",whiteSpace:"nowrap"},children:[n.username," /"]}),t("input",{type:"text",value:a,onInput:L,onBlur:R,placeholder:"my-cool-repo",maxLength:At,style:{...qn,flex:1,borderColor:k&&b?"#f85149":"#30363d"}})]}),k&&b&&t("div",{style:{color:"#f85149",fontSize:"12px",marginTop:"4px"},children:b})]}),t("div",{children:[t("label",{style:zt,children:["Description ",t("span",{style:{color:"#8b949e",fontWeight:"normal"},children:"(optional)"})]}),t("input",{type:"text",value:u,onInput:A=>h(A.target.value),placeholder:"Short description of your repository",style:qn})]}),t("div",{children:[t("label",{style:zt,children:"Visibility"}),t("div",{style:{display:"flex",gap:"12px"},children:[t("label",{style:{...jn,borderColor:f==="public"?"#1f6feb":"#30363d",background:f==="public"?"#0d2240":"#161b22"},children:[t("input",{type:"radio",name:"visibility",value:"public",checked:f==="public",onChange:()=>y("public"),style:{marginRight:"8px",accentColor:"#1f6feb"}}),t("div",{children:[t("div",{style:{color:"#f0f6fc",fontWeight:"bold",fontSize:"14px"},children:"Public"}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"2px"},children:"Anyone can see this repository."})]})]}),t("label",{style:{...jn,borderColor:f==="private"?"#1f6feb":"#30363d",background:f==="private"?"#0d2240":"#161b22"},children:[t("input",{type:"radio",name:"visibility",value:"private",checked:f==="private",onChange:()=>y("private"),style:{marginRight:"8px",accentColor:"#1f6feb"}}),t("div",{children:[t("div",{style:{color:"#f0f6fc",fontWeight:"bold",fontSize:"14px"},children:"Private"}),t("div",{style:{color:"#8b949e",fontSize:"12px",marginTop:"2px"},children:"Only you and collaborators can see this repository."})]})]})]})]}),V&&t("div",{style:qs,children:[t("div",{style:{color:"#d29922",fontWeight:"bold",fontSize:"14px",marginBottom:"6px"},children:"Private repositories require a GotHub Pro subscription."}),(r==null?void 0:r.private_reason)&&t("div",{style:{color:"#d29922",fontSize:"13px",opacity:.85,marginBottom:"8px"},children:r.private_reason}),t(Ks,{onSuccess:async()=>{try{const A=await cn();i(A)}catch{}}})]}),t("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[t("input",{type:"checkbox",checked:_,onChange:A=>S(A.target.checked),style:{accentColor:"#1f6feb"}}),t("span",{style:{color:"#c9d1d9",fontSize:"14px"},children:"Initialize this repository with a README"})]}),r&&t("div",{style:Vs,children:[t("div",{style:{color:"#8b949e",fontSize:"12px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.04em",marginBottom:"6px"},children:"Repository quota"}),t("div",{style:{display:"flex",gap:"24px"},children:[r.max_public_repos>0&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:[t("span",{style:{color:"#c9d1d9"},children:"Public:"})," ",r.public_repo_count," / ",r.max_public_repos]}),r.max_private_repos>0&&t("div",{style:{color:"#8b949e",fontSize:"13px"},children:[t("span",{style:{color:"#c9d1d9"},children:"Private:"})," ",r.private_repo_count," / ",r.max_private_repos]})]})]}),t("div",{style:{borderTop:"1px solid #30363d"}}),t("button",{type:"submit",disabled:!w||m,style:{background:"#238636",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"6px",fontWeight:"bold",fontSize:"14px",cursor:!w||m?"not-allowed":"pointer",opacity:!w||m?.6:1,alignSelf:"flex-start"},children:m?"Creating...":"Create repository"})]})]})}const qn={background:"#0d1117",border:"1px solid #30363d",borderRadius:"6px",padding:"10px 12px",color:"#c9d1d9",fontSize:"14px",width:"100%",boxSizing:"border-box"},zt={display:"block",color:"#f0f6fc",fontSize:"14px",fontWeight:"bold",marginBottom:"6px"},jn={flex:1,display:"flex",alignItems:"flex-start",padding:"12px",border:"1px solid #30363d",borderRadius:"6px",cursor:"pointer"},qs={border:"1px solid #d29922",borderRadius:"6px",padding:"14px",background:"#2b230f"},js={color:"#f85149",marginBottom:"16px",padding:"10px 12px",background:"#1c1214",border:"1px solid #f85149",borderRadius:"6px",fontSize:"13px"},Vs={padding:"12px",background:"#161b22",border:"1px solid #30363d",borderRadius:"6px"};function Ks({onSuccess:e}){const[n,o]=p(!0),[r,i]=p(""),l=Ie(!1),s=Jo(()=>{if(l.current||window.Polar){o(!1);return}const d=document.createElement("script");d.src="https://checkout.polar.sh/embed.js",d.async=!0,d.onload=()=>{l.current=!0,o(!1)},d.onerror=()=>{i("Failed to load checkout."),o(!1)},document.head.appendChild(d)},[]);return H(()=>{s()},[s]),n?t("div",{style:{color:"#8b949e",fontSize:"13px"},children:"Loading checkout..."}):r?t("div",{style:{color:"#f85149",fontSize:"13px"},children:r}):t("div",{style:{marginTop:"8px"},children:[t("a",{href:"https://polar.sh/odvcencio/checkout?product=gothub-pro","data-polar-checkout":!0,"data-polar-checkout-theme":"dark",style:{display:"inline-block",background:"#1f6feb",color:"#fff",padding:"8px 16px",borderRadius:"6px",fontWeight:600,fontSize:"14px",textDecoration:"none",cursor:"pointer"},children:"Subscribe to GotHub Pro"}),t("div",{style:{marginTop:"8px"},children:t("button",{type:"button",onClick:e,style:{background:"transparent",color:"#58a6ff",border:"none",padding:"4px 0",cursor:"pointer",fontSize:"13px",textDecoration:"underline"},children:"I already subscribed â€” refresh status"})})]})}function Xs(){return t("div",{children:[t(xi,{}),t("main",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:t(po,{children:[t(zo,{path:"/"}),t(Ms,{path:"/login"}),t(Hs,{path:"/signup"}),t(is,{path:"/notifications"}),t(ds,{path:"/settings"}),t(Gs,{path:"/new"}),t(hs,{path:"/:owner/:repo/settings"}),t(Cn,{path:"/:owner/:repo/tree/:ref/:path*"}),t(Cn,{path:"/:owner/:repo/blob/:ref/:path*"}),t(es,{path:"/:owner/:repo/commits/:ref"}),t(Wl,{path:"/:owner/:repo/diff/:spec"}),t(Ss,{path:"/:owner/:repo/symbols/:ref"}),t(zs,{path:"/:owner/:repo/references/:ref"}),t(Is,{path:"/:owner/:repo/callgraph/:ref"}),t(Ps,{path:"/:owner/:repo/entity-history/:ref"}),t(Ml,{path:"/:owner/:repo/pulls"}),t(Ql,{path:"/:owner/:repo/pulls/new"}),t(Vl,{path:"/:owner/:repo/pulls/:number"}),t(os,{path:"/:owner/:repo/issues"}),t(rs,{path:"/:owner/:repo/issues/:number"}),t(Mi,{path:"/:owner/:repo"}),t(Ns,{default:!0})]})})]})}jo(t(Xs,{}),document.getElementById("app"));
